"use strict";(self.webpackChunksandbox=self.webpackChunksandbox||[]).push([[361],{7152:(ur,ft,me)=>{me.d(ft,{Z:()=>mt});var L=me(9955),we=me(3619);const Ee={schedule(Le){let ne=requestAnimationFrame,ze=cancelAnimationFrame;const{delegate:Ae}=Ee;Ae&&(ne=Ae.requestAnimationFrame,ze=Ae.cancelAnimationFrame);const $e=ne(It=>{ze=void 0,Le(It)});return new we.w0(()=>ze?.($e))},requestAnimationFrame(...Le){const{delegate:ne}=Ee;return(ne?.requestAnimationFrame||requestAnimationFrame)(...Le)},cancelAnimationFrame(...Le){const{delegate:ne}=Ee;return(ne?.cancelAnimationFrame||cancelAnimationFrame)(...Le)},delegate:void 0};var $=me(5324);const mt=new class pt extends $.v{flush(ne){this._active=!0;const ze=this._scheduled;this._scheduled=void 0;const{actions:Ae}=this;let $e;ne=ne||Ae.shift();do{if($e=ne.execute(ne.state,ne.delay))break}while((ne=Ae[0])&&ne.id===ze&&Ae.shift());if(this._active=!1,$e){for(;(ne=Ae[0])&&ne.id===ze&&Ae.shift();)ne.unsubscribe();throw $e}}}(class b extends L.o{constructor(ne,ze){super(ne,ze),this.scheduler=ne,this.work=ze}requestAsyncId(ne,ze,Ae=0){return null!==Ae&&Ae>0?super.requestAsyncId(ne,ze,Ae):(ne.actions.push(this),ne._scheduled||(ne._scheduled=Ee.requestAnimationFrame(()=>ne.flush(void 0))))}recycleAsyncId(ne,ze,Ae=0){if(null!=Ae&&Ae>0||null==Ae&&this.delay>0)return super.recycleAsyncId(ne,ze,Ae);ne.actions.some($e=>$e.id===ze)||(Ee.cancelAnimationFrame(ze),ne._scheduled=void 0)}})},7451:(ur,ft,me)=>{me.d(ft,{eR:()=>$e,pB:()=>mt});var L=me(8368),we=me(9709),Ee=me(969);const b=["*"];let mt=(()=>{class Te extends L.fc{set left(ue){this.set({left:(0,L.su)(ue)})}set right(ue){this.set({right:(0,L.su)(ue)})}set top(ue){this.set({top:(0,L.su)(ue)})}set bottom(ue){this.set({bottom:(0,L.su)(ue)})}set near(ue){this.set({near:(0,L.su)(ue)})}set far(ue){this.set({far:(0,L.su)(ue)})}get cameraType(){return Ee.iKG}get optionFields(){return{...super.optionFields,left:!0,right:!0,top:!0,bottom:!0,near:!0,far:!0}}}return Te.\u0275fac=function(){let Se;return function(Ue){return(Se||(Se=we.n5z(Te)))(Ue||Te)}}(),Te.\u0275cmp=we.Xpm({type:Te,selectors:[["ngt-orthographic-camera"]],inputs:{left:"left",right:"right",top:"top",bottom:"bottom",near:"near",far:"far"},standalone:!0,features:[we._Bn([(0,L.hS)(Te),(0,L.dF)(Te)]),we.qOj,we.jDz],ngContentSelectors:b,decls:1,vars:0,template:function(ue,Ue){1&ue&&(we.F$t(),we.Hsn(0))},encapsulation:2,changeDetection:0}),Te})(),$e=(()=>{class Te extends L.Jy{set args(ue){this.set({instanceArgs:ue})}set near(ue){this.set({near:(0,L.su)(ue)})}set far(ue){this.set({far:(0,L.su)(ue)})}set renderTarget(ue){this.set({renderTarget:ue})}objectInitFn(){const ue=this.get(Ue=>Ue.instanceArgs);return new Ee._am(...ue)}get preObjectInit(){return ue=>{const Ue=this.get(Or=>Or.instanceArgs);Ue&&Ue.length&&this.set({near:Ue[0],far:Ue[1],renderTarget:Ue[2]}),this.effect((0,L.oe)(()=>{ue()}))(this.instanceArgs$)}}get optionFields(){return{...super.optionFields,near:!1,far:!1,renderTarget:!1}}}return Te.\u0275fac=function(){let Se;return function(Ue){return(Se||(Se=we.n5z(Te)))(Ue||Te)}}(),Te.\u0275cmp=we.Xpm({type:Te,selectors:[["ngt-cube-camera"]],inputs:{args:"args",near:"near",far:"far",renderTarget:"renderTarget"},standalone:!0,features:[we._Bn([(0,L.RD)(Te),(0,L.wY)(Te)]),we.qOj,we.jDz],ngContentSelectors:b,decls:1,vars:0,template:function(ue,Ue){1&ue&&(we.F$t(),we.Hsn(0))},encapsulation:2,changeDetection:0}),Te})()},1822:(ur,ft,me)=>{me.d(ft,{U:()=>pt});var L=me(8368),we=me(9709),Ee=me(6706);const b=["object",""],$=["*"];let pt=(()=>{class Ye extends L.Jy{constructor(){super(...arguments),this.object$=this.select(ne=>ne.object).pipe((0,Ee.h)(ne=>null!=ne)),this.isPrimitive=!0}set object(ne){L.is.ref(ne)?(this.ref=ne,this.set({object:ne.value})):this.set({object:ne})}get object(){return this.get(ne=>ne.object)}objectInitFn(){return this.object}get preObjectInit(){return ne=>{this.effect((0,L.oe)(()=>{ne()}))(this.object$)}}}return Ye.\u0275fac=function(){let Le;return function(ze){return(Le||(Le=we.n5z(Ye)))(ze||Ye)}}(),Ye.\u0275cmp=we.Xpm({type:Ye,selectors:[["ngt-primitive","object",""]],inputs:{object:"object"},standalone:!0,features:[we._Bn([(0,L.RD)(Ye),(0,L.wY)(Ye)]),we.qOj,we.jDz],attrs:b,ngContentSelectors:$,decls:1,vars:0,template:function(ne,ze){1&ne&&(we.F$t(),we.Hsn(0))},encapsulation:2,changeDetection:0}),Ye})()},9361:(ur,ft,me)=>{me.d(ft,{xy:()=>go,EE:()=>lo,OS:()=>hi,vw:()=>pi});var L=me(8368),we=me(2877),Ee=me(5688),b=me(9709),$=me(969),pt=me(1822),mt=me(8875),Ye=me(2435),Le=me(8926),ne=me(6706),ze=me(4590),Ae=me(1609),$e=me(4216),It=me(7152),Te=me(3545),Se=me(7451);const ue=["*"];let Ue=(()=>{class c extends Se.pB{constructor(){super(...arguments),this.setDefaultCamera=this.effect((0,L.oe)(()=>{const r=this.store.get(e=>e.camera),u=this.store.get(e=>e.cameraRef),t=this.get(e=>e.makeDefault);if(this.instance.value&&t){const e=r;return this.store.set({camera:this.instance.value}),u.set(this.instance.value),()=>{this.store.set({camera:e}),u.set(e)}}}))}set makeDefault(r){this.set({makeDefault:(0,L.Ig)(r)})}set manual(r){this.set({manual:(0,L.Ig)(r)})}get preObjectInit(){return r=>{const u=this.store.get(t=>t.size);this.set(t=>({left:u.width/-2,right:u.width/2,top:u.height/2,bottom:u.height/-2,near:t.near,far:t.far})),r()}}get setOptionsTrigger$(){return this.select(r=>r.manual).pipe((0,L.Xb)())}postSetOptions(r){this.get(t=>t.manual)||r.updateProjectionMatrix()}ngOnInit(){super.ngOnInit(),this.zone.runOutsideAngular(()=>{this.store.onReady(()=>{this.setDefaultCamera(this.select(this.instance$,this.select(r=>r.makeDefault)))})})}}return c.\u0275fac=function(){let o;return function(u){return(o||(o=b.n5z(c)))(u||c)}}(),c.\u0275cmp=b.Xpm({type:c,selectors:[["ngt-soba-orthographic-camera"]],inputs:{makeDefault:"makeDefault",manual:"manual"},standalone:!0,features:[b._Bn([(0,L.hS)(c),(0,L.dF)(c)]),b.qOj,b.jDz],ngContentSelectors:ue,decls:1,vars:0,template:function(r,u){1&r&&(b.F$t(),b.Hsn(0))},encapsulation:2,changeDetection:0}),c})();var Lr=me(8786),Er=me(693),Rr=me(3749);function fr(){var r,c=0,o=[],u=0,t=0,s=h(function(m){t||n(1,m)}),i=h(function(m){t||n(-1,m)});function n(m,g){t++;var y=0;try{g===S&&C();var p=m>0&&d(g);p?p.call(g,h(function(_){y++,n(1,_)}),h(function(_){y++,n(-1,_)})):(c=m,r=g,a())}catch(_){!c&&!y&&n(-1,_)}}function a(){u||(setTimeout(l,0),u=1)}function l(){var m=o;u=0,o=[],m.forEach(f)}function f(m){m()}function d(m){var g=m&&(x(m)||"object"==typeof m)&&m.then;return x(g)&&g}function h(m){var g=0;return function(){for(var y=[],p=arguments.length;p--;)y[p]=arguments[p];g++||m.apply(this,y)}}function C(){throw new TypeError("Chaining cycle detected")}var x=function(m){return"function"==typeof m},S={then:function e(m,g){var y=fr();return o.push(function p(){var _=c>0?m:g;if(x(_))try{var T=_(r);T===y&&C();var k=d(T);k?k.call(T,y.resolve,y.reject):y.resolve(T)}catch(M){y.reject(M)}else y[c>0?"resolve":"reject"](r)}),c&&a(),y},resolve:s,reject:i};return S}function Ir(){var c,o,r=new Promise(function(u,t){c=u,o=t});return{then:r.then.bind(r),resolve:c,reject:o}}fr.all=Ir.all=function(c){var o=0,r=[],u=it();return 0===c.length?u.resolve([]):c.forEach(function(t,e){var s=it();s.resolve(t),s.then(function(i){o++,r[e]=i,o===c.length&&u.resolve(r)},u.reject)}),u};var it="function"==typeof Promise?Ir:fr;function Lo(){var c=Object.create(null);function o(t,e){var s=t.id,i=t.name,n=t.dependencies;void 0===n&&(n=[]);var a=t.init;void 0===a&&(a=function(){});var l=t.getTransferables;if(void 0===l&&(l=null),!c[s])try{n=n.map(function(d){return d&&d.isWorkerModule&&(o(d,function(h){if(h instanceof Error)throw h}),d=c[d.id].value),d}),a=u("<"+i+">.init",a),l&&(l=u("<"+i+">.getTransferables",l));var f=null;"function"==typeof a?f=a.apply(void 0,n):console.error("worker module init function failed to rehydrate"),c[s]={id:s,value:f,getTransferables:l},e(f)}catch(d){d&&d.noLog||console.error(d),e(d)}}function u(t,e){var s=void 0;self.troikaDefine=function(n){return s=n};var i=URL.createObjectURL(new Blob(["/** "+t.replace(/\*/g,"")+" **/\n\ntroikaDefine(\n"+e+"\n)"],{type:"application/javascript"}));try{importScripts(i)}catch(n){console.error(n)}return URL.revokeObjectURL(i),delete self.troikaDefine,s}self.addEventListener("message",function(t){var e=t.data,s=e.messageId,i=e.action,n=e.data;try{"registerModule"===i&&o(n,function(a){a instanceof Error?postMessage({messageId:s,success:!1,error:a.message}):postMessage({messageId:s,success:!0,result:{isCallable:"function"==typeof a}})}),"callModule"===i&&function r(t,e){var s,i=t.id,n=t.args;(!c[i]||"function"!=typeof c[i].value)&&e(new Error("Worker module "+i+": not found or its 'init' did not return a function"));try{var a=(s=c[i]).value.apply(s,n);a&&"function"==typeof a.then?a.then(l,function(f){return e(f instanceof Error?f:new Error(""+f))}):l(a)}catch(f){e(f)}function l(f){try{var d=c[i].getTransferables&&c[i].getTransferables(f);(!d||!Array.isArray(d)||!d.length)&&(d=void 0),e(f,d)}catch(h){console.error(h),e(h)}}}(n,function(a,l){a instanceof Error?postMessage({messageId:s,success:!1,error:a.message}):postMessage({messageId:s,success:!0,result:a},l||void 0)})}catch(a){postMessage({messageId:s,success:!1,error:a.stack})}})}var Vr=function(){var c=!1;if(typeof window<"u"&&typeof window.document<"u")try{new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"}))).terminate(),c=!0}catch(r){console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+r.message+"]")}return Vr=function(){return c},c},Ro=0,Io=0,dr=!1,Tt=Object.create(null),Mt=Object.create(null),hr=Object.create(null);function vt(c){if(!(c&&"function"==typeof c.init||dr))throw new Error("requires `options.init` function");var o=c.dependencies,r=c.init,u=c.getTransferables,t=c.workerId;if(!Vr())return function Eo(c){var o=function(){for(var r=[],u=arguments.length;u--;)r[u]=arguments[u];return o._getInitResult().then(function(t){if("function"==typeof t)return t.apply(void 0,r);throw new Error("Worker module function was called but `init` did not return a callable function")})};return o._getInitResult=function(){var r=c.dependencies,u=c.init;r=Array.isArray(r)?r.map(function(e){return e&&e._getInitResult?e._getInitResult():e}):[];var t=it.all(r).then(function(e){return u.apply(null,e)});return o._getInitResult=function(){return t},t},o}(c);null==t&&(t="#default");var e="workerModule"+ ++Ro,s=c.name||e,i=null;function n(){for(var a=[],l=arguments.length;l--;)a[l]=arguments[l];if(!i){i=jr(t,"registerModule",n.workerModuleData);var f=function(){i=null,Mt[t].delete(f)};(Mt[t]||(Mt[t]=new Set)).add(f)}return i.then(function(d){if(d.isCallable)return jr(t,"callModule",{id:e,args:a});throw new Error("Worker module function was called but `init` did not return a callable function")})}return o=o&&o.map(function(a){return"function"==typeof a&&!a.workerModuleData&&(dr=!0,a=vt({workerId:t,name:"<"+s+"> function dependency: "+a.name,init:"function(){return (\n"+Vt(a)+"\n)}"}),dr=!1),a&&a.workerModuleData&&(a=a.workerModuleData),a}),n.workerModuleData={isWorkerModule:!0,id:e,name:s,dependencies:o,init:Vt(r),getTransferables:u&&Vt(u)},n}function Vt(c){var o=c.toString();return!/^function/.test(o)&&/^\w+\s*\(/.test(o)&&(o="function "+o),o}function jr(c,o,r){var u=it(),t=++Io;return hr[t]=function(e){e.success?u.resolve(e.result):u.reject(new Error("Error in worker "+o+" call: "+e.error))},function jo(c){var o=Tt[c];if(!o){var r=Vt(Lo);(o=Tt[c]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+c.replace(/\*/g,"")+" **/\n\n;("+r+")()"],{type:"application/javascript"})))).onmessage=function(u){var t=u.data,e=t.messageId,s=hr[e];if(!s)throw new Error("WorkerModule response with empty or unknown messageId");delete hr[e],s(t)}}return o}(c).postMessage({messageId:t,action:o,data:r}),u}var Wo=vt({name:"Thenable",dependencies:[it],init:function(c){return c}});function Wr(){var c=function(o){function r(B,I,v,F,E,O,P,R){var w=1-P;R.x=w*w*B+2*w*P*v+P*P*E,R.y=w*w*I+2*w*P*F+P*P*O}function u(B,I,v,F,E,O,P,R,w,A){var H=1-w;A.x=H*H*H*B+3*H*H*w*v+3*H*w*w*E+w*w*w*P,A.y=H*H*H*I+3*H*H*w*F+3*H*w*w*O+w*w*w*R}function t(B,I){for(var F,E,O,P,R,v=/([MLQCZ])([^MLQCZ]*)/g;F=v.exec(B);){var w=F[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map(function(A){return parseFloat(A)});switch(F[1]){case"M":P=E=w[0],R=O=w[1];break;case"L":(w[0]!==P||w[1]!==R)&&I("L",P,R,P=w[0],R=w[1]);break;case"Q":I("Q",P,R,P=w[2],R=w[3],w[0],w[1]);break;case"C":I("C",P,R,P=w[4],R=w[5],w[0],w[1],w[2],w[3]);break;case"Z":(P!==E||R!==O)&&I("L",P,R,E,O)}}}function e(B,I,v){void 0===v&&(v=16);var F={x:0,y:0};t(B,function(E,O,P,R,w,A,H,le,X){switch(E){case"L":I(O,P,R,w);break;case"Q":for(var V=O,_e=P,pe=1;pe<v;pe++)r(O,P,A,H,R,w,pe/(v-1),F),I(V,_e,F.x,F.y),V=F.x,_e=F.y;break;case"C":for(var te=O,ae=P,ge=1;ge<v;ge++)u(O,P,A,H,le,X,R,w,ge/(v-1),F),I(te,ae,F.x,F.y),te=F.x,ae=F.y}})}var s="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",n=new WeakMap,a={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function l(B,I){var v=B.getContext?B.getContext("webgl",a):B,F=n.get(v);if(!F){let H=function(te){var ae=O[te];if(!ae&&!(ae=O[te]=v.getExtension(te)))throw new Error(te+" not supported");return ae},le=function(te,ae){var ge=v.createShader(ae);return v.shaderSource(ge,te),v.compileShader(ge),ge},X=function(te,ae,ge,G){if(!P[te]){var ie={},Z={},U=v.createProgram();v.attachShader(U,le(ae,v.VERTEX_SHADER)),v.attachShader(U,le(ge,v.FRAGMENT_SHADER)),v.linkProgram(U),P[te]={program:U,transaction:function(K){v.useProgram(U),K({setUniform:function(Y,ve){for(var ye=[],Q=arguments.length-2;Q-- >0;)ye[Q]=arguments[Q+2];var de=Z[ve]||(Z[ve]=v.getUniformLocation(U,ve));v["uniform"+Y].apply(v,[de].concat(ye))},setAttribute:function(Y,ve,ye,Q,de){var xe=ie[Y];xe||(xe=ie[Y]={buf:v.createBuffer(),loc:v.getAttribLocation(U,Y),data:null}),v.bindBuffer(v.ARRAY_BUFFER,xe.buf),v.vertexAttribPointer(xe.loc,ve,v.FLOAT,!1,0,0),v.enableVertexAttribArray(xe.loc),E?v.vertexAttribDivisor(xe.loc,Q):H("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(xe.loc,Q),de!==xe.data&&(v.bufferData(v.ARRAY_BUFFER,de,ye),xe.data=de)}})}}}P[te].transaction(G)},V=function(te,ae){w++;try{v.activeTexture(v.TEXTURE0+w);var ge=R[te];ge||(ge=R[te]=v.createTexture(),v.bindTexture(v.TEXTURE_2D,ge),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MIN_FILTER,v.NEAREST),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MAG_FILTER,v.NEAREST)),v.bindTexture(v.TEXTURE_2D,ge),ae(ge,w)}finally{w--}},_e=function(te,ae,ge){var G=v.createFramebuffer();A.push(G),v.bindFramebuffer(v.FRAMEBUFFER,G),v.activeTexture(v.TEXTURE0+ae),v.bindTexture(v.TEXTURE_2D,te),v.framebufferTexture2D(v.FRAMEBUFFER,v.COLOR_ATTACHMENT0,v.TEXTURE_2D,te,0);try{ge(G)}finally{v.deleteFramebuffer(G),v.bindFramebuffer(v.FRAMEBUFFER,A[--A.length-1]||null)}},pe=function(){O={},P={},R={},w=-1,A.length=0};var E=typeof WebGL2RenderingContext<"u"&&v instanceof WebGL2RenderingContext,O={},P={},R={},w=-1,A=[];v.canvas.addEventListener("webglcontextlost",function(te){pe(),te.preventDefault()},!1),n.set(v,F={gl:v,isWebGL2:E,getExtension:H,withProgram:X,withTexture:V,withTextureFramebuffer:_e,handleContextLoss:pe})}I(F)}function f(B,I,v,F,E,O,P,R){void 0===P&&(P=15),void 0===R&&(R=null),l(B,function(w){var A=w.gl,H=w.withProgram;(0,w.withTexture)("copy",function(X,V){A.texImage2D(A.TEXTURE_2D,0,A.RGBA,E,O,0,A.RGBA,A.UNSIGNED_BYTE,I),H("copy",s,"precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",function(_e){var pe=_e.setUniform;(0,_e.setAttribute)("aUV",2,A.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),pe("1i","image",V),A.bindFramebuffer(A.FRAMEBUFFER,R||null),A.disable(A.BLEND),A.colorMask(8&P,4&P,2&P,1&P),A.viewport(v,F,E,O),A.scissor(v,F,E,O),A.drawArrays(A.TRIANGLES,0,3)})})})}var h=Object.freeze({__proto__:null,withWebGLContext:l,renderImageData:f,resizeWebGLCanvasWithoutClearing:function d(B,I,v){var F=B.width,E=B.height;l(B,function(O){var P=O.gl,R=new Uint8Array(F*E*4);P.readPixels(0,0,F,E,P.RGBA,P.UNSIGNED_BYTE,R),B.width=I,B.height=v,f(P,R,0,0,F,E)})}});function C(B,I,v,F,E,O){void 0===O&&(O=1);var P=new Uint8Array(B*I),R=F[2]-F[0],w=F[3]-F[1],A=[];e(v,function(te,ae,ge,G){A.push({x1:te,y1:ae,x2:ge,y2:G,minX:Math.min(te,ge),minY:Math.min(ae,G),maxX:Math.max(te,ge),maxY:Math.max(ae,G)})}),A.sort(function(te,ae){return te.maxX-ae.maxX});for(var H=0;H<B;H++)for(var le=0;le<I;le++){var X=_e(F[0]+R*(H+.5)/B,F[1]+w*(le+.5)/I),V=Math.pow(1-Math.abs(X)/E,O)/2;X<0&&(V=1-V),V=Math.max(0,Math.min(255,Math.round(255*V))),P[le*B+H]=V}return P;function _e(te,ae){for(var ge=1/0,G=1/0,ie=A.length;ie--;){var Z=A[ie];if(Z.maxX+G<=te)break;if(te+G>Z.minX&&ae-G<Z.maxY&&ae+G>Z.minY){var U=m(te,ae,Z.x1,Z.y1,Z.x2,Z.y2);U<ge&&(ge=U,G=Math.sqrt(ge))}}return function pe(te,ae){for(var ge=0,G=A.length;G--;){var ie=A[G];if(ie.maxX<=te)break;ie.y1>ae!=ie.y2>ae&&te<(ie.x2-ie.x1)*(ae-ie.y1)/(ie.y2-ie.y1)+ie.x1&&(ge+=ie.y1<ie.y2?1:-1)}return 0!==ge}(te,ae)&&(G=-G),G}}function x(B,I,v,F,E,O,P,R,w,A){void 0===O&&(O=1),void 0===R&&(R=0),void 0===w&&(w=0),void 0===A&&(A=0),S(B,I,v,F,E,O,P,null,R,w,A)}function S(B,I,v,F,E,O,P,R,w,A,H){void 0===O&&(O=1),void 0===w&&(w=0),void 0===A&&(A=0),void 0===H&&(H=0);for(var le=C(B,I,v,F,E,O),X=new Uint8Array(4*le.length),V=0;V<le.length;V++)X[4*V+H]=le[V];f(P,X,w,A,B,I,1<<3-H,R)}function m(B,I,v,F,E,O){var P=E-v,R=O-F,w=P*P+R*R,A=w?Math.max(0,Math.min(1,((B-v)*P+(I-F)*R)/w)):0,H=B-(v+A*P),le=I-(F+A*R);return H*H+le*le}var g=Object.freeze({__proto__:null,generate:C,generateIntoCanvas:x,generateIntoFramebuffer:S}),T=new Float32Array([0,0,2,0,0,2]),k=null,M=!1,j={},ee=new WeakMap;function J(B){if(!M&&!q(B))throw new Error("WebGL generation not supported")}function N(B,I,v,F,E,O,P){if(void 0===O&&(O=1),void 0===P&&(P=null),!P&&!(P=k)){var R="function"==typeof OffscreenCanvas?new OffscreenCanvas(1,1):typeof document<"u"?document.createElement("canvas"):null;if(!R)throw new Error("OffscreenCanvas or DOM canvas not supported");P=k=R.getContext("webgl",{depth:!1})}J(P);var w=new Uint8Array(B*I*4);l(P,function(X){var V=X.gl,pe=X.withTextureFramebuffer;(0,X.withTexture)("readable",function(te,ae){V.texImage2D(V.TEXTURE_2D,0,V.RGBA,B,I,0,V.RGBA,V.UNSIGNED_BYTE,null),pe(te,ae,function(ge){D(B,I,v,F,E,O,V,ge,0,0,0),V.readPixels(0,0,B,I,V.RGBA,V.UNSIGNED_BYTE,w)})})});for(var A=new Uint8Array(B*I),H=0,le=0;H<w.length;H+=4)A[le++]=w[H];return A}function z(B,I,v,F,E,O,P,R,w,A){void 0===O&&(O=1),void 0===R&&(R=0),void 0===w&&(w=0),void 0===A&&(A=0),D(B,I,v,F,E,O,P,null,R,w,A)}function D(B,I,v,F,E,O,P,R,w,A,H){void 0===O&&(O=1),void 0===w&&(w=0),void 0===A&&(A=0),void 0===H&&(H=0),J(P);var le=[];e(v,function(X,V,_e,pe){le.push(X,V,_e,pe)}),le=new Float32Array(le),l(P,function(X){var V=X.gl,_e=X.isWebGL2,pe=X.getExtension,te=X.withProgram,ge=X.withTextureFramebuffer,G=X.handleContextLoss;if((0,X.withTexture)("rawDistances",function(ie,Z){(B!==ie._lastWidth||I!==ie._lastHeight)&&V.texImage2D(V.TEXTURE_2D,0,V.RGBA,ie._lastWidth=B,ie._lastHeight=I,0,V.RGBA,V.UNSIGNED_BYTE,null),te("main","precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}","precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",function(U){var be=U.setAttribute,K=U.setUniform,re=!_e&&pe("ANGLE_instanced_arrays"),Y=!_e&&pe("EXT_blend_minmax");be("aUV",2,V.STATIC_DRAW,0,T),be("aLineSegment",4,V.DYNAMIC_DRAW,1,le),K.apply(void 0,["4f","uGlyphBounds"].concat(F)),K("1f","uMaxDistance",E),K("1f","uExponent",O),ge(ie,Z,function(ve){V.enable(V.BLEND),V.colorMask(!0,!0,!0,!0),V.viewport(0,0,B,I),V.scissor(0,0,B,I),V.blendFunc(V.ONE,V.ONE),V.blendEquationSeparate(V.FUNC_ADD,_e?V.MAX:Y.MAX_EXT),V.clear(V.COLOR_BUFFER_BIT),_e?V.drawArraysInstanced(V.TRIANGLES,0,3,le.length/4):re.drawArraysInstancedANGLE(V.TRIANGLES,0,3,le.length/4)})}),te("post",s,"precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",function(U){U.setAttribute("aUV",2,V.STATIC_DRAW,0,T),U.setUniform("1i","tex",Z),V.bindFramebuffer(V.FRAMEBUFFER,R),V.disable(V.BLEND),V.colorMask(0===H,1===H,2===H,3===H),V.viewport(w,A,B,I),V.scissor(w,A,B,I),V.drawArrays(V.TRIANGLES,0,3)})}),V.isContextLost())throw G(),new Error("webgl context lost")})}function q(B){var I=B&&B!==k?B.canvas||B:j,v=ee.get(I);if(void 0===v){M=!0;var F=null;try{var E=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],O=N(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,B);(v=O&&E.length===O.length&&O.every(function(P,R){return P===E[R]}))||(F="bad trial run results",console.info(E,O))}catch(P){v=!1,F=P.message}F&&console.warn("WebGL SDF generation not supported:",F),M=!1,ee.set(I,v)}return v}var W=Object.freeze({__proto__:null,generate:N,generateIntoCanvas:z,generateIntoFramebuffer:D,isSupported:q});return o.forEachPathCommand=t,o.generate=function ce(B,I,v,F,E,O){void 0===E&&(E=Math.max(F[2]-F[0],F[3]-F[1])/2),void 0===O&&(O=1);try{return N.apply(W,arguments)}catch(P){return console.info("WebGL SDF generation failed, falling back to JS",P),C.apply(g,arguments)}},o.generateIntoCanvas=function fe(B,I,v,F,E,O,P,R,w,A){void 0===E&&(E=Math.max(F[2]-F[0],F[3]-F[1])/2),void 0===O&&(O=1),void 0===R&&(R=0),void 0===w&&(w=0),void 0===A&&(A=0);try{return z.apply(W,arguments)}catch(H){return console.info("WebGL SDF generation failed, falling back to JS",H),x.apply(g,arguments)}},o.javascript=g,o.pathToLineSegments=e,o.webgl=W,o.webglUtils=h,Object.defineProperty(o,"__esModule",{value:!0}),o}({});return c}const Hr=/\bvoid\s+main\s*\(\s*\)\s*{/g;function gr(c){return c.replace(/^[ \t]*#include +<([\w\d./]+)>/gm,function r(u,t){let e=$.WdD[t];return e?gr(e):u})}const Ie=[];for(let c=0;c<256;c++)Ie[c]=(c<16?"0":"")+c.toString(16);const dt=Object.assign||function(){let c=arguments[0];for(let o=1,r=arguments.length;o<r;o++){let u=arguments[o];if(u)for(let t in u)u.hasOwnProperty(t)&&(c[t]=u[t])}return c},Yo=Date.now(),Xr=new WeakMap,Qr=new Map;let Jo=1e10;function jt(c,o){const r=function $o(c){const o=JSON.stringify(c,Ko);let r=Jr.get(o);return null==r&&Jr.set(o,r=++qo),r}(o);let u=Xr.get(c);if(u||Xr.set(c,u=Object.create(null)),u[r])return new u[r];const t=`_onBeforeCompile${r}`,e=function(a){c.onBeforeCompile.call(this,a);const l=this.customProgramCacheKey()+"|"+a.vertexShader+"|"+a.fragmentShader;let f=Qr[l];if(!f){const d=function Zo({vertexShader:c,fragmentShader:o},r,u){let{vertexDefs:t,vertexMainIntro:e,vertexMainOutro:s,vertexTransform:i,fragmentDefs:n,fragmentMainIntro:a,fragmentMainOutro:l,fragmentColorTransform:f,customRewriter:d,timeUniform:h}=r;if(t=t||"",e=e||"",s=s||"",n=n||"",a=a||"",l=l||"",(i||d)&&(c=gr(c)),(f||d)&&(o=gr(o=o.replace(/^[ \t]*#include <((?:tonemapping|encodings|fog|premultiplied_alpha|dithering)_fragment)>/gm,"\n//!BEGIN_POST_CHUNK $1\n$&\n//!END_POST_CHUNK\n"))),d){let C=d({vertexShader:c,fragmentShader:o});c=C.vertexShader,o=C.fragmentShader}if(f){let C=[];o=o.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,x=>(C.push(x),"")),l=`${f}\n${C.join("\n")}\n${l}`}if(h){const C=`\nuniform float ${h};\n`;t=C+t,n=C+n}return i&&(t=`${t}\nvoid troikaVertexTransform${u}(inout vec3 position, inout vec3 normal, inout vec2 uv) {\n  ${i}\n}\n`,e=`\ntroika_position_${u} = vec3(position);\ntroika_normal_${u} = vec3(normal);\ntroika_uv_${u} = vec2(uv);\ntroikaVertexTransform${u}(troika_position_${u}, troika_normal_${u}, troika_uv_${u});\n${e}\n`,c=(c=`vec3 troika_position_${u};\nvec3 troika_normal_${u};\nvec2 troika_uv_${u};\n${c}\n`).replace(/\b(position|normal|uv)\b/g,(C,x,S,m)=>/\battribute\s+vec[23]\s+$/.test(m.substr(0,S))?x:`troika_${x}_${u}`)),{vertexShader:c=Yr(c,u,t,e,s),fragmentShader:o=Yr(o,u,n,a,l)}}(a,o,r);f=Qr[l]=d}a.vertexShader=f.vertexShader,a.fragmentShader=f.fragmentShader,dt(a.uniforms,this.uniforms),o.timeUniform&&(a.uniforms[o.timeUniform]={get value(){return Date.now()-Yo}}),this[t]&&this[t](a)},s=function(){return i(o.chained?c:c.clone())},i=function(a){const l=Object.create(a,n);return Object.defineProperty(l,"baseMaterial",{value:c}),Object.defineProperty(l,"id",{value:Jo++}),l.uuid=function Qo(){const c=4294967295*Math.random()|0,o=4294967295*Math.random()|0,r=4294967295*Math.random()|0,u=4294967295*Math.random()|0;return(Ie[255&c]+Ie[c>>8&255]+Ie[c>>16&255]+Ie[c>>24&255]+"-"+Ie[255&o]+Ie[o>>8&255]+"-"+Ie[o>>16&15|64]+Ie[o>>24&255]+"-"+Ie[63&r|128]+Ie[r>>8&255]+"-"+Ie[r>>16&255]+Ie[r>>24&255]+Ie[255&u]+Ie[u>>8&255]+Ie[u>>16&255]+Ie[u>>24&255]).toUpperCase()}(),l.uniforms=dt({},a.uniforms,o.uniforms),l.defines=dt({},a.defines,o.defines),l.defines[`TROIKA_DERIVED_MATERIAL_${r}`]="",l.extensions=dt({},a.extensions,o.extensions),l._listeners=void 0,l},n={constructor:{value:s},isDerivedMaterial:{value:!0},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return c.customProgramCacheKey()+"|"+r}},onBeforeCompile:{get:()=>e,set(a){this[t]=a}},copy:{writable:!0,configurable:!0,value:function(a){return c.copy.call(this,a),!c.isShaderMaterial&&!c.isDerivedMaterial&&(dt(this.extensions,a.extensions),dt(this.defines,a.defines),dt(this.uniforms,$.rDY.clone(a.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const a=new c.constructor;return i(a).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let a=this._depthMaterial;return a||(a=this._depthMaterial=jt(c.isDerivedMaterial?c.getDepthMaterial():new $.lRF({depthPacking:$.mSO}),o),a.defines.IS_DEPTH_MATERIAL="",a.uniforms=this.uniforms),a}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let a=this._distanceMaterial;return a||(a=this._distanceMaterial=jt(c.isDerivedMaterial?c.getDistanceMaterial():new $.Lun,o),a.defines.IS_DISTANCE_MATERIAL="",a.uniforms=this.uniforms),a}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:a,_distanceMaterial:l}=this;a&&a.dispose(),l&&l.dispose(),c.dispose.call(this)}}};return u[r]=s,new s}function Yr(c,o,r,u,t){return(u||t||r)&&(c=c.replace(Hr,`\n${r}\nvoid troikaOrigMain${o}() {`),c+=`\nvoid main() {\n  ${u}\n  troikaOrigMain${o}();\n  ${t}\n}`),c}function Ko(c,o){return"uniforms"===c?void 0:"function"==typeof o?o.toString():o}let qo=0;const Jr=new Map,ht=()=>(self.performance||Date).now(),Wt=Wr();let $r;const cn=function(){const c=[];let r=0;function u(){const t=ht();for(;c.length&&ht()-t<5;)c.shift()();r=c.length?setTimeout(u,0):0}return(...t)=>{const e=it();return c.push(()=>{const s=ht();try{Wt.webgl.generateIntoCanvas(...t),e.resolve({timing:ht()-s})}catch(i){e.reject(i)}}),r||(r=setTimeout(u,0)),e}}(),eo=function(){const r={};let u=0;return function(t,e,s,i,n,a,l,f,d,h){const C="TroikaTextSDFGenerator_JS_"+u++%4;let x=r[C];return x||(x=r[C]={workerModule:vt({name:C,workerId:C,dependencies:[Wr,ht],init(S,m){const g=S().javascript.generate;return function(...y){const p=m();return{textureData:g(...y),timing:m()-p}}},getTransferables:S=>[S.textureData.buffer]}),requests:0,idleTimer:null}),x.requests++,clearTimeout(x.idleTimer),x.workerModule(t,e,s,i,n,a).then(({textureData:S,timing:m})=>{const g=ht(),y=new Uint8Array(4*S.length);for(let p=0;p<S.length;p++)y[4*p+h]=S[p];return Wt.webglUtils.renderImageData(l,y,f,d,t,e,1<<3-h),m+=ht()-g,0==--x.requests&&(x.idleTimer=setTimeout(()=>{!function Vo(c){Mt[c]&&Mt[c].forEach(function(o){o()}),Tt[c]&&(Tt[c].terminate(),delete Tt[c])}(C)},2e3)),{timing:m}})}}(),fn=Wt.webglUtils.resizeWebGLCanvasWithoutClearing,pn=vt({name:"Typr Font Parser",dependencies:[function dn(){return typeof window>"u"&&(self.window=self),function(c){var o={parse:function(t){var e=o._bin,s=new Uint8Array(t);if("ttcf"==e.readASCII(s,0,4)){var i=4;e.readUshort(s,i),e.readUshort(s,i+=2);var n=e.readUint(s,i+=2);i+=4;for(var a=[],l=0;l<n;l++){var f=e.readUint(s,i);i+=4,a.push(o._readFont(s,f))}return a}return[o._readFont(s,0)]},_readFont:function(t,e){var s=o._bin,i=e;s.readFixed(t,e);var n=s.readUshort(t,e+=4);s.readUshort(t,e+=2),s.readUshort(t,e+=2),s.readUshort(t,e+=2),e+=2;for(var a=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GPOS","GSUB","SVG "],l={_data:t,_offset:i},f={},d=0;d<n;d++){var h=s.readASCII(t,e,4);s.readUint(t,e+=4);var C=s.readUint(t,e+=4),x=s.readUint(t,e+=4);e+=4,f[h]={offset:C,length:x}}for(d=0;d<a.length;d++){var S=a[d];f[S]&&(l[S.trim()]=o[S.trim()].parse(t,f[S].offset,f[S].length,l))}return l},_tabOffset:function(t,e,s){for(var i=o._bin,n=i.readUshort(t,s+4),a=s+12,l=0;l<n;l++){var f=i.readASCII(t,a,4);i.readUint(t,a+=4);var d=i.readUint(t,a+=4);if(i.readUint(t,a+=4),a+=4,f==e)return d}return 0}};o._bin={readFixed:function(t,e){return(t[e]<<8|t[e+1])+(t[e+2]<<8|t[e+3])/65540},readF2dot14:function(t,e){return o._bin.readShort(t,e)/16384},readInt:function(t,e){return o._bin._view(t).getInt32(e)},readInt8:function(t,e){return o._bin._view(t).getInt8(e)},readShort:function(t,e){return o._bin._view(t).getInt16(e)},readUshort:function(t,e){return o._bin._view(t).getUint16(e)},readUshorts:function(t,e,s){for(var i=[],n=0;n<s;n++)i.push(o._bin.readUshort(t,e+2*n));return i},readUint:function(t,e){return o._bin._view(t).getUint32(e)},readUint64:function(t,e){return 4294967296*o._bin.readUint(t,e)+o._bin.readUint(t,e+4)},readASCII:function(t,e,s){for(var i="",n=0;n<s;n++)i+=String.fromCharCode(t[e+n]);return i},readUnicode:function(t,e,s){for(var i="",n=0;n<s;n++){var a=t[e++]<<8|t[e++];i+=String.fromCharCode(a)}return i},_tdec:typeof window<"u"&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(t,e,s){var i=o._bin._tdec;return i&&0==e&&s==t.length?i.decode(t):o._bin.readASCII(t,e,s)},readBytes:function(t,e,s){for(var i=[],n=0;n<s;n++)i.push(t[e+n]);return i},readASCIIArray:function(t,e,s){for(var i=[],n=0;n<s;n++)i.push(String.fromCharCode(t[e+n]));return i},_view:function(t){return t._dataView||(t._dataView=t.buffer?new DataView(t.buffer,t.byteOffset,t.byteLength):new DataView(new Uint8Array(t).buffer))}},o._lctf={},o._lctf.parse=function(t,e,s,i,n){var a=o._bin,l={},f=e;a.readFixed(t,e);var d=a.readUshort(t,e+=4),h=a.readUshort(t,e+=2),C=a.readUshort(t,e+=2);return e+=2,l.scriptList=o._lctf.readScriptList(t,f+d),l.featureList=o._lctf.readFeatureList(t,f+h),l.lookupList=o._lctf.readLookupList(t,f+C,n),l},o._lctf.readLookupList=function(t,e,s){var i=o._bin,n=e,a=[],l=i.readUshort(t,e);e+=2;for(var f=0;f<l;f++){var d=i.readUshort(t,e);e+=2;var h=o._lctf.readLookupTable(t,n+d,s);a.push(h)}return a},o._lctf.readLookupTable=function(t,e,s){var i=o._bin,n=e,a={tabs:[]};a.ltype=i.readUshort(t,e),a.flag=i.readUshort(t,e+=2);var l=i.readUshort(t,e+=2);e+=2;for(var f=a.ltype,d=0;d<l;d++){var h=i.readUshort(t,e);e+=2;var C=s(t,f,n+h,a);a.tabs.push(C)}return a},o._lctf.numOfOnes=function(t){for(var e=0,s=0;s<32;s++)0!=(t>>>s&1)&&e++;return e},o._lctf.readClassDef=function(t,e){var s=o._bin,i=[],n=s.readUshort(t,e);if(e+=2,1==n){var a=s.readUshort(t,e),l=s.readUshort(t,e+=2);e+=2;for(var f=0;f<l;f++)i.push(a+f),i.push(a+f),i.push(s.readUshort(t,e)),e+=2}if(2==n){var d=s.readUshort(t,e);for(e+=2,f=0;f<d;f++)i.push(s.readUshort(t,e)),i.push(s.readUshort(t,e+=2)),i.push(s.readUshort(t,e+=2)),e+=2}return i},o._lctf.getInterval=function(t,e){for(var s=0;s<t.length;s+=3)if(t[s]<=e&&e<=t[s+1])return s;return-1},o._lctf.readCoverage=function(t,e){var s=o._bin,i={};i.fmt=s.readUshort(t,e);var n=s.readUshort(t,e+=2);return e+=2,1==i.fmt&&(i.tab=s.readUshorts(t,e,n)),2==i.fmt&&(i.tab=s.readUshorts(t,e,3*n)),i},o._lctf.coverageIndex=function(t,e){var s=t.tab;if(1==t.fmt)return s.indexOf(e);if(2==t.fmt){var i=o._lctf.getInterval(s,e);if(-1!=i)return s[i+2]+(e-s[i])}return-1},o._lctf.readFeatureList=function(t,e){var s=o._bin,i=e,n=[],a=s.readUshort(t,e);e+=2;for(var l=0;l<a;l++){var f=s.readASCII(t,e,4),d=s.readUshort(t,e+=4);e+=2;var h=o._lctf.readFeatureTable(t,i+d);h.tag=f.trim(),n.push(h)}return n},o._lctf.readFeatureTable=function(t,e){var s=o._bin,i=e,n={},a=s.readUshort(t,e);e+=2,a>0&&(n.featureParams=i+a);var l=s.readUshort(t,e);e+=2,n.tab=[];for(var f=0;f<l;f++)n.tab.push(s.readUshort(t,e+2*f));return n},o._lctf.readScriptList=function(t,e){var s=o._bin,i=e,n={},a=s.readUshort(t,e);e+=2;for(var l=0;l<a;l++){var f=s.readASCII(t,e,4),d=s.readUshort(t,e+=4);e+=2,n[f.trim()]=o._lctf.readScriptTable(t,i+d)}return n},o._lctf.readScriptTable=function(t,e){var s=o._bin,i=e,n={},a=s.readUshort(t,e);e+=2,n.default=o._lctf.readLangSysTable(t,i+a);var l=s.readUshort(t,e);e+=2;for(var f=0;f<l;f++){var d=s.readASCII(t,e,4),h=s.readUshort(t,e+=4);e+=2,n[d.trim()]=o._lctf.readLangSysTable(t,i+h)}return n},o._lctf.readLangSysTable=function(t,e){var s=o._bin,i={};s.readUshort(t,e),i.reqFeature=s.readUshort(t,e+=2);var n=s.readUshort(t,e+=2);return i.features=s.readUshorts(t,e+=2,n),i},o.CFF={},o.CFF.parse=function(t,e,s){var i=o._bin;t=new Uint8Array(t.buffer,e,s),e=0,++e,++e,++e,e++;var n=[];e=o.CFF.readIndex(t,e,n);for(var a=[],l=0;l<n.length-1;l++)a.push(i.readASCII(t,e+n[l],n[l+1]-n[l]));var f=[];e=o.CFF.readIndex(t,e+=n[n.length-1],f);var d=[];for(l=0;l<f.length-1;l++)d.push(o.CFF.readDict(t,e+f[l],e+f[l+1]));var h=d[0],C=[];e=o.CFF.readIndex(t,e+=f[f.length-1],C);var x=[];for(l=0;l<C.length-1;l++)x.push(i.readASCII(t,e+C[l],C[l+1]-C[l]));if(o.CFF.readSubrs(t,e+=C[C.length-1],h),h.CharStrings){e=o.CFF.readIndex(t,e=h.CharStrings,C=[]);var S=[];for(l=0;l<C.length-1;l++)S.push(i.readBytes(t,e+C[l],C[l+1]-C[l]));h.CharStrings=S}if(h.ROS){var m=[];for(e=o.CFF.readIndex(t,e=h.FDArray,m),h.FDArray=[],l=0;l<m.length-1;l++){var g=o.CFF.readDict(t,e+m[l],e+m[l+1]);o.CFF._readFDict(t,g,x),h.FDArray.push(g)}e+=m[m.length-1],e=h.FDSelect,h.FDSelect=[];var y=t[e];if(e++,3!=y)throw y;var p=i.readUshort(t,e);for(e+=2,l=0;l<p+1;l++)h.FDSelect.push(i.readUshort(t,e),t[e+2]),e+=3}return h.Encoding&&(h.Encoding=o.CFF.readEncoding(t,h.Encoding,h.CharStrings.length)),h.charset&&(h.charset=o.CFF.readCharset(t,h.charset,h.CharStrings.length)),o.CFF._readFDict(t,h,x),h},o.CFF._readFDict=function(t,e,s){var i;for(var n in e.Private&&(e.Private=o.CFF.readDict(t,i=e.Private[1],i+e.Private[0]),e.Private.Subrs&&o.CFF.readSubrs(t,i+e.Private.Subrs,e.Private)),e)-1!=["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(n)&&(e[n]=s[e[n]-426+35])},o.CFF.readSubrs=function(t,e,s){var i=o._bin,n=[];e=o.CFF.readIndex(t,e,n);var l=n.length;s.Bias=l<1240?107:l<33900?1131:32768,s.Subrs=[];for(var f=0;f<n.length-1;f++)s.Subrs.push(i.readBytes(t,e+n[f],n[f+1]-n[f]))},o.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],o.CFF.glyphByUnicode=function(t,e){for(var s=0;s<t.charset.length;s++)if(t.charset[s]==e)return s;return-1},o.CFF.glyphBySE=function(t,e){return e<0||e>255?-1:o.CFF.glyphByUnicode(t,o.CFF.tableSE[e])},o.CFF.readEncoding=function(t,e,s){var i=[".notdef"],n=t[e];if(e++,0!=n)throw"error: unknown encoding format: "+n;var a=t[e];e++;for(var l=0;l<a;l++)i.push(t[e+l]);return i},o.CFF.readCharset=function(t,e,s){var i=o._bin,n=[".notdef"],a=t[e];if(e++,0==a)for(var l=0;l<s;l++){var f=i.readUshort(t,e);e+=2,n.push(f)}else{if(1!=a&&2!=a)throw"error: format: "+a;for(;n.length<s;){f=i.readUshort(t,e),e+=2;var d=0;for(1==a?(d=t[e],e++):(d=i.readUshort(t,e),e+=2),l=0;l<=d;l++)n.push(f),f++}}return n},o.CFF.readIndex=function(t,e,s){var i=o._bin,n=i.readUshort(t,e)+1,a=t[e+=2];if(e++,1==a)for(var l=0;l<n;l++)s.push(t[e+l]);else if(2==a)for(l=0;l<n;l++)s.push(i.readUshort(t,e+2*l));else if(3==a)for(l=0;l<n;l++)s.push(16777215&i.readUint(t,e+3*l-1));else if(1!=n)throw"unsupported offset size: "+a+", count: "+n;return(e+=n*a)-1},o.CFF.getCharString=function(t,e,s){var i=o._bin,n=t[e],a=t[e+1],l=1,f=null,d=null;n<=20&&(f=n,l=1),12==n&&(f=100*n+a,l=2),21<=n&&n<=27&&(f=n,l=1),28==n&&(d=i.readShort(t,e+1),l=3),29<=n&&n<=31&&(f=n,l=1),32<=n&&n<=246&&(d=n-139,l=1),247<=n&&n<=250&&(d=256*(n-247)+a+108,l=2),251<=n&&n<=254&&(d=256*-(n-251)-a-108,l=2),255==n&&(d=i.readInt(t,e+1)/65535,l=5),s.val=d??"o"+f,s.size=l},o.CFF.readCharString=function(t,e,s){for(var i=e+s,n=o._bin,a=[];e<i;){var l=t[e],f=t[e+1],d=1,h=null,C=null;l<=20&&(h=l,d=1),12==l&&(h=100*l+f,d=2),19!=l&&20!=l||(h=l,d=2),21<=l&&l<=27&&(h=l,d=1),28==l&&(C=n.readShort(t,e+1),d=3),29<=l&&l<=31&&(h=l,d=1),32<=l&&l<=246&&(C=l-139,d=1),247<=l&&l<=250&&(C=256*(l-247)+f+108,d=2),251<=l&&l<=254&&(C=256*-(l-251)-f-108,d=2),255==l&&(C=n.readInt(t,e+1)/65535,d=5),a.push(C??"o"+h),e+=d}return a},o.CFF.readDict=function(t,e,s){for(var i=o._bin,n={},a=[];e<s;){var l=t[e],f=t[e+1],d=1,h=null,C=null;if(28==l&&(C=i.readShort(t,e+1),d=3),29==l&&(C=i.readInt(t,e+1),d=5),32<=l&&l<=246&&(C=l-139,d=1),247<=l&&l<=250&&(C=256*(l-247)+f+108,d=2),251<=l&&l<=254&&(C=256*-(l-251)-f-108,d=2),255==l)throw C=i.readInt(t,e+1)/65535,d=5,"unknown number";if(30==l){var x=[];for(d=1;;){var S=t[e+d];d++;var m=S>>4,g=15&S;if(15!=m&&x.push(m),15!=g&&x.push(g),15==g)break}for(var y="",p=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],_=0;_<x.length;_++)y+=p[x[_]];C=parseFloat(y)}l<=21&&(h=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][l],d=1,12==l&&(h=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][f],d=2)),null!=h?(n[h]=1==a.length?a[0]:a,a=[]):a.push(C),e+=d}return n},o.cmap={},o.cmap.parse=function(t,e,s){t=new Uint8Array(t.buffer,e,s);var i=o._bin,n={};i.readUshort(t,e=0);var a=i.readUshort(t,e+=2);e+=2;var l=[];n.tables=[];for(var f=0;f<a;f++){var d=i.readUshort(t,e),h=i.readUshort(t,e+=2),C=i.readUint(t,e+=2);e+=4;var x="p"+d+"e"+h,S=l.indexOf(C);if(-1==S){var m;S=n.tables.length,l.push(C);var g=i.readUshort(t,C);0==g?m=o.cmap.parse0(t,C):4==g?m=o.cmap.parse4(t,C):6==g?m=o.cmap.parse6(t,C):12==g?m=o.cmap.parse12(t,C):console.debug("unknown format: "+g,d,h,C),n.tables.push(m)}if(null!=n[x])throw"multiple tables for one platform+encoding";n[x]=S}return n},o.cmap.parse0=function(t,e){var s=o._bin,i={};i.format=s.readUshort(t,e);var n=s.readUshort(t,e+=2);s.readUshort(t,e+=2),e+=2,i.map=[];for(var a=0;a<n-6;a++)i.map.push(t[e+a]);return i},o.cmap.parse4=function(t,e){var s=o._bin,i=e,n={};n.format=s.readUshort(t,e);var a=s.readUshort(t,e+=2);s.readUshort(t,e+=2);var f=s.readUshort(t,e+=2)/2;n.searchRange=s.readUshort(t,e+=2),n.entrySelector=s.readUshort(t,e+=2),n.rangeShift=s.readUshort(t,e+=2),n.endCount=s.readUshorts(t,e+=2,f),e+=2*f,n.startCount=s.readUshorts(t,e+=2,f),e+=2*f,n.idDelta=[];for(var d=0;d<f;d++)n.idDelta.push(s.readShort(t,e)),e+=2;for(n.idRangeOffset=s.readUshorts(t,e,f),e+=2*f,n.glyphIdArray=[];e<i+a;)n.glyphIdArray.push(s.readUshort(t,e)),e+=2;return n},o.cmap.parse6=function(t,e){var s=o._bin,i={};i.format=s.readUshort(t,e),s.readUshort(t,e+=2),s.readUshort(t,e+=2),i.firstCode=s.readUshort(t,e+=2);var n=s.readUshort(t,e+=2);e+=2,i.glyphIdArray=[];for(var a=0;a<n;a++)i.glyphIdArray.push(s.readUshort(t,e)),e+=2;return i},o.cmap.parse12=function(t,e){var s=o._bin,i={};i.format=s.readUshort(t,e),e+=2,s.readUint(t,e+=2),s.readUint(t,e+=4);var n=s.readUint(t,e+=4);e+=4,i.groups=[];for(var a=0;a<n;a++){var l=e+12*a,f=s.readUint(t,l+0),d=s.readUint(t,l+4),h=s.readUint(t,l+8);i.groups.push([f,d,h])}return i},o.glyf={},o.glyf.parse=function(t,e,s,i){for(var n=[],a=0;a<i.maxp.numGlyphs;a++)n.push(null);return n},o.glyf._parseGlyf=function(t,e){var s=o._bin,i=t._data,n=o._tabOffset(i,"glyf",t._offset)+t.loca[e];if(t.loca[e]==t.loca[e+1])return null;var a={};if(a.noc=s.readShort(i,n),a.xMin=s.readShort(i,n+=2),a.yMin=s.readShort(i,n+=2),a.xMax=s.readShort(i,n+=2),a.yMax=s.readShort(i,n+=2),n+=2,a.xMin>=a.xMax||a.yMin>=a.yMax)return null;if(a.noc>0){a.endPts=[];for(var l=0;l<a.noc;l++)a.endPts.push(s.readUshort(i,n)),n+=2;var f=s.readUshort(i,n);if(i.length-(n+=2)<f)return null;a.instructions=s.readBytes(i,n,f),n+=f;var d=a.endPts[a.noc-1]+1;for(a.flags=[],l=0;l<d;l++){var h=i[n];if(n++,a.flags.push(h),0!=(8&h)){var C=i[n];n++;for(var x=0;x<C;x++)a.flags.push(h),l++}}for(a.xs=[],l=0;l<d;l++){var S=0!=(2&a.flags[l]),m=0!=(16&a.flags[l]);S?(a.xs.push(m?i[n]:-i[n]),n++):m?a.xs.push(0):(a.xs.push(s.readShort(i,n)),n+=2)}for(a.ys=[],l=0;l<d;l++)m=0!=(32&a.flags[l]),(S=0!=(4&a.flags[l]))?(a.ys.push(m?i[n]:-i[n]),n++):m?a.ys.push(0):(a.ys.push(s.readShort(i,n)),n+=2);var g=0,y=0;for(l=0;l<d;l++)y+=a.ys[l],a.xs[l]=g+=a.xs[l],a.ys[l]=y}else{var p;a.parts=[];do{p=s.readUshort(i,n),n+=2;var _={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(a.parts.push(_),_.glyphIndex=s.readUshort(i,n),n+=2,1&p){var T=s.readShort(i,n),k=s.readShort(i,n+=2);n+=2}else T=s.readInt8(i,n),n++,k=s.readInt8(i,n),n++;2&p?(_.m.tx=T,_.m.ty=k):(_.p1=T,_.p2=k),8&p?(_.m.a=_.m.d=s.readF2dot14(i,n),n+=2):64&p?(_.m.a=s.readF2dot14(i,n),_.m.d=s.readF2dot14(i,n+=2),n+=2):128&p&&(_.m.a=s.readF2dot14(i,n),_.m.b=s.readF2dot14(i,n+=2),_.m.c=s.readF2dot14(i,n+=2),_.m.d=s.readF2dot14(i,n+=2),n+=2)}while(32&p);if(256&p){var M=s.readUshort(i,n);for(n+=2,a.instr=[],l=0;l<M;l++)a.instr.push(i[n]),n++}}return a},o.GPOS={},o.GPOS.parse=function(t,e,s,i){return o._lctf.parse(t,e,s,i,o.GPOS.subt)},o.GPOS.subt=function(t,e,s,i){var n=o._bin,a=s,l={};if(l.fmt=n.readUshort(t,s),s+=2,1==e||2==e||3==e||7==e||8==e&&l.fmt<=2){var f=n.readUshort(t,s);s+=2,l.coverage=o._lctf.readCoverage(t,f+a)}if(1==e&&1==l.fmt){var d=n.readUshort(t,s);s+=2;var h=o._lctf.numOfOnes(d);0!=d&&(l.pos=o.GPOS.readValueRecord(t,s,d))}else if(2==e&&l.fmt>=1&&l.fmt<=2){d=n.readUshort(t,s);var C=n.readUshort(t,s+=2);s+=2,h=o._lctf.numOfOnes(d);var x=o._lctf.numOfOnes(C);if(1==l.fmt){l.pairsets=[];var S=n.readUshort(t,s);s+=2;for(var m=0;m<S;m++){var g=a+n.readUshort(t,s);s+=2;var y=n.readUshort(t,g);g+=2;for(var p=[],_=0;_<y;_++){var T=n.readUshort(t,g);g+=2,0!=d&&(N=o.GPOS.readValueRecord(t,g,d),g+=2*h),0!=C&&(z=o.GPOS.readValueRecord(t,g,C),g+=2*x),p.push({gid2:T,val1:N,val2:z})}l.pairsets.push(p)}}if(2==l.fmt){var k=n.readUshort(t,s),M=n.readUshort(t,s+=2),j=n.readUshort(t,s+=2),ee=n.readUshort(t,s+=2);for(s+=2,l.classDef1=o._lctf.readClassDef(t,a+k),l.classDef2=o._lctf.readClassDef(t,a+M),l.matrix=[],m=0;m<j;m++){var J=[];for(_=0;_<ee;_++){var N=null,z=null;0!=d&&(N=o.GPOS.readValueRecord(t,s,d),s+=2*h),0!=C&&(z=o.GPOS.readValueRecord(t,s,C),s+=2*x),J.push({val1:N,val2:z})}l.matrix.push(J)}}}else{if(9==e&&1==l.fmt){var D=n.readUshort(t,s),q=n.readUint(t,s+=2);if(s+=4,9==i.ltype)i.ltype=D;else if(i.ltype!=D)throw"invalid extension substitution";return o.GPOS.subt(t,i.ltype,a+q)}console.debug("unsupported GPOS table LookupType",e,"format",l.fmt)}return l},o.GPOS.readValueRecord=function(t,e,s){var i=o._bin,n=[];return n.push(1&s?i.readShort(t,e):0),e+=1&s?2:0,n.push(2&s?i.readShort(t,e):0),e+=2&s?2:0,n.push(4&s?i.readShort(t,e):0),e+=4&s?2:0,n.push(8&s?i.readShort(t,e):0),e+=8&s?2:0,n},o.GSUB={},o.GSUB.parse=function(t,e,s,i){return o._lctf.parse(t,e,s,i,o.GSUB.subt)},o.GSUB.subt=function(t,e,s,i){var n=o._bin,a=s,l={};if(l.fmt=n.readUshort(t,s),s+=2,1!=e&&4!=e&&5!=e&&6!=e)return null;if(1==e||4==e||5==e&&l.fmt<=2||6==e&&l.fmt<=2){var f=n.readUshort(t,s);s+=2,l.coverage=o._lctf.readCoverage(t,a+f)}if(1==e&&l.fmt>=1&&l.fmt<=2){if(1==l.fmt)l.delta=n.readShort(t,s),s+=2;else if(2==l.fmt){var d=n.readUshort(t,s);l.newg=n.readUshorts(t,s+=2,d),s+=2*l.newg.length}}else if(4==e){l.vals=[],d=n.readUshort(t,s),s+=2;for(var h=0;h<d;h++){var C=n.readUshort(t,s);s+=2,l.vals.push(o.GSUB.readLigatureSet(t,a+C))}}else if(5==e&&2==l.fmt){if(2==l.fmt){var x=n.readUshort(t,s);s+=2,l.cDef=o._lctf.readClassDef(t,a+x),l.scset=[];var S=n.readUshort(t,s);for(s+=2,h=0;h<S;h++){var m=n.readUshort(t,s);s+=2,l.scset.push(0==m?null:o.GSUB.readSubClassSet(t,a+m))}}}else if(6==e&&3==l.fmt){if(3==l.fmt){for(h=0;h<3;h++){d=n.readUshort(t,s),s+=2;for(var g=[],y=0;y<d;y++)g.push(o._lctf.readCoverage(t,a+n.readUshort(t,s+2*y)));s+=2*d,0==h&&(l.backCvg=g),1==h&&(l.inptCvg=g),2==h&&(l.ahedCvg=g)}d=n.readUshort(t,s),l.lookupRec=o.GSUB.readSubstLookupRecords(t,s+=2,d)}}else{if(7==e&&1==l.fmt){var p=n.readUshort(t,s),_=n.readUint(t,s+=2);if(s+=4,9==i.ltype)i.ltype=p;else if(i.ltype!=p)throw"invalid extension substitution";return o.GSUB.subt(t,i.ltype,a+_)}console.debug("unsupported GSUB table LookupType",e,"format",l.fmt)}return l},o.GSUB.readSubClassSet=function(t,e){var s=o._bin.readUshort,i=e,n=[],a=s(t,e);e+=2;for(var l=0;l<a;l++){var f=s(t,e);e+=2,n.push(o.GSUB.readSubClassRule(t,i+f))}return n},o.GSUB.readSubClassRule=function(t,e){var s=o._bin.readUshort,i={},n=s(t,e),a=s(t,e+=2);e+=2,i.input=[];for(var l=0;l<n-1;l++)i.input.push(s(t,e)),e+=2;return i.substLookupRecords=o.GSUB.readSubstLookupRecords(t,e,a),i},o.GSUB.readSubstLookupRecords=function(t,e,s){for(var i=o._bin.readUshort,n=[],a=0;a<s;a++)n.push(i(t,e),i(t,e+2)),e+=4;return n},o.GSUB.readChainSubClassSet=function(t,e){var s=o._bin,i=e,n=[],a=s.readUshort(t,e);e+=2;for(var l=0;l<a;l++){var f=s.readUshort(t,e);e+=2,n.push(o.GSUB.readChainSubClassRule(t,i+f))}return n},o.GSUB.readChainSubClassRule=function(t,e){for(var s=o._bin,i={},n=["backtrack","input","lookahead"],a=0;a<n.length;a++){var l=s.readUshort(t,e);1==a&&l--,i[n[a]]=s.readUshorts(t,e+=2,l),e+=2*i[n[a]].length}return l=s.readUshort(t,e),i.subst=s.readUshorts(t,e+=2,2*l),e+=2*i.subst.length,i},o.GSUB.readLigatureSet=function(t,e){var s=o._bin,i=e,n=[],a=s.readUshort(t,e);e+=2;for(var l=0;l<a;l++){var f=s.readUshort(t,e);e+=2,n.push(o.GSUB.readLigature(t,i+f))}return n},o.GSUB.readLigature=function(t,e){var s=o._bin,i={chain:[]};i.nglyph=s.readUshort(t,e);var n=s.readUshort(t,e+=2);e+=2;for(var a=0;a<n-1;a++)i.chain.push(s.readUshort(t,e)),e+=2;return i},o.head={},o.head.parse=function(t,e,s){var i=o._bin,n={};return i.readFixed(t,e),n.fontRevision=i.readFixed(t,e+=4),i.readUint(t,e+=4),i.readUint(t,e+=4),n.flags=i.readUshort(t,e+=4),n.unitsPerEm=i.readUshort(t,e+=2),n.created=i.readUint64(t,e+=2),n.modified=i.readUint64(t,e+=8),n.xMin=i.readShort(t,e+=8),n.yMin=i.readShort(t,e+=2),n.xMax=i.readShort(t,e+=2),n.yMax=i.readShort(t,e+=2),n.macStyle=i.readUshort(t,e+=2),n.lowestRecPPEM=i.readUshort(t,e+=2),n.fontDirectionHint=i.readShort(t,e+=2),n.indexToLocFormat=i.readShort(t,e+=2),n.glyphDataFormat=i.readShort(t,e+=2),e+=2,n},o.hhea={},o.hhea.parse=function(t,e,s){var i=o._bin,n={};return i.readFixed(t,e),n.ascender=i.readShort(t,e+=4),n.descender=i.readShort(t,e+=2),n.lineGap=i.readShort(t,e+=2),n.advanceWidthMax=i.readUshort(t,e+=2),n.minLeftSideBearing=i.readShort(t,e+=2),n.minRightSideBearing=i.readShort(t,e+=2),n.xMaxExtent=i.readShort(t,e+=2),n.caretSlopeRise=i.readShort(t,e+=2),n.caretSlopeRun=i.readShort(t,e+=2),n.caretOffset=i.readShort(t,e+=2),e+=2,n.metricDataFormat=i.readShort(t,e+=8),n.numberOfHMetrics=i.readUshort(t,e+=2),e+=2,n},o.hmtx={},o.hmtx.parse=function(t,e,s,i){for(var n=o._bin,a={aWidth:[],lsBearing:[]},l=0,f=0,d=0;d<i.maxp.numGlyphs;d++)d<i.hhea.numberOfHMetrics&&(l=n.readUshort(t,e),f=n.readShort(t,e+=2),e+=2),a.aWidth.push(l),a.lsBearing.push(f);return a},o.kern={},o.kern.parse=function(t,e,s,i){var n=o._bin,a=n.readUshort(t,e);if(e+=2,1==a)return o.kern.parseV1(t,e-2,s,i);var l=n.readUshort(t,e);e+=2;for(var f={glyph1:[],rval:[]},d=0;d<l;d++){s=n.readUshort(t,e+=2);var C=n.readUshort(t,e+=2)>>>8;if(0!=(C&=15))throw"unknown kern table format: "+C;e=o.kern.readFormat0(t,e+=2,f)}return f},o.kern.parseV1=function(t,e,s,i){var n=o._bin;n.readFixed(t,e);var a=n.readUint(t,e+=4);e+=4;for(var l={glyph1:[],rval:[]},f=0;f<a;f++){n.readUint(t,e);var d=n.readUshort(t,e+=4);n.readUshort(t,e+=2);var h=d>>>8;if(0!=(h&=15))throw"unknown kern table format: "+h;e=o.kern.readFormat0(t,e+=2,l)}return l},o.kern.readFormat0=function(t,e,s){var i=o._bin,n=-1,a=i.readUshort(t,e);i.readUshort(t,e+=2),i.readUshort(t,e+=2),i.readUshort(t,e+=2),e+=2;for(var l=0;l<a;l++){var f=i.readUshort(t,e),d=i.readUshort(t,e+=2),h=i.readShort(t,e+=2);e+=2,f!=n&&(s.glyph1.push(f),s.rval.push({glyph2:[],vals:[]}));var C=s.rval[s.rval.length-1];C.glyph2.push(d),C.vals.push(h),n=f}return e},o.loca={},o.loca.parse=function(t,e,s,i){var n=o._bin,a=[],l=i.head.indexToLocFormat,f=i.maxp.numGlyphs+1;if(0==l)for(var d=0;d<f;d++)a.push(n.readUshort(t,e+(d<<1))<<1);if(1==l)for(d=0;d<f;d++)a.push(n.readUint(t,e+(d<<2)));return a},o.maxp={},o.maxp.parse=function(t,e,s){var i=o._bin,n={},a=i.readUint(t,e);return n.numGlyphs=i.readUshort(t,e+=4),e+=2,65536==a&&(n.maxPoints=i.readUshort(t,e),n.maxContours=i.readUshort(t,e+=2),n.maxCompositePoints=i.readUshort(t,e+=2),n.maxCompositeContours=i.readUshort(t,e+=2),n.maxZones=i.readUshort(t,e+=2),n.maxTwilightPoints=i.readUshort(t,e+=2),n.maxStorage=i.readUshort(t,e+=2),n.maxFunctionDefs=i.readUshort(t,e+=2),n.maxInstructionDefs=i.readUshort(t,e+=2),n.maxStackElements=i.readUshort(t,e+=2),n.maxSizeOfInstructions=i.readUshort(t,e+=2),n.maxComponentElements=i.readUshort(t,e+=2),n.maxComponentDepth=i.readUshort(t,e+=2),e+=2),n},o.name={},o.name.parse=function(t,e,s){var i=o._bin,n={};i.readUshort(t,e);var a=i.readUshort(t,e+=2);i.readUshort(t,e+=2);for(var l,f=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],d=e+=2,h=0;h<a;h++){var C=i.readUshort(t,e),x=i.readUshort(t,e+=2),S=i.readUshort(t,e+=2),m=i.readUshort(t,e+=2),g=i.readUshort(t,e+=2),y=i.readUshort(t,e+=2);e+=2;var p,_=f[m],T=d+12*a+y;if(0==C)p=i.readUnicode(t,T,g/2);else if(3==C&&0==x)p=i.readUnicode(t,T,g/2);else if(0==x)p=i.readASCII(t,T,g);else if(1==x)p=i.readUnicode(t,T,g/2);else if(3==x)p=i.readUnicode(t,T,g/2);else{if(1!=C)throw"unknown encoding "+x+", platformID: "+C;p=i.readASCII(t,T,g),console.debug("reading unknown MAC encoding "+x+" as ASCII")}var k="p"+C+","+S.toString(16);null==n[k]&&(n[k]={}),n[k][void 0!==_?_:m]=p,n[k]._lang=S}for(var M in n)if(null!=n[M].postScriptName&&1033==n[M]._lang)return n[M];for(var M in n)if(null!=n[M].postScriptName&&0==n[M]._lang)return n[M];for(var M in n)if(null!=n[M].postScriptName&&3084==n[M]._lang)return n[M];for(var M in n)if(null!=n[M].postScriptName)return n[M];for(var M in n){l=M;break}return console.debug("returning name table with languageID "+n[l]._lang),n[l]},o["OS/2"]={},o["OS/2"].parse=function(t,e,s){var i=o._bin.readUshort(t,e);e+=2;var n={};if(0==i)o["OS/2"].version0(t,e,n);else if(1==i)o["OS/2"].version1(t,e,n);else if(2==i||3==i||4==i)o["OS/2"].version2(t,e,n);else{if(5!=i)throw"unknown OS/2 table version: "+i;o["OS/2"].version5(t,e,n)}return n},o["OS/2"].version0=function(t,e,s){var i=o._bin;return s.xAvgCharWidth=i.readShort(t,e),s.usWeightClass=i.readUshort(t,e+=2),s.usWidthClass=i.readUshort(t,e+=2),s.fsType=i.readUshort(t,e+=2),s.ySubscriptXSize=i.readShort(t,e+=2),s.ySubscriptYSize=i.readShort(t,e+=2),s.ySubscriptXOffset=i.readShort(t,e+=2),s.ySubscriptYOffset=i.readShort(t,e+=2),s.ySuperscriptXSize=i.readShort(t,e+=2),s.ySuperscriptYSize=i.readShort(t,e+=2),s.ySuperscriptXOffset=i.readShort(t,e+=2),s.ySuperscriptYOffset=i.readShort(t,e+=2),s.yStrikeoutSize=i.readShort(t,e+=2),s.yStrikeoutPosition=i.readShort(t,e+=2),s.sFamilyClass=i.readShort(t,e+=2),s.panose=i.readBytes(t,e+=2,10),s.ulUnicodeRange1=i.readUint(t,e+=10),s.ulUnicodeRange2=i.readUint(t,e+=4),s.ulUnicodeRange3=i.readUint(t,e+=4),s.ulUnicodeRange4=i.readUint(t,e+=4),s.achVendID=[i.readInt8(t,e+=4),i.readInt8(t,e+1),i.readInt8(t,e+2),i.readInt8(t,e+3)],s.fsSelection=i.readUshort(t,e+=4),s.usFirstCharIndex=i.readUshort(t,e+=2),s.usLastCharIndex=i.readUshort(t,e+=2),s.sTypoAscender=i.readShort(t,e+=2),s.sTypoDescender=i.readShort(t,e+=2),s.sTypoLineGap=i.readShort(t,e+=2),s.usWinAscent=i.readUshort(t,e+=2),s.usWinDescent=i.readUshort(t,e+=2),e+2},o["OS/2"].version1=function(t,e,s){var i=o._bin;return e=o["OS/2"].version0(t,e,s),s.ulCodePageRange1=i.readUint(t,e),s.ulCodePageRange2=i.readUint(t,e+=4),e+4},o["OS/2"].version2=function(t,e,s){var i=o._bin;return e=o["OS/2"].version1(t,e,s),s.sxHeight=i.readShort(t,e),s.sCapHeight=i.readShort(t,e+=2),s.usDefault=i.readUshort(t,e+=2),s.usBreak=i.readUshort(t,e+=2),s.usMaxContext=i.readUshort(t,e+=2),e+2},o["OS/2"].version5=function(t,e,s){var i=o._bin;return e=o["OS/2"].version2(t,e,s),s.usLowerOpticalPointSize=i.readUshort(t,e),s.usUpperOpticalPointSize=i.readUshort(t,e+=2),e+2},o.post={},o.post.parse=function(t,e,s){var i=o._bin,n={};return n.version=i.readFixed(t,e),n.italicAngle=i.readFixed(t,e+=4),n.underlinePosition=i.readShort(t,e+=4),n.underlineThickness=i.readShort(t,e+=2),e+=2,n},null==o&&(o={}),null==o.U&&(o.U={}),o.U.codeToGlyph=function(t,e){var s=t.cmap,i=-1;if(null!=s.p0e4?i=s.p0e4:null!=s.p3e1?i=s.p3e1:null!=s.p1e0?i=s.p1e0:null!=s.p0e3&&(i=s.p0e3),-1==i)throw"no familiar platform and encoding!";var n=s.tables[i];if(0==n.format)return e>=n.map.length?0:n.map[e];if(4==n.format){for(var a=-1,l=0;l<n.endCount.length;l++)if(e<=n.endCount[l]){a=l;break}return-1==a||n.startCount[a]>e?0:65535&(0!=n.idRangeOffset[a]?n.glyphIdArray[e-n.startCount[a]+(n.idRangeOffset[a]>>1)-(n.idRangeOffset.length-a)]:e+n.idDelta[a])}if(12==n.format){if(e>n.groups[n.groups.length-1][1])return 0;for(l=0;l<n.groups.length;l++){var f=n.groups[l];if(f[0]<=e&&e<=f[1])return f[2]+(e-f[0])}return 0}throw"unknown cmap table format "+n.format},o.U.glyphToPath=function(t,e){var s={cmds:[],crds:[]};if(t.SVG&&t.SVG.entries[e]){var i=t.SVG.entries[e];return null==i?s:("string"==typeof i&&(i=o.SVG.toPath(i),t.SVG.entries[e]=i),i)}if(t.CFF){var n={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:t.CFF.Private?t.CFF.Private.defaultWidthX:0,open:!1},a=t.CFF,l=t.CFF.Private;if(a.ROS){for(var f=0;a.FDSelect[f+2]<=e;)f+=2;l=a.FDArray[a.FDSelect[f+1]].Private}o.U._drawCFF(t.CFF.CharStrings[e],n,a,l,s)}else t.glyf&&o.U._drawGlyf(e,t,s);return s},o.U._drawGlyf=function(t,e,s){var i=e.glyf[t];null==i&&(i=e.glyf[t]=o.glyf._parseGlyf(e,t)),null!=i&&(i.noc>-1?o.U._simpleGlyph(i,s):o.U._compoGlyph(i,e,s))},o.U._simpleGlyph=function(t,e){for(var s=0;s<t.noc;s++){for(var i=0==s?0:t.endPts[s-1]+1,n=t.endPts[s],a=i;a<=n;a++){var l=a==i?n:a-1,f=a==n?i:a+1,d=1&t.flags[a],h=1&t.flags[l],C=1&t.flags[f],x=t.xs[a],S=t.ys[a];if(a==i)if(d){if(!h){o.U.P.moveTo(e,x,S);continue}o.U.P.moveTo(e,t.xs[l],t.ys[l])}else h?o.U.P.moveTo(e,t.xs[l],t.ys[l]):o.U.P.moveTo(e,(t.xs[l]+x)/2,(t.ys[l]+S)/2);d?h&&o.U.P.lineTo(e,x,S):C?o.U.P.qcurveTo(e,x,S,t.xs[f],t.ys[f]):o.U.P.qcurveTo(e,x,S,(x+t.xs[f])/2,(S+t.ys[f])/2)}o.U.P.closePath(e)}},o.U._compoGlyph=function(t,e,s){for(var i=0;i<t.parts.length;i++){var n={cmds:[],crds:[]},a=t.parts[i];o.U._drawGlyf(a.glyphIndex,e,n);for(var l=a.m,f=0;f<n.crds.length;f+=2){var d=n.crds[f],h=n.crds[f+1];s.crds.push(d*l.a+h*l.b+l.tx),s.crds.push(d*l.c+h*l.d+l.ty)}for(f=0;f<n.cmds.length;f++)s.cmds.push(n.cmds[f])}},o.U._getGlyphClass=function(t,e){var s=o._lctf.getInterval(e,t);return-1==s?0:e[s+2]},o.U.getPairAdjustment=function(t,e,s){var i=0,n=!1;if(t.GPOS)for(var a=t.GPOS,l=a.lookupList,f=a.featureList,d=[],h=0;h<f.length;h++){var C=f[h];if("kern"==C.tag){n=!0;for(var x=0;x<C.tab.length;x++)if(!d[C.tab[x]]){d[C.tab[x]]=!0;for(var S=l[C.tab[x]],m=0;m<S.tabs.length;m++)if(null!=S.tabs[m]){var g,y=S.tabs[m];if((!y.coverage||-1!=(g=o._lctf.coverageIndex(y.coverage,e)))&&1!=S.ltype&&2==S.ltype){var p;if(1==y.fmt){var _=y.pairsets[g];for(h=0;h<_.length;h++)_[h].gid2==s&&(p=_[h])}else if(2==y.fmt){var T=o.U._getGlyphClass(e,y.classDef1),k=o.U._getGlyphClass(s,y.classDef2);p=y.matrix[T][k]}p&&p.val1&&p.val1[2]&&(i+=p.val1[2]),p&&p.val2&&p.val2[0]&&(i+=p.val2[0])}}}}}if(t.kern&&!n){var M=t.kern.glyph1.indexOf(e);if(-1!=M){var j=t.kern.rval[M].glyph2.indexOf(s);-1!=j&&(i+=t.kern.rval[M].vals[j])}}return i},o.U._applySubs=function(t,e,s,i){for(var n=t.length-e-1,a=0;a<s.tabs.length;a++)if(null!=s.tabs[a]){var l,f=s.tabs[a];if(!f.coverage||-1!=(l=o._lctf.coverageIndex(f.coverage,t[e])))if(1==s.ltype)t[e]=1==f.fmt?t[e]+f.delta:f.newg[l];else if(4==s.ltype)for(var d=f.vals[l],h=0;h<d.length;h++){var C=d[h],x=C.chain.length;if(!(x>n)){for(var S=!0,m=0,g=0;g<x;g++){for(;-1==t[e+m+(1+g)];)m++;C.chain[g]!=t[e+m+(1+g)]&&(S=!1)}if(S){for(t[e]=C.nglyph,g=0;g<x+m;g++)t[e+g+1]=-1;break}}}else if(5==s.ltype&&2==f.fmt)for(var y=o._lctf.getInterval(f.cDef,t[e]),_=f.scset[f.cDef[y+2]],T=0;T<_.length;T++){var k=_[T],M=k.input;if(!(M.length>n)){for(S=!0,g=0;g<M.length;g++){var j=o._lctf.getInterval(f.cDef,t[e+1+g]);if(-1==y&&f.cDef[j+2]!=M[g]){S=!1;break}}if(S){var ee=k.substLookupRecords;for(h=0;h<ee.length;h+=2);}}}else if(6==s.ltype&&3==f.fmt){if(!o.U._glsCovered(t,f.backCvg,e-f.backCvg.length)||!o.U._glsCovered(t,f.inptCvg,e)||!o.U._glsCovered(t,f.ahedCvg,e+f.inptCvg.length))continue;var J=f.lookupRec;for(T=0;T<J.length;T+=2)o.U._applySubs(t,e+(y=J[T]),i[J[T+1]],i)}}},o.U._glsCovered=function(t,e,s){for(var i=0;i<e.length;i++)if(-1==o._lctf.coverageIndex(e[i],t[s+i]))return!1;return!0},o.U.glyphsToPath=function(t,e,s){for(var i={cmds:[],crds:[]},n=0,a=0;a<e.length;a++){var l=e[a];if(-1!=l){for(var f=a<e.length-1&&-1!=e[a+1]?e[a+1]:0,d=o.U.glyphToPath(t,l),h=0;h<d.crds.length;h+=2)i.crds.push(d.crds[h]+n),i.crds.push(d.crds[h+1]);for(s&&i.cmds.push(s),h=0;h<d.cmds.length;h++)i.cmds.push(d.cmds[h]);s&&i.cmds.push("X"),n+=t.hmtx.aWidth[l],a<e.length-1&&(n+=o.U.getPairAdjustment(t,l,f))}}return i},o.U.P={},o.U.P.moveTo=function(t,e,s){t.cmds.push("M"),t.crds.push(e,s)},o.U.P.lineTo=function(t,e,s){t.cmds.push("L"),t.crds.push(e,s)},o.U.P.curveTo=function(t,e,s,i,n,a,l){t.cmds.push("C"),t.crds.push(e,s,i,n,a,l)},o.U.P.qcurveTo=function(t,e,s,i,n){t.cmds.push("Q"),t.crds.push(e,s,i,n)},o.U.P.closePath=function(t){t.cmds.push("Z")},o.U._drawCFF=function(t,e,s,i,n){for(var a=e.stack,l=e.nStems,f=e.haveWidth,d=e.width,h=e.open,C=0,x=e.x,S=e.y,m=0,g=0,y=0,p=0,_=0,T=0,k=0,M=0,j=0,ee=0,J={val:0,size:0};C<t.length;){o.CFF.getCharString(t,C,J);var N=J.val;if(C+=J.size,"o1"==N||"o18"==N)a.length%2!=0&&!f&&(d=a.shift()+i.nominalWidthX),l+=a.length>>1,a.length=0,f=!0;else if("o3"==N||"o23"==N)a.length%2!=0&&!f&&(d=a.shift()+i.nominalWidthX),l+=a.length>>1,a.length=0,f=!0;else if("o4"==N)a.length>1&&!f&&(d=a.shift()+i.nominalWidthX,f=!0),h&&o.U.P.closePath(n),S+=a.pop(),o.U.P.moveTo(n,x,S),h=!0;else if("o5"==N)for(;a.length>0;)x+=a.shift(),S+=a.shift(),o.U.P.lineTo(n,x,S);else if("o6"==N||"o7"==N)for(var z=a.length,D="o6"==N,q=0;q<z;q++){var W=a.shift();D?x+=W:S+=W,D=!D,o.U.P.lineTo(n,x,S)}else if("o8"==N||"o24"==N){z=a.length;for(var ce=0;ce+6<=z;)m=x+a.shift(),g=S+a.shift(),y=m+a.shift(),p=g+a.shift(),x=y+a.shift(),S=p+a.shift(),o.U.P.curveTo(n,m,g,y,p,x,S),ce+=6;"o24"==N&&(x+=a.shift(),S+=a.shift(),o.U.P.lineTo(n,x,S))}else{if("o11"==N)break;if("o1234"==N||"o1235"==N||"o1236"==N||"o1237"==N)"o1234"==N&&(g=S,y=(m=x+a.shift())+a.shift(),ee=p=g+a.shift(),T=p,M=S,x=(k=(_=(j=y+a.shift())+a.shift())+a.shift())+a.shift(),o.U.P.curveTo(n,m,g,y,p,j,ee),o.U.P.curveTo(n,_,T,k,M,x,S)),"o1235"==N&&(m=x+a.shift(),g=S+a.shift(),y=m+a.shift(),p=g+a.shift(),j=y+a.shift(),ee=p+a.shift(),_=j+a.shift(),T=ee+a.shift(),k=_+a.shift(),M=T+a.shift(),x=k+a.shift(),S=M+a.shift(),a.shift(),o.U.P.curveTo(n,m,g,y,p,j,ee),o.U.P.curveTo(n,_,T,k,M,x,S)),"o1236"==N&&(m=x+a.shift(),g=S+a.shift(),y=m+a.shift(),ee=p=g+a.shift(),T=p,k=(_=(j=y+a.shift())+a.shift())+a.shift(),M=T+a.shift(),x=k+a.shift(),o.U.P.curveTo(n,m,g,y,p,j,ee),o.U.P.curveTo(n,_,T,k,M,x,S)),"o1237"==N&&(m=x+a.shift(),g=S+a.shift(),y=m+a.shift(),p=g+a.shift(),j=y+a.shift(),ee=p+a.shift(),_=j+a.shift(),T=ee+a.shift(),k=_+a.shift(),M=T+a.shift(),Math.abs(k-x)>Math.abs(M-S)?x=k+a.shift():S=M+a.shift(),o.U.P.curveTo(n,m,g,y,p,j,ee),o.U.P.curveTo(n,_,T,k,M,x,S));else if("o14"==N){if(a.length>0&&!f&&(d=a.shift()+s.nominalWidthX,f=!0),4==a.length){var fe=a.shift(),B=a.shift(),I=a.shift(),v=a.shift(),F=o.CFF.glyphBySE(s,I),E=o.CFF.glyphBySE(s,v);o.U._drawCFF(s.CharStrings[F],e,s,i,n),e.x=fe,e.y=B,o.U._drawCFF(s.CharStrings[E],e,s,i,n)}h&&(o.U.P.closePath(n),h=!1)}else if("o19"==N||"o20"==N)a.length%2!=0&&!f&&(d=a.shift()+i.nominalWidthX),l+=a.length>>1,a.length=0,f=!0,C+=l+7>>3;else if("o21"==N)a.length>2&&!f&&(d=a.shift()+i.nominalWidthX,f=!0),S+=a.pop(),x+=a.pop(),h&&o.U.P.closePath(n),o.U.P.moveTo(n,x,S),h=!0;else if("o22"==N)a.length>1&&!f&&(d=a.shift()+i.nominalWidthX,f=!0),x+=a.pop(),h&&o.U.P.closePath(n),o.U.P.moveTo(n,x,S),h=!0;else if("o25"==N){for(;a.length>6;)x+=a.shift(),S+=a.shift(),o.U.P.lineTo(n,x,S);m=x+a.shift(),g=S+a.shift(),y=m+a.shift(),p=g+a.shift(),x=y+a.shift(),S=p+a.shift(),o.U.P.curveTo(n,m,g,y,p,x,S)}else if("o26"==N)for(a.length%2&&(x+=a.shift());a.length>0;)m=x,g=S+a.shift(),x=y=m+a.shift(),S=(p=g+a.shift())+a.shift(),o.U.P.curveTo(n,m,g,y,p,x,S);else if("o27"==N)for(a.length%2&&(S+=a.shift());a.length>0;)g=S,y=(m=x+a.shift())+a.shift(),p=g+a.shift(),x=y+a.shift(),o.U.P.curveTo(n,m,g,y,p,x,S=p);else if("o10"==N||"o29"==N){var O="o10"==N?i:s;if(0==a.length)console.debug("error: empty stack");else{var P=a.pop(),R=O.Subrs[P+O.Bias];e.x=x,e.y=S,e.nStems=l,e.haveWidth=f,e.width=d,e.open=h,o.U._drawCFF(R,e,s,i,n),x=e.x,S=e.y,l=e.nStems,f=e.haveWidth,d=e.width,h=e.open}}else if("o30"==N||"o31"==N){var w=a.length,A=(ce=0,"o31"==N);for(ce+=w-(z=-3&w);ce<z;)A?(g=S,y=(m=x+a.shift())+a.shift(),S=(p=g+a.shift())+a.shift(),z-ce==5?(x=y+a.shift(),ce++):x=y,A=!1):(m=x,g=S+a.shift(),y=m+a.shift(),p=g+a.shift(),x=y+a.shift(),z-ce==5?(S=p+a.shift(),ce++):S=p,A=!0),o.U.P.curveTo(n,m,g,y,p,x,S),ce+=4}else{if("o"==(N+"").charAt(0))throw console.debug("Unknown operation: "+N,t),N;a.push(N)}}}e.x=x,e.y=S,e.nStems=l,e.haveWidth=f,e.width=d,e.open=h};var u={Typr:o};return c.Typr=o,c.default=u,Object.defineProperty(c,"__esModule",{value:!0}),c}({}).Typr},function hn(){return function(c){var o=Uint8Array,r=Uint16Array,u=Uint32Array,t=new o([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),e=new o([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),s=new o([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),i=function(N,z){for(var D=new r(31),q=0;q<31;++q)D[q]=z+=1<<N[q-1];var W=new u(D[30]);for(q=1;q<30;++q)for(var ce=D[q];ce<D[q+1];++ce)W[ce]=ce-D[q]<<5|q;return[D,W]},n=i(t,2),a=n[0],l=n[1];a[28]=258,l[258]=28;for(var f=i(e,0)[0],d=new r(32768),h=0;h<32768;++h){var C=(43690&h)>>>1|(21845&h)<<1;C=(61680&(C=(52428&C)>>>2|(13107&C)<<2))>>>4|(3855&C)<<4,d[h]=((65280&C)>>>8|(255&C)<<8)>>>1}var x=function(N,z,D){for(var q=N.length,W=0,ce=new r(z);W<q;++W)++ce[N[W]-1];var fe,B=new r(z);for(W=0;W<z;++W)B[W]=B[W-1]+ce[W-1]<<1;if(D){fe=new r(1<<z);var I=15-z;for(W=0;W<q;++W)if(N[W])for(var v=W<<4|N[W],F=z-N[W],E=B[N[W]-1]++<<F,O=E|(1<<F)-1;E<=O;++E)fe[d[E]>>>I]=v}else for(fe=new r(q),W=0;W<q;++W)N[W]&&(fe[W]=d[B[N[W]-1]++]>>>15-N[W]);return fe},S=new o(288);for(h=0;h<144;++h)S[h]=8;for(h=144;h<256;++h)S[h]=9;for(h=256;h<280;++h)S[h]=7;for(h=280;h<288;++h)S[h]=8;var m=new o(32);for(h=0;h<32;++h)m[h]=5;var g=x(S,9,1),y=x(m,5,1),p=function(N){for(var z=N[0],D=1;D<N.length;++D)N[D]>z&&(z=N[D]);return z},_=function(N,z,D){var q=z/8|0;return(N[q]|N[q+1]<<8)>>(7&z)&D},T=function(N,z){var D=z/8|0;return(N[D]|N[D+1]<<8|N[D+2]<<16)>>(7&z)},k=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],M=function(N,z,D){var q=new Error(z||k[N]);if(q.code=N,Error.captureStackTrace&&Error.captureStackTrace(q,M),!D)throw q;return q},ee=new o(0),J=typeof TextDecoder<"u"&&new TextDecoder;try{J.decode(ee,{stream:!0})}catch{}return c.convert_streams=function(N){var z=new DataView(N),D=0;function q(){var X=z.getUint16(D);return D+=2,X}function W(){var X=z.getUint32(D);return D+=4,X}function ce(X){H.setUint16(le,X),le+=2}function fe(X){H.setUint32(le,X),le+=4}for(var B={signature:W(),flavor:W(),length:W(),numTables:q(),reserved:q(),totalSfntSize:W(),majorVersion:q(),minorVersion:q(),metaOffset:W(),metaLength:W(),metaOrigLength:W(),privOffset:W(),privLength:W()},I=0;Math.pow(2,I)<=B.numTables;)I++;I--;for(var v=16*Math.pow(2,I),F=16*B.numTables-v,E=12,O=[],P=0;P<B.numTables;P++)O.push({tag:W(),offset:W(),compLength:W(),origLength:W(),origChecksum:W()}),E+=16;var R,w=new Uint8Array(12+16*O.length+O.reduce(function(X,V){return X+V.origLength+4},0)),A=w.buffer,H=new DataView(A),le=0;return fe(B.flavor),ce(B.numTables),ce(v),ce(I),ce(F),O.forEach(function(X){fe(X.tag),fe(X.origChecksum),fe(E),fe(X.origLength),X.outOffset=E,(E+=X.origLength)%4!=0&&(E+=4-E%4)}),O.forEach(function(X){var _e=N.slice(X.offset,X.offset+X.compLength);if(X.compLength!=X.origLength){var pe=new Uint8Array(X.origLength);!function(N,z,D){var q=N.length;if(!q||D&&!D.l&&q<5)return z||new o(0);var W=!z||D,ce=!D||D.i;D||(D={}),z||(z=new o(3*q));var fe,se,ke,Ce,B=function(se){var ke=z.length;if(se>ke){var Ce=new o(Math.max(2*ke,se));Ce.set(z),z=Ce}},I=D.f||0,v=D.p||0,F=D.b||0,E=D.l,O=D.d,P=D.m,R=D.n,w=8*q;do{if(!E){D.f=I=_(N,v,1);var A=_(N,v+1,3);if(v+=3,!A){var H=N[(Z=((fe=v)/8|0)+(7&fe&&1)+4)-4]|N[Z-3]<<8,le=Z+H;if(le>q){ce&&M(0);break}W&&B(F+H),z.set(N.subarray(Z,le),F),D.b=F+=H,D.p=v=8*le;continue}if(1==A)E=g,O=y,P=9,R=5;else if(2==A){var X=_(N,v,31)+257,V=_(N,v+10,15)+4,_e=X+_(N,v+5,31)+1;v+=14;for(var pe=new o(_e),te=new o(19),ae=0;ae<V;++ae)te[s[ae]]=_(N,v+3*ae,7);v+=3*V;var ge=p(te),G=(1<<ge)-1,ie=x(te,ge,1);for(ae=0;ae<_e;){var Z,U=ie[_(N,v,G)];if(v+=15&U,(Z=U>>>4)<16)pe[ae++]=Z;else{var be=0,K=0;for(16==Z?(K=3+_(N,v,3),v+=2,be=pe[ae-1]):17==Z?(K=3+_(N,v,7),v+=3):18==Z&&(K=11+_(N,v,127),v+=7);K--;)pe[ae++]=be}}var re=pe.subarray(0,X),Y=pe.subarray(X);P=p(re),R=p(Y),E=x(re,P,1),O=x(Y,R,1)}else M(1);if(v>w){ce&&M(0);break}}W&&B(F+131072);for(var ve=(1<<P)-1,ye=(1<<R)-1,Q=v;;Q=v){var de=(be=E[T(N,v)&ve])>>>4;if((v+=15&be)>w){ce&&M(0);break}if(be||M(2),de<256)z[F++]=de;else{if(256==de){Q=v,E=null;break}var xe=de-254;if(de>264){var Me=t[ae=de-257];xe=_(N,v,(1<<Me)-1)+a[ae],v+=Me}var Pe=O[T(N,v)&ye],Oe=Pe>>>4;if(Pe||M(3),v+=15&Pe,Y=f[Oe],Oe>3&&(Me=e[Oe],Y+=T(N,v)&(1<<Me)-1,v+=Me),v>w){ce&&M(0);break}W&&B(F+131072);for(var he=F+xe;F<he;F+=4)z[F]=z[F-Y],z[F+1]=z[F+1-Y],z[F+2]=z[F+2-Y],z[F+3]=z[F+3-Y];F=he}}D.l=E,D.p=Q,D.b=F,E&&(I=1,D.m=P,D.d=O,D.n=R)}while(!I);F==z.length||(se=z,(null==(ke=0)||ke<0)&&(ke=0),(null==(Ce=F)||Ce>se.length)&&(Ce=se.length),new(se instanceof r?r:se instanceof u?u:o)(Ce-ke).set(se.subarray(ke,Ce)))}(new Uint8Array(_e,2),pe)}else pe=new Uint8Array(_e);w.set(pe,X.outOffset);var te=0;(E=X.outOffset+X.origLength)%4!=0&&(te=4-E%4),w.set(new Uint8Array(te).buffer,X.outOffset+X.origLength),R=E+te}),A.slice(0,R)},Object.defineProperty(c,"__esModule",{value:!0}),c}({}).convert_streams},function gn(c,o){const r={M:2,L:2,Q:4,C:6,Z:0},u={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"};let l;function f(p){if(!l){const _={R:2,L:1,D:4,C:16,U:32,T:8};l=new Map;for(let T in u){let k=0;u[T].split(",").forEach(M=>{let[j,ee]=M.split("+");j=parseInt(j,36),ee=ee?parseInt(ee,36):0,l.set(k+=j,_[T]);for(let J=ee;J--;)l.set(++k,_[T])})}}return l.get(p)||32}const S=[null,"isol","init","fina","medi"];function m(p){const _=new Uint8Array(p.length);let T=32,k=1,M=-1;for(let j=0;j<p.length;j++){const ee=p.codePointAt(j);let J=0|f(ee),N=1;8&J||(21&T?22&J?(N=3,(1===k||3===k)&&_[M]++):33&J&&(2===k||4===k)&&_[M]--:34&T&&(2===k||4===k)&&_[M]--,k=_[j]=N,T=J,M=j,ee>65535&&j++)}return _}return function(_){const T=new Uint8Array(_,0,4),k=c._bin.readASCII(T,0,4);if("wOFF"===k)_=o(_);else if("wOF2"===k)throw new Error("woff2 fonts not supported");return function y(p){const _=Object.create(null),T={unitsPerEm:p.head.unitsPerEm,ascender:p.hhea.ascender,descender:p.hhea.descender,forEachGlyph(k,M,j,ee){let J=0;const N=1/T.unitsPerEm*M,z=function g(p,_){const T=[];for(let M=0;M<_.length;M++){const j=_.codePointAt(M);j>65535&&M++,T.push(c.U.codeToGlyph(p,j))}const k=p.GSUB;if(k){const{lookupList:M,featureList:j}=k;let ee;const J=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws)$/,N=[];j.forEach(z=>{if(J.test(z.tag))for(let D=0;D<z.tab.length;D++){if(N[z.tab[D]])continue;N[z.tab[D]]=!0;const q=M[z.tab[D]],W=/^(isol|init|fina|medi)$/.test(z.tag);W&&!ee&&(ee=m(_));for(let ce=0;ce<T.length;ce++)(!ee||!W||S[ee[ce]]===z.tag)&&c.U._applySubs(T,ce,q,M)}})}return T}(p,k);let D=0,q=-1;return z.forEach((W,ce)=>{if(-1!==W){let fe=_[W];if(!fe){const{cmds:B,crds:I}=c.U.glyphToPath(p,W);let E,O,P,R,v="",F=0;for(let w=0,A=B.length;w<A;w++){const H=r[B[w]];v+=B[w];for(let le=1;le<=H;le++)v+=(le>1?",":"")+I[F++]}if(I.length){E=O=1/0,P=R=-1/0;for(let w=0,A=I.length;w<A;w+=2){let H=I[w],le=I[w+1];H<E&&(E=H),le<O&&(O=le),H>P&&(P=H),le>R&&(R=le)}}else E=P=O=R=0;fe=_[W]={index:W,advanceWidth:p.hmtx.aWidth[W],xMin:E,yMin:O,xMax:P,yMax:R,path:v,pathCommandCount:B.length}}-1!==q&&(J+=c.U.getPairAdjustment(p,q,W)*N),ee.call(null,fe,J,D),fe.advanceWidth&&(J+=fe.advanceWidth*N),j&&(J+=j*M),q=W}D+=k.codePointAt(D)>65535?2:1}),J}};return T}(c.parse(_)[0])}}],init:(c,o,r)=>r(c(),o())}),gt={defaultFontURL:"https://fonts.gstatic.com/s/roboto/v18/KFOmCnqEu92Fr1Mu4mxM.woff",sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},mn=new $.Ilk;let to=!1;function bt(){return(self.performance||Date).now()}const Ht=Object.create(null);function ro(c,o){to=!0,c=function no(c,o){for(let r in o)o.hasOwnProperty(r)&&(c[r]=o[r]);return c}({},c);const r=bt();if(c.font=function yn(c){return Xt||(Xt=typeof document>"u"?{}:document.createElement("a")),Xt.href=c,Xt.href}(c.font||gt.defaultFontURL),c.text=""+c.text,c.sdfGlyphSize=c.sdfGlyphSize||gt.sdfGlyphSize,null!=c.colorRanges){let f={};for(let d in c.colorRanges)if(c.colorRanges.hasOwnProperty(d)){let h=c.colorRanges[d];"number"!=typeof h&&(h=mn.set(h).getHex()),f[d]=h}c.colorRanges=f}Object.freeze(c);const{textureWidth:u,sdfExponent:t}=gt,{sdfGlyphSize:e}=c,s=u/e*4;let i=Ht[e];if(!i){const f=document.createElement("canvas");f.width=u,f.height=256*e/s,i=Ht[e]={glyphCount:0,sdfGlyphSize:e,sdfCanvas:f,sdfTexture:new $.xEZ(f,void 0,void 0,void 0,$.wem,$.wem),contextLost:!1,glyphsByFont:new Map},i.sdfTexture.generateMipmaps=!1,function vn(c){const o=c.sdfCanvas;o.addEventListener("webglcontextlost",r=>{console.log("Context Lost",r),r.preventDefault(),c.contextLost=!0}),o.addEventListener("webglcontextrestored",r=>{console.log("Context Restored",r),c.contextLost=!1;const u=[];c.glyphsByFont.forEach(t=>{t.forEach(e=>{u.push(oo(e,c,!0))})}),it.all(u).then(()=>{io(c),c.sdfTexture.needsUpdate=!0})})}(i)}const{sdfTexture:n,sdfCanvas:a}=i;let l=i.glyphsByFont.get(c.font);l||i.glyphsByFont.set(c.font,l=new Map),Sn(c).then(f=>{const{glyphIds:d,glyphPositions:h,fontSize:C,unitsPerEm:x,timings:S}=f,m=[],g=new Float32Array(4*d.length),y=C/x;let p=0,_=0;const T=bt();d.forEach((J,N)=>{let z=l.get(J);if(!z){const{path:ce,pathBounds:fe}=f.glyphData[J],B=Math.max(fe[2]-fe[0],fe[3]-fe[1])/e*(gt.sdfMargin*e+.5),I=i.glyphCount++;l.set(J,z={path:ce,atlasIndex:I,sdfViewBox:[fe[0]-B,fe[1]-B,fe[2]+B,fe[3]+B]}),m.push(z)}const{sdfViewBox:D}=z,q=h[_++],W=h[_++];g[p++]=q+D[0]*y,g[p++]=W+D[1]*y,g[p++]=q+D[2]*y,g[p++]=W+D[3]*y,d[N]=z.atlasIndex}),S.quads=(S.quads||0)+(bt()-T);const k=bt();S.sdf={};const M=a.height,j=Math.ceil(i.glyphCount/s),ee=Math.pow(2,Math.ceil(Math.log2(j*e)));ee>M&&(console.info(`Increasing SDF texture size ${M}->${ee}`),fn(a,u,ee),n.dispose()),it.all(m.map(J=>oo(J,i,c.gpuAccelerateSDF).then(({timing:N})=>{S.sdf[J.atlasIndex]=N}))).then(()=>{m.length&&!i.contextLost&&(io(i),n.needsUpdate=!0),S.sdfTotal=bt()-k,S.total=bt()-r,o(Object.freeze({parameters:c,sdfTexture:n,sdfGlyphSize:e,sdfExponent:t,glyphBounds:g,glyphAtlasIndices:d,glyphColors:f.glyphColors,caretPositions:f.caretPositions,caretHeight:f.caretHeight,chunkedBounds:f.chunkedBounds,ascender:f.ascender,descender:f.descender,lineHeight:f.lineHeight,topBaseline:f.topBaseline,blockBounds:f.blockBounds,visibleBounds:f.visibleBounds,timings:f.timings,get totalBounds(){return console.log("totalBounds deprecated, use blockBounds instead"),f.blockBounds},get totalBlockSize(){console.log("totalBlockSize deprecated, use blockBounds instead");const[J,N,z,D]=f.blockBounds;return[z-J,D-N]}}))})}),it.all([]).then(()=>{i.contextLost||function un(c){c._warm||(Wt.webgl.isSupported(c),c._warm=!0)}(a)})}function oo({path:c,atlasIndex:o,sdfViewBox:r},{sdfGlyphSize:u,sdfCanvas:t,contextLost:e},s){if(e)return Promise.resolve({timing:-1});const{textureWidth:i,sdfExponent:n}=gt,a=Math.max(r[2]-r[0],r[3]-r[1]),l=Math.floor(o/4);return function ln(c,o,r,u,t,e,s,i,n,a,l=!0){return l?cn(c,o,r,u,t,e,s,i,n,a).then(null,f=>($r||(console.warn("WebGL SDF generation failed, falling back to JS",f),$r=!0),eo(c,o,r,u,t,e,s,i,n,a))):eo(c,o,r,u,t,e,s,i,n,a)}(u,u,c,r,a,n,t,l%(i/u)*u,Math.floor(l/(i/u))*u,o%4,s)}let Xt;function io(c){if("function"!=typeof createImageBitmap){console.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas:o,sdfTexture:r}=c,{width:u,height:t}=o,e=c.sdfCanvas.getContext("webgl");let s=r.image.data;(!s||s.length!==u*t*4)&&(s=new Uint8Array(u*t*4),r.image={width:u,height:t,data:s},r.flipY=!1,r.isDataTexture=!0),e.readPixels(0,0,u,t,e.RGBA,e.UNSIGNED_BYTE,s)}}const Sn=vt({name:"Typesetter",dependencies:[vt({name:"Typesetter",dependencies:[gt,pn,function sn(c,o,r){const{defaultFontURL:u}=r,t=Object.create(null),e=1/0,s=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,i=/[\s\-\u007C\u00AD\u2010\u2012-\u2014\u2027\u2056\u2E17\u2E40]/;function a(m,g){m||(m=u);let y=t[m];y?y.pending?y.pending.push(g):g(y):(t[m]={pending:[g]},function n(m,g){!function y(){const p=_=>{console.error(`Failure loading font ${m}${m===u?"":"; trying fallback"}`,_),m!==u&&(m=u,y())};try{const _=new XMLHttpRequest;_.open("get",m,!0),_.responseType="arraybuffer",_.onload=function(){if(_.status>=400)p(new Error(_.statusText));else if(_.status>0)try{const T=c(_.response);g(T)}catch(T){p(T)}},_.onerror=p,_.send()}catch(_){p(_)}}()}(m,p=>{let _=t[m].pending;t[m]=p,_.forEach(T=>T(p))}))}function l({text:m="",font:g=u,sdfGlyphSize:y=64,fontSize:p=1,letterSpacing:_=0,lineHeight:T="normal",maxWidth:k=e,direction:M,textAlign:j="left",textIndent:ee=0,whiteSpace:J="normal",overflowWrap:N="normal",anchorX:z=0,anchorY:D=0,includeCaretPositions:q=!1,chunkedBoundsSize:W=8192,colorRanges:ce=null},fe,B=!1){const I=C(),v={fontLoad:0,typesetting:0};m.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),m=m.replace(/\r\n/g,"\n").replace(/\r/g,"\n")),p=+p,_=+_,k=+k,T=T||"normal",ee=+ee,a(g,F=>{const E=isFinite(k);let O=null,P=null,R=null,w=null,A=null,H=null,le=null,X=0,V=0,_e="nowrap"!==J;const{ascender:pe,descender:te,unitsPerEm:ae}=F;v.fontLoad=C()-I;const ge=C(),G=p/ae;"normal"===T&&(T=(pe-te)/ae);const ie=((T*=p)-(pe-te)*G)/2,Z=-(pe*G+ie),U=Math.min(T,(pe-te)*G),be=(pe+te)/2*G-U/2;let K=ee,re=new x;const Y=[re];F.forEachGlyph(m,p,_,(Q,de,xe)=>{const Me=m.charAt(xe),Pe=Q.advanceWidth*G,Oe=re.count;let he;if("isEmpty"in Q||(Q.isWhitespace=!!Me&&/\s/.test(Me),Q.canBreakAfter=!!Me&&i.test(Me),Q.isEmpty=Q.xMin===Q.xMax||Q.yMin===Q.yMax||s.test(Me)),!Q.isWhitespace&&!Q.isEmpty&&V++,_e&&E&&!Q.isWhitespace&&de+Pe+K>k&&Oe){if(re.glyphAt(Oe-1).glyphObj.canBreakAfter)he=new x,K=-de;else for(let ke=Oe;ke--;){if(0===ke&&"break-word"===N){he=new x,K=-de;break}if(re.glyphAt(ke).glyphObj.canBreakAfter){he=re.splitAt(ke+1);const Ce=he.glyphAt(0).x;K-=Ce;for(let Je=he.count;Je--;)he.glyphAt(Je).x-=Ce;break}}he&&(re.isSoftWrapped=!0,re=he,Y.push(re),X=k)}let se=re.glyphAt(re.count);se.glyphObj=Q,se.x=de+K,se.width=Pe,se.charIndex=xe,"\n"===Me&&(re=new x,Y.push(re),K=-(de+Pe+_*p)+ee)}),Y.forEach(Q=>{for(let de=Q.count;de--;){let{glyphObj:xe,x:Me,width:Pe}=Q.glyphAt(de);if(!xe.isWhitespace)return Q.width=Me+Pe,void(Q.width>X&&(X=Q.width))}});let ve=0,ye=0;if(z&&("number"==typeof z?ve=-z:"string"==typeof z&&(ve=-X*("left"===z?0:"center"===z?.5:"right"===z?1:d(z)))),D)if("number"==typeof D)ye=-D;else if("string"==typeof D){let Q=Y.length*T;ye="top"===D?0:"top-baseline"===D?-Z:"middle"===D?Q/2:"bottom"===D?Q:"bottom-baseline"===D?Q-ie+te*G:d(D)*Q}if(!B){const Q=o.getEmbeddingLevels(m,M);O=new Uint16Array(V),P=new Float32Array(2*V),R={},H=[e,e,-e,-e],le=[];let de=Z;q&&(A=new Float32Array(3*m.length)),ce&&(w=new Uint8Array(3*V));let Oe,he,xe=0,Me=-1,Pe=-1;if(Y.forEach((se,ke)=>{let{count:Ce,width:Je}=se;if(Ce>0){let Be=0;for(let Fe=Ce;Fe--&&se.glyphAt(Fe).glyphObj.isWhitespace;)Be++;let Ge=0,at=0;if("center"===j)Ge=(X-Je)/2;else if("right"===j)Ge=X-Je;else if("justify"===j&&se.isSoftWrapped){let Fe=0;for(let Ne=Ce-Be;Ne--;)se.glyphAt(Ne).glyphObj.isWhitespace&&Fe++;at=(X-Je)/Fe}if(at||Ge){let Fe=0;for(let Ne=0;Ne<Ce;Ne++){let je=se.glyphAt(Ne);const Ze=je.glyphObj;je.x+=Ge+Fe,0!==at&&Ze.isWhitespace&&Ne<Ce-Be&&(Fe+=at,je.width+=at)}}const wt=o.getReorderSegments(m,Q,se.glyphAt(0).charIndex,se.glyphAt(se.count-1).charIndex);for(let Fe=0;Fe<wt.length;Fe++){const[Ne,je]=wt[Fe];let Ze=1/0,De=-1/0;for(let Xe=0;Xe<Ce;Xe++)if(se.glyphAt(Xe).charIndex>=Ne){let nt=Xe,We=Xe;for(;We<Ce;We++){let Re=se.glyphAt(We);if(Re.charIndex>je)break;We<Ce-Be&&(Ze=Math.min(Ze,Re.x),De=Math.max(De,Re.x+Re.width))}for(let Re=nt;Re<We;Re++){const Ke=se.glyphAt(Re);Ke.x=De-(Ke.x+Ke.width-Ze)}break}}let Ve;const Ft=Fe=>Ve=Fe;for(let Fe=0;Fe<Ce;Fe++){let Ne=se.glyphAt(Fe);Ve=Ne.glyphObj;const je=Ve.index,Ze=1&Q.levels[Ne.charIndex];if(Ze){const De=o.getMirroredCharacter(m[Ne.charIndex]);De&&F.forEachGlyph(De,0,0,Ft)}if(q){const{charIndex:De}=Ne,Xe=Ne.x+ve,nt=Ne.x+Ne.width+ve;A[3*De]=Ze?nt:Xe,A[3*De+1]=Ze?Xe:nt,A[3*De+2]=de+be+ye;const We=De-Me;We>1&&h(A,Me,We),Me=De}if(ce){const{charIndex:De}=Ne;for(;De>Pe;)Pe++,ce.hasOwnProperty(Pe)&&(he=ce[Pe])}if(!Ve.isWhitespace&&!Ve.isEmpty){const De=xe++;R[je]||(R[je]={path:Ve.path,pathBounds:[Ve.xMin,Ve.yMin,Ve.xMax,Ve.yMax]});const Xe=Ne.x+ve,nt=de+ye;P[2*De]=Xe,P[2*De+1]=nt;const We=Xe+Ve.xMin*G,Re=nt+Ve.yMin*G,Ke=Xe+Ve.xMax*G,st=nt+Ve.yMax*G;We<H[0]&&(H[0]=We),Re<H[1]&&(H[1]=Re),Ke>H[2]&&(H[2]=Ke),st>H[3]&&(H[3]=st),De%W==0&&(Oe={start:De,end:De,rect:[e,e,-e,-e]},le.push(Oe)),Oe.end++;const et=Oe.rect;if(We<et[0]&&(et[0]=We),Re<et[1]&&(et[1]=Re),Ke>et[2]&&(et[2]=Ke),st>et[3]&&(et[3]=st),O[De]=je,ce){const lt=3*De;w[lt]=he>>16&255,w[lt+1]=he>>8&255,w[lt+2]=255&he}}}}de-=T}),A){const se=m.length-Me;se>1&&h(A,Me,se)}}v.typesetting=C()-ge,fe({glyphIds:O,glyphPositions:P,glyphData:R,caretPositions:A,caretHeight:U,glyphColors:w,chunkedBounds:le,fontSize:p,unitsPerEm:ae,ascender:pe*G,descender:te*G,lineHeight:T,topBaseline:Z,blockBounds:[ve,ye-Y.length*T,ve+X,ye],visibleBounds:H,timings:v})})}function d(m){let g=m.match(/^([\d.]+)%$/),y=g?parseFloat(g[1]):NaN;return isNaN(y)?0:y/100}function h(m,g,y){const p=m[3*g],T=m[3*g+2],k=(m[3*g+1]-p)/y;for(let M=0;M<y;M++){const j=3*(g+M);m[j]=p+k*M,m[j+1]=p+k*(M+1),m[j+2]=T}}function C(){return(self.performance||Date).now()}function x(){this.data=[]}const S=["glyphObj","x","width","charIndex"];return x.prototype={width:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/S.length)},glyphAt(m){let g=x.flyweight;return g.data=this.data,g.index=m,g},splitAt(m){let g=new x;return g.data=this.data.splice(m*S.length),g}},x.flyweight=S.reduce((m,g,y,p)=>(Object.defineProperty(m,g,{get(){return this.data[this.index*S.length+y]},set(_){this.data[this.index*S.length+y]=_}}),m),{data:null,index:0}),{typeset:l,measure:function f(m,g){l(m,y=>{const[p,_,T,k]=y.blockBounds;g({width:T-p,height:k-_})},{metricsOnly:!0})},loadFont:a}},function Ho(){return function(o){var r={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},u={},t={};u.L=1,t[1]="L",Object.keys(r).forEach(function(G,ie){u[G]=1<<ie+1,t[u[G]]=G}),Object.freeze(u);var e=u.LRI|u.RLI|u.FSI,s=u.L|u.R|u.AL,i=u.B|u.S|u.WS|u.ON|u.FSI|u.LRI|u.RLI|u.PDI,n=u.BN|u.RLE|u.LRE|u.RLO|u.LRO|u.PDF,a=u.S|u.WS|u.B|e|u.PDI|n,l=null;function d(G){return function f(){if(!l){l=new Map;var G=function(Z){if(r.hasOwnProperty(Z)){var U=0;r[Z].split(",").forEach(function(be){var K=be.split("+"),re=K[0],Y=K[1];re=parseInt(re,36),Y=Y?parseInt(Y,36):0,l.set(U+=re,u[Z]);for(var ve=0;ve<Y;ve++)l.set(++U,u[Z])})}};for(var ie in r)G(ie)}}(),l.get(G.codePointAt(0))||u.L}var S,m,g;function x(G,ie){var re,U=0,be=new Map,K=ie&&new Map;return G.split(",").forEach(function Y(ve){if(-1!==ve.indexOf("+"))for(var ye=+ve;ye--;)Y(re);else{re=ve;var Q=ve.split(">"),de=Q[0],xe=Q[1];de=String.fromCodePoint(U+=parseInt(de,36)),xe=String.fromCodePoint(U+=parseInt(xe,36)),be.set(de,xe),ie&&K.set(xe,de)}}),{map:be,reverseMap:K}}function y(){if(!S){var G=x("14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",!0);S=G.map,m=G.reverseMap,g=x("6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye",!1).map}}function p(G){return y(),S.get(G)||null}function _(G){return y(),m.get(G)||null}function T(G){return y(),g.get(G)||null}var X,k=u.L,M=u.R,j=u.EN,ee=u.ES,J=u.ET,N=u.AN,z=u.CS,D=u.B,q=u.S,W=u.ON,ce=u.BN,fe=u.NSM,B=u.AL,I=u.LRO,v=u.RLO,F=u.LRE,E=u.RLE,O=u.PDF,P=u.LRI,R=u.RLI,w=u.FSI,A=u.PDI;function _e(G){return function V(){if(!X){var G=x("14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",!0),ie=G.map;G.reverseMap.forEach(function(U,be){ie.set(be,U)}),X=ie}}(),X.get(G)||null}function te(G,ie,Z,U){var be=G.length;Z=Math.max(0,null==Z?0:+Z),U=Math.min(be-1,null==U?be-1:+U);var K=[];return ie.paragraphs.forEach(function(re){var Y=Math.max(Z,re.start),ve=Math.min(U,re.end);if(Y<ve){for(var ye=ie.levels.slice(Y,ve+1),Q=ve;Q>=Y&&d(G[Q])&a;Q--)ye[Q]=re.level;for(var de=re.level,xe=1/0,Me=0;Me<ye.length;Me++){var Pe=ye[Me];Pe>de&&(de=Pe),Pe<xe&&(xe=1|Pe)}for(var Oe=de;Oe>=xe;Oe--)for(var he=0;he<ye.length;he++)if(ye[he]>=Oe){for(var se=he;he+1<ye.length&&ye[he+1]>=Oe;)he++;he>se&&K.push([se+Z,he+Z])}}}),K}function ge(G,ie,Z,U){for(var be=te(G,ie,Z,U),K=[],re=0;re<G.length;re++)K[re]=re;return be.forEach(function(Y){for(var ye=Y[1],Q=K.slice(Y[0],ye+1),de=Q.length;de--;)K[ye-de]=Q[de]}),K}return o.closingToOpeningBracket=_,o.getBidiCharType=d,o.getBidiCharTypeName=function h(G){return t[d(G)]},o.getCanonicalBracket=T,o.getEmbeddingLevels=function H(G,ie){for(var U=new Uint32Array(G.length),be=0;be<G.length;be++)U[be]=d(G[be]);var K=new Map;function re(He,rt){var Qe=U[He];U[He]=rt,K.set(Qe,K.get(Qe)-1),Qe&i&&K.set(i,K.get(i)-1),K.set(rt,(K.get(rt)||0)+1),rt&i&&K.set(i,(K.get(i)||0)+1)}for(var Y=new Uint8Array(G.length),ve=new Map,ye=[],Q=null,de=0;de<G.length;de++)Q||ye.push(Q={start:de,end:G.length-1,level:"rtl"===ie?1:"ltr"===ie?0:Uo(de,!1)}),U[de]&D&&(Q.end=de,Q=null);for(var xe=E|F|v|I|e|A|O|D,Me=function(He){return He+(1&He?1:2)},Pe=function(He){return He+(1&He?2:1)},Oe=0;Oe<ye.length;Oe++){var he=[{_level:(Q=ye[Oe]).level,_override:0,_isolate:0}],se=void 0,ke=0,Ce=0,Je=0;K.clear();for(var Be=Q.start;Be<=Q.end;Be++){var Ge=U[Be];if(se=he[he.length-1],K.set(Ge,(K.get(Ge)||0)+1),Ge&i&&K.set(i,(K.get(i)||0)+1),Ge&xe)if(Ge&(E|F)){Y[Be]=se._level;var at=(Ge===E?Pe:Me)(se._level);at<=125&&!ke&&!Ce?he.push({_level:at,_override:0,_isolate:0}):ke||Ce++}else if(Ge&(v|I)){Y[Be]=se._level;var wt=(Ge===v?Pe:Me)(se._level);wt<=125&&!ke&&!Ce?he.push({_level:wt,_override:Ge&v?M:k,_isolate:0}):ke||Ce++}else if(Ge&e){Ge&w&&(Ge=1===Uo(Be+1,!0)?R:P),Y[Be]=se._level,se._override&&re(Be,se._override);var Ve=(Ge===R?Pe:Me)(se._level);Ve<=125&&0===ke&&0===Ce?(Je++,he.push({_level:Ve,_override:0,_isolate:1,_isolInitIndex:Be})):ke++}else if(Ge&A){if(ke>0)ke--;else if(Je>0){for(Ce=0;!he[he.length-1]._isolate;)he.pop();var Ft=he[he.length-1]._isolInitIndex;null!=Ft&&(ve.set(Ft,Be),ve.set(Be,Ft)),he.pop(),Je--}Y[Be]=(se=he[he.length-1])._level,se._override&&re(Be,se._override)}else Ge&O?(0===ke&&(Ce>0?Ce--:!se._isolate&&he.length>1&&(he.pop(),se=he[he.length-1])),Y[Be]=se._level):Ge&D&&(Y[Be]=Q.level);else Y[Be]=se._level,se._override&&Ge!==ce&&re(Be,se._override)}for(var Fe=[],Ne=null,je=Q.start;je<=Q.end;je++){var Ze=U[je];if(!(Ze&n)){var De=Y[je],Xe=Ze&e,nt=Ze===A;Ne&&De===Ne._level?(Ne._end=je,Ne._endsWithIsolInit=Xe):Fe.push(Ne={_start:je,_end:je,_level:De,_startsWithPDI:nt,_endsWithIsolInit:Xe})}}for(var We=[],Re=0;Re<Fe.length;Re++){var Ke=Fe[Re];if(!Ke._startsWithPDI||Ke._startsWithPDI&&!ve.has(Ke._start)){for(var st=[Ne=Ke],et=void 0;Ne&&Ne._endsWithIsolInit&&null!=(et=ve.get(Ne._end));)for(var lt=Re+1;lt<Fe.length;lt++)if(Fe[lt]._start===et){st.push(Ne=Fe[lt]);break}for(var St=[],vr=0;vr<st.length;vr++)for(var bo=st[vr],br=bo._start;br<=bo._end;br++)St.push(br);for(var mi=Y[St[0]],yo=Q.level,Yt=St[0]-1;Yt>=0;Yt--)if(!(U[Yt]&n)){yo=Y[Yt];break}var yr=St[St.length-1],vi=Y[yr],So=Q.level;if(!(U[yr]&e))for(var Jt=yr+1;Jt<=Q.end;Jt++)if(!(U[Jt]&n)){So=Y[Jt];break}We.push({_seqIndices:St,_sosType:Math.max(yo,mi)%2?M:k,_eosType:Math.max(So,vi)%2?M:k})}}for(var Sr=0;Sr<We.length;Sr++){var _r=We[Sr],oe=_r._seqIndices,Dt=_r._sosType,bi=_r._eosType;if(K.get(fe))for(var Zt=0;Zt<oe.length;Zt++){var _o=oe[Zt];if(U[_o]&fe){for(var xr=Dt,Kt=Zt-1;Kt>=0;Kt--)if(!(U[oe[Kt]]&n)){xr=U[oe[Kt]];break}re(_o,xr&(e|A)?W:xr)}}if(K.get(j))for(var qt=0;qt<oe.length;qt++){var xo=oe[qt];if(U[xo]&j)for(var $t=qt-1;$t>=-1;$t--){var Co=-1===$t?Dt:U[oe[$t]];if(Co&s){Co===B&&re(xo,N);break}}}if(K.get(B))for(var Cr=0;Cr<oe.length;Cr++){var No=oe[Cr];U[No]&B&&re(No,M)}if(K.get(ee)||K.get(z))for(var zt=1;zt<oe.length-1;zt++){var Nr=oe[zt];if(U[Nr]&(ee|z)){for(var _t=0,Tr=0,Mr=zt-1;Mr>=0&&(_t=U[oe[Mr]])&n;Mr--);for(var wr=zt+1;wr<oe.length&&(Tr=U[oe[wr]])&n;wr++);_t===Tr&&(U[Nr]===ee?_t===j:_t&(j|N))&&re(Nr,_t)}}if(K.get(j))for(var kt=0;kt<oe.length;kt++)if(U[oe[kt]]&j){for(var er=kt-1;er>=0&&U[oe[er]]&(J|n);er--)re(oe[er],j);for(var tr=kt+1;tr<oe.length&&U[oe[tr]]&(J|n);tr++)re(oe[tr],j)}if(K.get(J)||K.get(ee)||K.get(z))for(var Pt=0;Pt<oe.length;Pt++){var To=oe[Pt];if(U[To]&(J|ee|z)){re(To,W);for(var rr=Pt-1;rr>=0&&U[oe[rr]]&n;rr--)re(oe[rr],W);for(var or=Pt+1;or<oe.length&&U[oe[or]]&n;or++)re(oe[or],W)}}if(K.get(j))for(var Fr=0,Mo=Dt;Fr<oe.length;Fr++){var wo=oe[Fr],Dr=U[wo];Dr&j?Mo===k&&re(wo,k):Dr&s&&(Mo=Dr)}if(K.get(i)){for(var Bt=M|j|N,Fo=Bt|k,nr=[],xt=[],Ct=0;Ct<oe.length;Ct++)if(U[oe[Ct]]&i){var Gt=G[oe[Ct]],Do=void 0;if(null!==p(Gt)){if(!(xt.length<63))break;xt.push({char:Gt,seqIndex:Ct})}else if(null!==(Do=_(Gt)))for(var At=xt.length-1;At>=0;At--){var zr=xt[At].char;if(zr===Do||zr===_(T(Gt))||p(T(zr))===Gt){nr.push([xt[At].seqIndex,Ct]),xt.length=At;break}}}nr.sort(function(He,rt){return He[0]-rt[0]});for(var kr=0;kr<nr.length;kr++){for(var zo=nr[kr],Ut=zo[0],ir=zo[1],ko=!1,tt=0,Pr=Ut+1;Pr<ir;Pr++){var Br=oe[Pr];if(U[Br]&Fo){ko=!0;var Po=U[Br]&Bt?M:k;if(Po===Nt(Br)){tt=Po;break}}}if(ko&&!tt){tt=Dt;for(var Gr=Ut-1;Gr>=0;Gr--){var ar=oe[Gr];if(U[ar]&Fo){var Bo=U[ar]&Bt?M:k;tt=Bo!==Nt(ar)?Bo:Nt(ar);break}}}if(tt){if(U[oe[Ut]]=U[oe[ir]]=tt,tt!==Nt(oe[Ut]))for(var Ot=Ut+1;Ot<oe.length;Ot++)if(!(U[oe[Ot]]&n)){d(G[oe[Ot]])&fe&&(U[oe[Ot]]=tt);break}if(tt!==Nt(oe[ir]))for(var Lt=ir+1;Lt<oe.length;Lt++)if(!(U[oe[Lt]]&n)){d(G[oe[Lt]])&fe&&(U[oe[Lt]]=tt);break}}}for(var ct=0;ct<oe.length;ct++)if(U[oe[ct]]&i){for(var Go=ct,Ar=ct,Ur=Dt,Et=ct-1;Et>=0;Et--){if(!(U[oe[Et]]&n)){Ur=U[oe[Et]]&Bt?M:k;break}Go=Et}for(var Ao=bi,Rt=ct+1;Rt<oe.length;Rt++){if(!(U[oe[Rt]]&(i|n))){Ao=U[oe[Rt]]&Bt?M:k;break}Ar=Rt}for(var sr=Go;sr<=Ar;sr++)U[oe[sr]]=Ur===Ao?Ur:Nt(oe[sr]);ct=Ar}}}for(var qe=Q.start;qe<=Q.end;qe++){var lr=U[qe];if(1&Y[qe]?lr&(k|j|N)&&Y[qe]++:lr&M?Y[qe]++:lr&(N|j)&&(Y[qe]+=2),lr&n&&(Y[qe]=0===qe?Q.level:Y[qe-1]),qe===Q.end||d(G[qe])&(q|D))for(var cr=qe;cr>=0&&d(G[cr])&a;cr--)Y[cr]=Q.level}}return{levels:Y,paragraphs:ye};function Uo(He,rt){for(var Qe=He;Qe<G.length;Qe++){var ut=U[Qe];if(ut&(M|B))return 1;if(ut&(D|k)||rt&&ut===A)return 0;if(ut&e){var Oo=_i(Qe);Qe=-1===Oo?G.length:Oo}}return 0}function _i(He){for(var rt=1,Qe=He+1;Qe<G.length;Qe++){var ut=U[Qe];if(ut&D)break;if(ut&A){if(0==--rt)return Qe}else ut&e&&rt++}return-1}function Nt(He){return 1&Y[He]?M:k}},o.getMirroredCharacter=_e,o.getMirroredCharactersMap=function pe(G,ie,Z,U){var be=G.length;Z=Math.max(0,null==Z?0:+Z),U=Math.min(be-1,null==U?be-1:+U);for(var K=new Map,re=Z;re<=U;re++)if(1&ie[re]){var Y=_e(G[re]);null!==Y&&K.set(re,Y)}return K},o.getReorderSegments=te,o.getReorderedIndices=ge,o.getReorderedString=function ae(G,ie,Z,U){var be=ge(G,ie,Z,U),K=[].concat(G);return be.forEach(function(re,Y){K[Y]=(1&ie.levels[re]?_e(G[re]):null)||G[re]}),K.join("")},o.openingToClosingBracket=p,Object.defineProperty(o,"__esModule",{value:!0}),o}({})}],init(c,o,r,u){const{defaultFontURL:t}=c;return r(o,u(),{defaultFontURL:t})}}),Wo],init:(c,o)=>function(r){const u=new o;return c.typeset(r,u.resolve),u},getTransferables(c){const o=[c.glyphPositions.buffer,c.glyphIds.buffer];return c.caretPositions&&o.push(c.caretPositions.buffer),c.glyphColors&&o.push(c.glyphColors.buffer),o}}),_n=(()=>{const c={},u="aTroikaGlyphIndex";class e extends $.L5s{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new $.aLr,this.boundingBox=new $.ZzF}computeBoundingSphere(){}computeBoundingBox(){}setSide(a){const l=this.getIndex().count;this.setDrawRange(a===$._Li?l/2:0,a===$.ehD?l:l/2)}set detail(a){if(a!==this._detail){this._detail=a,("number"!=typeof a||a<1)&&(a=1);let l=function o(n){let a=c[n];if(!a){const l=new $.BKK(1,1,n,n),f=l.clone(),d=l.attributes,h=f.attributes,C=new $.u9r,x=d.uv.count;for(let S=0;S<x;S++)h.position.array[3*S]*=-1,h.normal.array[3*S+2]*=-1;["position","normal","uv"].forEach(S=>{C.setAttribute(S,new $.a$l([...d[S].array,...h[S].array],d[S].itemSize))}),C.setIndex([...l.index.array,...f.index.array.map(S=>S+x)]),C.translate(.5,.5,0),a=c[n]=C}return a}(a);["position","normal","uv"].forEach(f=>{this.attributes[f]=l.attributes[f].clone()}),this.setIndex(l.getIndex().clone())}}get detail(){return this._detail}set curveRadius(a){a!==this._curveRadius&&(this._curveRadius=a,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(a,l,f,d,h){s(this,"aTroikaGlyphBounds",a,4),s(this,u,l,1),s(this,"aTroikaGlyphColor",h,3),this._blockBounds=f,this._chunkedBounds=d,i(this,l.length),this._updateBounds()}_updateBounds(){const a=this._blockBounds;if(a){const{curveRadius:l,boundingBox:f}=this;if(l){const{PI:d,floor:h,min:C,max:x,sin:S,cos:m}=Math,g=d/2,y=2*d,p=Math.abs(l),_=a[0]/p,T=a[2]/p,k=h((_+g)/y)!==h((T+g)/y)?-p:C(S(_)*p,S(T)*p),M=h((_-g)/y)!==h((T-g)/y)?p:x(S(_)*p,S(T)*p),j=h((_+d)/y)!==h((T+d)/y)?2*p:x(p-m(_)*p,p-m(T)*p);f.min.set(k,a[1],l<0?-j:0),f.max.set(M,a[3],l<0?0:j)}else f.min.set(a[0],a[1],0),f.max.set(a[2],a[3],0);f.getBoundingSphere(this.boundingSphere)}}applyClipRect(a){let l=this.getAttribute(u).count,f=this._chunkedBounds;if(f)for(let d=f.length;d--;){l=f[d].end;let h=f[d].rect;if(h[1]<a.w&&h[3]>a.y&&h[0]<a.z&&h[2]>a.x)break}i(this,l)}}function s(n,a,l,f){const d=n.getAttribute(a);l?d&&d.array.length===l.length?(d.array.set(l),d.needsUpdate=!0):(n.setAttribute(a,new $.lb7(l,f)),delete n._maxInstanceCount,n.dispose()):d&&n.deleteAttribute(a)}function i(n,a){n[n.hasOwnProperty("instanceCount")?"instanceCount":"maxInstancedCount"]=a}return e.prototype.setAttribute||(e.prototype.setAttribute=function(n,a){return this.attributes[n]=a,this}),e})(),wn=(()=>{const c=new $.vBJ({color:16777215,side:$.ehD,transparent:!0}),o=8421504,r=new $.yGw,u=new $.Pa4,t=new $.Pa4,e=[],s=new $.Pa4,i="+x+y";function n(m){return Array.isArray(m)?m[0]:m}let a=()=>{const m=new $.Kj0(new $.BKK(1,1),c);return a=()=>m,m},l=()=>{const m=new $.Kj0(new $.BKK(1,1,32,1),c);return l=()=>m,m};const f={type:"syncstart"},d={type:"synccomplete"},h=["font","fontSize","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],C=h.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");class x extends $.Kj0{constructor(){super(new _n,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.fontSize=.1,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=o,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=i,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(g){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(g):(this._isSyncing=!0,this.dispatchEvent(f),ro({text:this.text,font:this.font,fontSize:this.fontSize||.1,letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF},y=>{this._isSyncing=!1,this._textRenderInfo=y,this.geometry.updateGlyphs(y.glyphBounds,y.glyphAtlasIndices,y.blockBounds,y.chunkedBounds,y.glyphColors);const p=this._queuedSyncs;p&&(this._queuedSyncs=null,this._needsSync=!0,this.sync(()=>{p.forEach(_=>_&&_())})),this.dispatchEvent(d),g&&g()})))}onBeforeRender(g,y,p,_,T,k){this.sync(),T.isTroikaTextMaterial&&this._prepareForRender(T),T._hadOwnSide=T.hasOwnProperty("side"),this.geometry.setSide(T._actualSide=T.side),T.side=$.Wl3}onAfterRender(g,y,p,_,T,k){T._hadOwnSide?T.side=T._actualSide:delete T.side}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}get material(){let g=this._derivedMaterial;const y=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=c.clone());if((!g||g.baseMaterial!==y)&&(g=this._derivedMaterial=function Mn(c){const o=jt(c,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new $.FM8},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new $.Ltg(0,0,0,0)},uTroikaClipRect:{value:new $.Ltg(0,0,0,0)},uTroikaDistanceOffset:{value:0},uTroikaOutlineOpacity:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new $.FM8},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new $.Ilk},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new $.Vkp},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:"\nuniform vec2 uTroikaSDFTextureSize;\nuniform float uTroikaSDFGlyphSize;\nuniform vec4 uTroikaTotalBounds;\nuniform vec4 uTroikaClipRect;\nuniform mat3 uTroikaOrient;\nuniform bool uTroikaUseGlyphColors;\nuniform float uTroikaDistanceOffset;\nuniform float uTroikaBlurRadius;\nuniform vec2 uTroikaPositionOffset;\nuniform float uTroikaCurveRadius;\nattribute vec4 aTroikaGlyphBounds;\nattribute float aTroikaGlyphIndex;\nattribute vec3 aTroikaGlyphColor;\nvarying vec2 vTroikaGlyphUV;\nvarying vec4 vTroikaTextureUVBounds;\nvarying float vTroikaTextureChannel;\nvarying vec3 vTroikaGlyphColor;\nvarying vec2 vTroikaGlyphDimensions;\n",vertexTransform:"\nvec4 bounds = aTroikaGlyphBounds;\nbounds.xz += uTroikaPositionOffset.x;\nbounds.yw -= uTroikaPositionOffset.y;\n\nvec4 outlineBounds = vec4(\n  bounds.xy - uTroikaDistanceOffset - uTroikaBlurRadius,\n  bounds.zw + uTroikaDistanceOffset + uTroikaBlurRadius\n);\nvec4 clippedBounds = vec4(\n  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),\n  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)\n);\n\nvec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);\n\nposition.xy = mix(bounds.xy, bounds.zw, clippedXY);\n\nuv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);\n\nfloat rad = uTroikaCurveRadius;\nif (rad != 0.0) {\n  float angle = position.x / rad;\n  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);\n  normal.xz = vec2(sin(angle), cos(angle));\n}\n  \nposition = uTroikaOrient * position;\nnormal = uTroikaOrient * normal;\n\nvTroikaGlyphUV = clippedXY.xy;\nvTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);\n\n\nfloat txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;\nvec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;\nvec2 txStartUV = txUvPerSquare * vec2(\n  mod(floor(aTroikaGlyphIndex / 4.0), txCols),\n  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)\n);\nvTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);\nvTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);\n",fragmentDefs:"\nuniform sampler2D uTroikaSDFTexture;\nuniform vec2 uTroikaSDFTextureSize;\nuniform float uTroikaSDFGlyphSize;\nuniform float uTroikaSDFExponent;\nuniform float uTroikaDistanceOffset;\nuniform float uTroikaFillOpacity;\nuniform float uTroikaOutlineOpacity;\nuniform float uTroikaBlurRadius;\nuniform vec3 uTroikaStrokeColor;\nuniform float uTroikaStrokeWidth;\nuniform float uTroikaStrokeOpacity;\nuniform bool uTroikaSDFDebug;\nvarying vec2 vTroikaGlyphUV;\nvarying vec4 vTroikaTextureUVBounds;\nvarying float vTroikaTextureChannel;\nvarying vec2 vTroikaGlyphDimensions;\n\nfloat troikaSdfValueToSignedDistance(float alpha) {\n  // Inverse of exponential encoding in webgl-sdf-generator\n  \n  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);\n  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;\n  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);\n  return signedDist;\n}\n\nfloat troikaGlyphUvToSdfValue(vec2 glyphUV) {\n  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);\n  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);\n  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1\n  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;\n}\n\nfloat troikaGlyphUvToDistance(vec2 uv) {\n  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));\n}\n\nfloat troikaGetAADist() {\n  \n  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300\n  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;\n  #else\n  return vTroikaGlyphDimensions.x / 64.0;\n  #endif\n}\n\nfloat troikaGetFragDistValue() {\n  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);\n  float distance = troikaGlyphUvToDistance(clampedGlyphUV);\n \n  // Extrapolate distance when outside bounds:\n  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : \n    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);\n\n  \n\n  return distance;\n}\n\nfloat troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {\n  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)\n  float alpha = step(-distanceOffset, -distance);\n  #else\n\n  float alpha = smoothstep(\n    distanceOffset + aaDist,\n    distanceOffset - aaDist,\n    distance\n  );\n  #endif\n\n  return alpha;\n}\n",fragmentColorTransform:"\nfloat aaDist = troikaGetAADist();\nfloat fragDistance = troikaGetFragDistValue();\nfloat edgeAlpha = uTroikaSDFDebug ?\n  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :\n  troikaGetEdgeAlpha(fragDistance, uTroikaDistanceOffset, max(aaDist, uTroikaBlurRadius));\n\n#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)\nvec4 fillRGBA = gl_FragColor;\nfillRGBA.a *= uTroikaFillOpacity;\nvec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);\nif (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;\ngl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(\n  -uTroikaStrokeWidth - aaDist,\n  -uTroikaStrokeWidth + aaDist,\n  fragDistance\n));\ngl_FragColor.a *= edgeAlpha;\n#endif\n\nif (edgeAlpha == 0.0) {\n  discard;\n}\n",customRewriter({vertexShader:r,fragmentShader:u}){let t=/\buniform\s+vec3\s+diffuse\b/;return t.test(u)&&(u=u.replace(t,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),t.test(r)||(r=r.replace(Hr,"uniform vec3 diffuse;\n$&\nvTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;\n"))),{vertexShader:r,fragmentShader:u}}});return o.transparent=!0,Object.defineProperties(o,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),o}(y),y.addEventListener("dispose",function p(){y.removeEventListener("dispose",p),g.dispose()})),this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY){let p=g._outlineMtl;return p||(p=g._outlineMtl=Object.create(g,{id:{value:g.id+.1}}),p.isTextOutlineMaterial=!0,p.depthWrite=!1,p.map=null,g.addEventListener("dispose",function _(){g.removeEventListener("dispose",_),p.dispose()})),[p,g]}return g}set material(g){g&&g.isTroikaTextMaterial?(this._derivedMaterial=g,this._baseMaterial=g.baseMaterial):this._baseMaterial=g}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(g){this.geometry.detail=g}get curveRadius(){return this.geometry.curveRadius}set curveRadius(g){this.geometry.curveRadius=g}get customDepthMaterial(){return n(this.material).getDepthMaterial()}get customDistanceMaterial(){return n(this.material).getDistanceMaterial()}_prepareForRender(g){const y=g.isTextOutlineMaterial,p=g.uniforms,_=this.textRenderInfo;if(_){const{sdfTexture:M,blockBounds:j}=_;p.uTroikaSDFTexture.value=M,p.uTroikaSDFTextureSize.value.set(M.image.width,M.image.height),p.uTroikaSDFGlyphSize.value=_.sdfGlyphSize,p.uTroikaSDFExponent.value=_.sdfExponent,p.uTroikaTotalBounds.value.fromArray(j),p.uTroikaUseGlyphColors.value=!y&&!!_.glyphColors;let z,D,q,ee=0,J=0,N=0,W=0,ce=0;if(y){let{outlineWidth:B,outlineOffsetX:I,outlineOffsetY:v,outlineBlur:F,outlineOpacity:E}=this;ee=this._parsePercent(B)||0,J=Math.max(0,this._parsePercent(F)||0),z=E,W=this._parsePercent(I)||0,ce=this._parsePercent(v)||0}else N=Math.max(0,this._parsePercent(this.strokeWidth)||0),N&&(q=this.strokeColor,p.uTroikaStrokeColor.value.set(q??o),D=this.strokeOpacity,null==D&&(D=1)),z=this.fillOpacity;p.uTroikaDistanceOffset.value=ee,p.uTroikaPositionOffset.value.set(W,ce),p.uTroikaBlurRadius.value=J,p.uTroikaStrokeWidth.value=N,p.uTroikaStrokeOpacity.value=D,p.uTroikaFillOpacity.value=z??1,p.uTroikaCurveRadius.value=this.curveRadius||0;let fe=this.clipRect;if(fe&&Array.isArray(fe)&&4===fe.length)p.uTroikaClipRect.value.fromArray(fe);else{const B=100*(this.fontSize||.1);p.uTroikaClipRect.value.set(j[0]-B,j[1]-B,j[2]+B,j[3]+B)}this.geometry.applyClipRect(p.uTroikaClipRect.value)}p.uTroikaSDFDebug.value=!!this.debugSDF,g.polygonOffset=!!this.depthOffset,g.polygonOffsetFactor=g.polygonOffsetUnits=this.depthOffset||0;const T=y?this.outlineColor||0:this.color;if(null==T)delete g.color;else{const M=g.hasOwnProperty("color")?g.color:g.color=new $.Ilk;(T!==M._input||"object"==typeof T)&&M.set(M._input=T)}let k=this.orientation||i;if(k!==g._orientation){let M=p.uTroikaOrient.value;k=k.replace(/[^-+xyz]/g,"");let j=k!==i&&k.match(/^([-+])([xyz])([-+])([xyz])$/);if(j){let[,ee,J,N,z]=j;u.set(0,0,0)[J]="-"===ee?1:-1,t.set(0,0,0)[z]="-"===N?-1:1,r.lookAt(s,u.cross(t),t),M.setFromMatrix4(r)}else M.identity();g._orientation=k}}_parsePercent(g){if("string"==typeof g){let y=g.match(/^(-?[\d.]+)%$/),p=y?parseFloat(y[1]):NaN;g=(isNaN(p)?0:p/100)*this.fontSize}return g}localPositionToTextCoords(g,y=new $.FM8){y.copy(g);const p=this.curveRadius;return p&&(y.x=Math.atan2(g.x,Math.abs(p)-Math.abs(g.z))*Math.abs(p)),y}worldPositionToTextCoords(g,y=new $.FM8){return u.copy(g),this.localPositionToTextCoords(this.worldToLocal(u),y)}raycast(g,y){const{textRenderInfo:p,curveRadius:_}=this;if(p){const T=p.blockBounds,k=_?l():a(),M=k.geometry,{position:j,uv:ee}=M.attributes;for(let J=0;J<ee.count;J++){let N=T[0]+ee.getX(J)*(T[2]-T[0]);const z=T[1]+ee.getY(J)*(T[3]-T[1]);let D=0;_&&(D=_-Math.cos(N/_)*_,N=Math.sin(N/_)*_),j.setXYZ(J,N,z,D)}M.boundingSphere=this.geometry.boundingSphere,M.boundingBox=this.geometry.boundingBox,k.matrixWorld=this.matrixWorld,k.material.side=this.material.side,e.length=0,k.raycast(g,e);for(let J=0;J<e.length;J++)e[J].object=this,y.push(e[J])}}copy(g){const y=this.geometry;return super.copy(g),this.geometry=y,C.forEach(p=>{this[p]=g[p]}),this}clone(){return(new this.constructor).copy(this)}}h.forEach(m=>{const g="_private_"+m;Object.defineProperty(x.prototype,m,{get(){return this[g]},set(y){y!==this[g]&&(this[g]=y,this._needsSync=!0)}})});let S=!1;return Object.defineProperty(x.prototype,"anchor",{get(){return this._deprecated_anchor},set(m){this._deprecated_anchor=m,S||(console.warn("TextMesh: `anchor` has been deprecated; use `anchorX` and `anchorY` instead."),S=!0),Array.isArray(m)?(this.anchorX=100*(+m[0]||0)+"%",this.anchorY=100*(+m[1]||0)+"%"):this.anchorX=this.anchorY=0}}),x})(),Bn=function(c){return{gizmo:c}};function Gn(c,o){if(1&c&&b.GkF(0,6),2&c){const r=b.oxw(3);b.Q6J("ngTemplateOutlet",r.content.templateRef)("ngTemplateOutletContext",b.VKq(2,Bn,r.instance))}}const An=function(){return[0,0,200]};function Un(c,o){if(1&c){const r=b.EpF();b.TgZ(0,"ngt-group",3),b.NdJ("beforeRender",function(t){b.CHM(r);const e=b.oxw(2);return b.KtG(e.beforeRender.emit(t))}),b.ALo(1,"async"),b.YNc(2,Gn,1,4,"ng-container",4),b.qZA(),b._UZ(3,"ngt-soba-orthographic-camera",5)}if(2&c){const r=b.oxw(2);b.Q6J("ngtObjectPassThrough",r)("position",b.lcZ(1,5,r.position$)),b.xp6(2),b.Q6J("ngIf",r.content),b.xp6(1),b.Q6J("ref",r.virtualCamera)("position",b.DdM(7,An))}}function On(c,o){if(1&c&&(b.TgZ(0,"ngt-portal",1),b.YNc(1,Un,4,8,"ng-template",2),b.qZA()),2&c){const r=b.oxw();b.Q6J("ref",r.virtualScene)}}const Ln=["hover","","index",""],En=function(c){return["material",c]};function Rn(c,o){if(1&c&&b._UZ(0,"ngt-soba-gizmo-face-material",2),2&c){const r=o.$implicit,u=b.oxw();b.Q6J("hover",u.hover===r)("index",r)("ngtSobaGizmoViewCubeGenericPassThrough",u)}}const In=["dimensions","","position",""];function Vn(c,o){if(1&c&&b._UZ(0,"ngt-soba-gizmo-edge-cube",5),2&c){const r=o.$implicit,u=o.index,t=b.oxw();b.Q6J("position",r)("dimensions",t.edgeDimensions[u])("ngtSobaGizmoViewCubeGenericPassThrough",t)}}function jn(c,o){if(1&c&&b._UZ(0,"ngt-soba-gizmo-edge-cube",5),2&c){const r=o.$implicit,u=b.oxw();b.Q6J("position",r)("dimensions",u.cornerDimensions)("ngtSobaGizmoViewCubeGenericPassThrough",u)}}const ri=["text",""],oi=function(c){return{textMesh:c}};function ni(c,o){if(1&c&&b.GkF(0,2),2&c){const r=b.oxw();b.Q6J("ngTemplateOutlet",r.content.templateRef)("ngTemplateOutletContext",b.VKq(2,oi,r.instance))}}let lo=(()=>{class c{constructor(r){this.templateRef=r}static ngTemplateContextGuard(r,u){return!0}}return c.\u0275fac=function(r){return new(r||c)(b.Y36(b.Rgc))},c.\u0275dir=b.lG2({type:c,selectors:[["ng-template","ngt-soba-gizmo-helper-content",""]],standalone:!0}),c})();const ii=2*Math.PI,co=new $.Tme,uo=(0,L.Sy)($.yGw),[yt,mr]=[(0,L.Sy)($._fP),(0,L.Sy)($._fP)],fo=(0,L.Sy)($.Pa4),ho=(0,L.Sy)($.Pa4);let go=(()=>{class c extends L.Kw{constructor(){super(...arguments),this.ready$=(0,mt.H)(250).pipe((0,Ye.U)(()=>!0)),this.beforeRender=new b.vpe,this.update=new b.vpe,this.position$=this.select(this.select(r=>r.margin),this.select(r=>r.alignment),this.store.select(r=>r.size),([r,u],t,e)=>{const s=t.endsWith("-left")?-e.width/2+r:e.width/2-r,i=t.startsWith("top-")?e.height/2-u:-e.height/2+u;return(0,L.Sy)($.Pa4,[s,i,0])}),this.animating=!1,this.focusPoint=(0,L.Sy)($.Pa4,[0,0,0]),this.radius=0,this.switchSceneBackground=this.effect((0,L.oe)(()=>{let r;const u=this.store.get(e=>e.scene),t=this.get(e=>e.virtualScene);return u.background&&(r=u.background,u.background=null,t.value.background=r),()=>{r&&(u.background=r)}})),this.setBeforeRender=this.effect((0,L.oe)(()=>{const r=this.get(t=>t.renderPriority),u=this.store.get(t=>t.gl);return this.store.registerBeforeRender({callback:({delta:t})=>{const e=this.instance,{camera:s,controls:i,invalidate:n}=this.store.get(),{virtualScene:a,virtualCamera:l,autoClear:f}=this.get();e.value&&a.value&&l.value&&(this.animating&&(yt.angleTo(mr)<.01?this.animating=!1:(yt.rotateTowards(mr,t*ii),s.position.set(0,0,1).applyQuaternion(yt).multiplyScalar(this.radius).add(this.focusPoint),s.up.set(0,1,0).applyQuaternion(yt).normalize(),s.quaternion.copy(yt),this.update.observed?this.update.emit():i&&i.update(),n())),uo.copy(s.matrix).invert(),e.value?.quaternion.setFromRotationMatrix(uo),f&&(u.autoClear=!1),u.clearDepth(),u.render(a.value,l.value))},priority:r})})),this.setRaycast=this.effect((0,Le.b)(r=>{const u=this.store.get(e=>e.pointer),t=new $.iMs;this.set({raycast:function(e,s){t.setFromCamera(u,r);const i=this.constructor.prototype.raycast.bind(this);i&&i(t,s)}})})),this.tweenCamera=this.effect((0,Le.b)(r=>{this.animating=!0;const{controls:u,camera:t,invalidate:e}=this.store.get();u&&(this.focusPoint=u.target),this.radius=t.position.distanceTo(fo),yt.copy(t.quaternion),ho.copy(r).multiplyScalar(this.radius).add(fo),co.lookAt(ho),mr.copy(co.quaternion),e()}))}set alignment(r){this.set({alignment:r})}set margin(r){this.set({margin:r})}set renderPriority(r){this.set({renderPriority:r})}set autoClear(r){this.set({autoClear:(0,L.Ig)(r)})}get virtualScene(){return this.get(r=>r.virtualScene)}get virtualCamera(){return this.get(r=>r.virtualCamera)}preInit(){super.preInit(),this.set(r=>({virtualCamera:new L.Rl,virtualScene:new L.Rl((0,L.Pl)(new $.xsS,()=>this.store.get())),alignment:r.alignment??"bottom-right",margin:r.margin??[80,80],renderPriority:r.renderPriority??0,autoClear:r.autoClear??!0}))}ngOnInit(){super.ngOnInit(),this.zone.runOutsideAngular(()=>{this.store.onReady(()=>{this.switchSceneBackground(),this.setBeforeRender(),this.setRaycast(this.get(r=>r.virtualCamera).pipe((0,ne.h)(r=>!!r)))})})}}return c.\u0275fac=function(){let o;return function(u){return(o||(o=b.n5z(c)))(u||c)}}(),c.\u0275cmp=b.Xpm({type:c,selectors:[["ngt-soba-gizmo-helper"]],contentQueries:function(r,u,t){if(1&r&&b.Suo(t,lo,5),2&r){let e;b.iGM(e=b.CRH())&&(u.content=e.first)}},inputs:{alignment:"alignment",margin:"margin",renderPriority:"renderPriority",autoClear:"autoClear"},outputs:{beforeRender:"beforeRender",update:"update"},standalone:!0,features:[b._Bn([(0,L.RD)(c),(0,L.wY)(c),(0,L.Hm)(c)]),b.qOj,b.jDz],decls:2,vars:3,consts:[[3,"ref",4,"ngIf"],[3,"ref"],["ngt-portal-content",""],[3,"ngtObjectPassThrough","position","beforeRender"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngIf"],[3,"ref","position"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(r,u){1&r&&(b.YNc(0,On,2,1,"ngt-portal",0),b.ALo(1,"async")),2&r&&b.Q6J("ngIf",b.lcZ(1,1,u.ready$))},dependencies:[L.WS,L.ZQ,we.U,L.VL,Ue,Ee.O5,Ee.tP,Ee.Ov],encapsulation:2,changeDetection:0}),c})();const po=c=>(0,L.Sy)($.Pa4,c).multiplyScalar(.38),ai=["Right","Left","Top","Bottom","Front","Back"],si=[[1,1,1],[1,1,-1],[1,-1,1],[1,-1,-1],[-1,1,1],[-1,1,-1],[-1,-1,1],[-1,-1,-1]].map(po),li=[.25,.25,.25],mo=[[1,1,0],[1,0,1],[1,0,-1],[1,-1,0],[0,1,1],[0,1,-1],[0,-1,1],[0,-1,-1],[-1,1,0],[-1,0,1],[-1,0,-1],[-1,-1,0]].map(po),ci=mo.map(c=>c.toArray().map(o=>0==o?.5:.25));let ot=(()=>{class c extends L.WZ{constructor(){if(super(),this.click=new b.vpe,this.gizmoHelper=(0,b.f3M)(go,{optional:!0}),!this.gizmoHelper)throw new Error("<ngt-soba-gizmo-viewcube> can only be used in <ngt-soba-gizmo-helper>")}set font(r){this.set({font:r})}get font(){return this.get(r=>r.font)}set opacity(r){this.set({opacity:(0,L.su)(r)})}get opacity(){return this.get(r=>r.opacity)}set color(r){this.set({color:r})}get color(){return this.get(r=>r.color)}set hoverColor(r){this.set({hoverColor:r})}get hoverColor(){return this.get(r=>r.hoverColor)}set textColor(r){this.set({textColor:r})}get textColor(){return this.get(r=>r.textColor)}set strokeColor(r){this.set({strokeColor:r})}get strokeColor(){return this.get(r=>r.strokeColor)}set faces(r){this.set({faces:r})}get faces(){return this.get(r=>r.faces)}get raycast(){return this.gizmoHelper.get(r=>r.raycast)}preInit(){super.preInit(),this.set(r=>({font:r.font??"20px Inter var, Arial, sans-serif",faces:r.faces??ai,color:r.color??"#f0f0f0",hoverColor:r.hoverColor??"#999",textColor:r.textColor??"black",strokeColor:r.strokeColor??"black",opacity:r.opacity??1}))}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275dir=b.lG2({type:c,inputs:{font:"font",opacity:"opacity",color:"color",hoverColor:"hoverColor",textColor:"textColor",strokeColor:"strokeColor",faces:"faces"},outputs:{click:"click"},features:[b.qOj]}),c})(),vo=(()=>{class c{constructor(r){this.host=r}set ngtSobaGizmoViewCubeGenericPassThrough(r){this.assertWrapper(r),r.select(r.select(u=>u.font).pipe((0,L.Xb)()),r.select(u=>u.opacity).pipe((0,L.Xb)()),r.select(u=>u.color).pipe((0,L.Xb)()),r.select(u=>u.hoverColor).pipe((0,L.Xb)()),r.select(u=>u.textColor).pipe((0,L.Xb)()),r.select(u=>u.strokeColor).pipe((0,L.Xb)()),r.select(u=>u.faces).pipe((0,L.Xb)())).pipe((0,ze.R)(r.destroy$)).subscribe(()=>{this.host.font=r.font,this.host.opacity=r.opacity,this.host.color=r.color,this.host.hoverColor=r.hoverColor,this.host.textColor=r.textColor,this.host.strokeColor=r.strokeColor,this.host.faces=r.faces}),r.click.observed&&this.host.click.pipe((0,ze.R)(r.destroy$)).subscribe(r.click.emit.bind(r.click))}assertWrapper(r){if(!(r instanceof ot))throw new Error("[NgtSobaGizmoViewCubePassThrough] wrapper is not an NgtSobaGizmoViewCubeGeneric")}}return c.\u0275fac=function(r){return new(r||c)(b.Y36(ot,10))},c.\u0275dir=b.lG2({type:c,selectors:[["","ngtSobaGizmoViewCubeGenericPassThrough",""]],inputs:{ngtSobaGizmoViewCubeGenericPassThrough:"ngtSobaGizmoViewCubeGenericPassThrough"},standalone:!0}),c})(),ui=(()=>{class c extends ot{constructor(){super(...arguments),this.texture$=this.select(this.select(r=>r.index),this.select(r=>r.faces),this.select(r=>r.font),this.select(r=>r.color),this.select(r=>r.textColor),this.select(r=>r.strokeColor),()=>{const r=this.store.get(d=>d.gl),{color:u,strokeColor:t,textColor:e,font:s,faces:i,index:n}=this.get(),a=document.createElement("canvas");a.width=128,a.height=128;const l=a.getContext("2d");l.fillStyle=u,l.fillRect(0,0,a.width,a.height),l.strokeStyle=t,l.strokeRect(0,0,a.width,a.height),l.font=s,l.textAlign="center",l.fillStyle=e,l.fillText(i[n].toUpperCase(),64,76);const f=new $.ROQ(a);return f.encoding=r.outputEncoding,f.anisotropy=r.capabilities.getMaxAnisotropy()||1,f})}set hover(r){this.set({hover:(0,L.Ig)(r)})}get hover(){return this.get(r=>r.hover)}set index(r){this.set({index:(0,L.su)(r)})}get index(){return this.get(r=>r.index)}}return c.\u0275fac=function(){let o;return function(u){return(o||(o=b.n5z(c)))(u||c)}}(),c.\u0275cmp=b.Xpm({type:c,selectors:[["ngt-soba-gizmo-face-material","hover","","index",""]],inputs:{hover:"hover",index:"index"},standalone:!0,features:[b._Bn([{provide:ot,useExisting:c}]),b.qOj,b.jDz],attrs:Ln,decls:2,vars:9,consts:[["transparent","",3,"ref","map","attach","color","opacity"]],template:function(r,u){1&r&&(b._UZ(0,"ngt-mesh-lambert-material",0),b.ALo(1,"async")),2&r&&b.Q6J("ref",u.instance)("map",b.lcZ(1,5,u.texture$))("attach",b.VKq(7,En,""+u.index))("color",u.hover?u.hoverColor:"white")("opacity",u.opacity)},dependencies:[Te.sA,Ee.Ov],encapsulation:2,changeDetection:0}),c})(),fi=(()=>{class c extends ot{constructor(){super(...arguments),this.hover=-1}onClick(r){this.click.observed?this.click.emit(r):(r.stopPropagation(),this.gizmoHelper.tweenCamera(r.face.normal))}onPointerOut(r){r.stopPropagation(),this.hover=-1}onPointerMove(r){r.stopPropagation(),this.hover=Math.floor(r.faceIndex/2)}}return c.\u0275fac=function(){let o;return function(u){return(o||(o=b.n5z(c)))(u||c)}}(),c.\u0275cmp=b.Xpm({type:c,selectors:[["ngt-soba-gizmo-face-cube"]],standalone:!0,features:[b._Bn([{provide:ot,useExisting:c}]),b.qOj,b.jDz],decls:3,vars:2,consts:[[3,"raycast","click","pointerout","pointermove"],[3,"hover","index","ngtSobaGizmoViewCubeGenericPassThrough",4,"ngFor","ngForRepeat"],[3,"hover","index","ngtSobaGizmoViewCubeGenericPassThrough"]],template:function(r,u){1&r&&(b.TgZ(0,"ngt-mesh",0),b.NdJ("click",function(e){return u.onClick(e)})("pointerout",function(e){return u.onPointerOut(e)})("pointermove",function(e){return u.onPointerMove(e)}),b._UZ(1,"ngt-box-geometry"),b.YNc(2,Rn,1,3,"ngt-soba-gizmo-face-material",1),b.qZA()),2&r&&(b.Q6J("raycast",u.raycast),b.xp6(2),b.Q6J("ngForRepeat",6))},dependencies:[Rr.oX,Lr.gB,ui,vo,L.l3],encapsulation:2,changeDetection:0}),c})(),di=(()=>{class c extends ot{constructor(){super(...arguments),this.hover=!1}set dimensions(r){this.set({dimensions:r})}get dimensions(){return this.get(r=>r.dimensions)}set position(r){this.set({position:r})}get position(){return this.get(r=>r.position)}onClick(r){this.click.observed?this.click.emit(r):(r.stopPropagation(),this.gizmoHelper.tweenCamera((0,L.Sy)($.Pa4,this.position)))}onPointerOut(r){r.stopPropagation(),this.hover=!1}onPointerOver(r){r.stopPropagation(),this.hover=!0}}return c.\u0275fac=function(){let o;return function(u){return(o||(o=b.n5z(c)))(u||c)}}(),c.\u0275cmp=b.Xpm({type:c,selectors:[["ngt-soba-gizmo-edge-cube","dimensions","","position",""]],inputs:{dimensions:"dimensions",position:"position"},standalone:!0,features:[b._Bn([{provide:ot,useExisting:c}]),b.qOj,b.jDz],attrs:In,decls:3,vars:6,consts:[[3,"scale","position","raycast","click","pointerout","pointerover"],[3,"args"],["transparent","","opacity","0.6",3,"color","visible"]],template:function(r,u){1&r&&(b.TgZ(0,"ngt-mesh",0),b.NdJ("click",function(e){return u.onClick(e)})("pointerout",function(e){return u.onPointerOut(e)})("pointerover",function(e){return u.onPointerOver(e)}),b._UZ(1,"ngt-box-geometry",1)(2,"ngt-mesh-basic-material",2),b.qZA()),2&r&&(b.Q6J("scale",1.01)("position",u.position)("raycast",u.raycast),b.xp6(1),b.Q6J("args",u.dimensions),b.xp6(1),b.Q6J("color",u.hover?u.hoverColor:"white")("visible",u.hover))},dependencies:[Rr.oX,Lr.gB,Te.$t],encapsulation:2,changeDetection:0}),c})(),hi=(()=>{class c extends ot{constructor(){super(...arguments),this.edges=mo,this.edgeDimensions=ci,this.corners=si,this.cornerDimensions=li}}return c.\u0275fac=function(){let o;return function(u){return(o||(o=b.n5z(c)))(u||c)}}(),c.\u0275cmp=b.Xpm({type:c,selectors:[["ngt-soba-gizmo-viewcube"]],standalone:!0,features:[b._Bn([{provide:ot,useExisting:c}]),b.qOj,b.jDz],decls:6,vars:5,consts:[[3,"scale"],[3,"ngtSobaGizmoViewCubeGenericPassThrough"],[3,"position","dimensions","ngtSobaGizmoViewCubeGenericPassThrough",4,"ngFor","ngForOf"],["intensity","0.5"],["intensity","0.5",3,"position"],[3,"position","dimensions","ngtSobaGizmoViewCubeGenericPassThrough"]],template:function(r,u){1&r&&(b.TgZ(0,"ngt-group",0),b._UZ(1,"ngt-soba-gizmo-face-cube",1),b.YNc(2,Vn,1,3,"ngt-soba-gizmo-edge-cube",2),b.YNc(3,jn,1,3,"ngt-soba-gizmo-edge-cube",2),b._UZ(4,"ngt-ambient-light",3)(5,"ngt-point-light",4),b.qZA()),2&r&&(b.Q6J("scale",60),b.xp6(1),b.Q6J("ngtSobaGizmoViewCubeGenericPassThrough",u),b.xp6(1),b.Q6J("ngForOf",u.edges),b.xp6(1),b.Q6J("ngForOf",u.corners),b.xp6(2),b.Q6J("position",10))},dependencies:[we.U,fi,di,Er.wx,Er.HY,vo,Ee.sg],encapsulation:2,changeDetection:0}),c})();new $.Pa4;let gi=(()=>{class c{constructor(r){this.templateRef=r}static ngTemplateContextGuard(r,u){return!0}}return c.\u0275fac=function(r){return new(r||c)(b.Y36(b.Rgc))},c.\u0275dir=b.lG2({type:c,selectors:[["ng-template","ngt-soba-text-content",""]],standalone:!0}),c})(),pi=(()=>{class c extends L.Kw{constructor(){super(...arguments),this.beforeRender=new b.vpe,this.sync=new b.vpe,this.init=this.effect((0,Ae.z)((0,$e.Q)(It.Z),(0,L.oe)(()=>{const r=this.get(u=>u.material);return r&&(this.textMesh.value.material=L.is.ref(r)?r.value:r,this.textMesh.value.sync()),(r||this.commonMaterial)&&delete this.textMesh.value.color,()=>{this.textMesh.value.dispose()}}))),this.preloadFont=this.effect((0,Le.b)(()=>{const{font:r,characters:u}=this.get();r&&u&&function bn({font:c,characters:o,sdfGlyphSize:r},u){ro({font:c,sdfGlyphSize:r,text:Array.isArray(o)?o.join("\n"):""+o},u)}({font:r,characters:u})}))}set text(r){this.set({text:r})}set characters(r){this.set({characters:r})}set fontSize(r){this.set({fontSize:(0,L.su)(r)})}set maxWidth(r){this.set({maxWidth:(0,L.su)(r)})}set lineHeight(r){this.set({lineHeight:(0,L.su)(r)})}set letterSpacing(r){this.set({letterSpacing:(0,L.su)(r)})}set textAlign(r){this.set({textAlign:r})}set font(r){this.set({font:r})}set anchorX(r){this.set({anchorX:r})}set anchorY(r){this.set({anchorY:r})}set clipRect(r){this.set({clipRect:r})}set depthOffset(r){this.set({depthOffset:(0,L.su)(r)})}set direction(r){this.set({direction:r})}set overflowWrap(r){this.set({overflowWrap:r})}set whiteSpace(r){this.set({whiteSpace:r})}set outlineWidth(r){this.set({outlineWidth:(0,L.su)(r,r)})}set outlineOffsetX(r){this.set({outlineOffsetX:(0,L.su)(r,r)})}set outlineOffsetY(r){this.set({outlineOffsetY:(0,L.su)(r,r)})}set outlineBlur(r){this.set({outlineBlur:(0,L.su)(r,r)})}set outlineColor(r){this.set({outlineColor:r})}set outlineOpacity(r){this.set({outlineOpacity:(0,L.su)(r)})}set strokeWidth(r){this.set({strokeWidth:(0,L.su)(r,r)})}set strokeColor(r){this.set({strokeColor:r})}set strokeOpacity(r){this.set({strokeOpacity:(0,L.su)(r)})}set fillOpacity(r){this.set({fillOpacity:(0,L.su)(r)})}set debugSDF(r){this.set({debugSDF:(0,L.Ig)(r)})}set material(r){this.set({material:r})}get textMesh(){return this.get(r=>r.textMesh)}preInit(){this.set(r=>({textMesh:new L.Rl(new wn),anchorX:r.anchorX||"center",anchorY:r.anchorY||"middle",text:r.text||""}))}ngOnInit(){super.ngOnInit(),this.zone.runOutsideAngular(()=>{this.preloadFont(this.select(this.select(r=>r.fonts),this.select(r=>r.characters)))}),this.store.onReady(()=>{this.init()})}postSetOptions(r){const u=this.store.get(t=>t.invalidate);r.sync(()=>{u(),this.sync.observed&&this.sync.emit(r)})}get optionFields(){return{...super.optionFields,text:!1,characters:!0,fontSize:!0,maxWidth:!0,lineHeight:!0,letterSpacing:!0,textAlign:!0,font:!0,anchorX:!1,anchorY:!1,clipRect:!0,depthOffset:!0,direction:!0,overflowWrap:!0,whiteSpace:!0,outlineWidth:!0,outlineOffsetX:!0,outlineOffsetY:!0,outlineBlur:!0,outlineColor:!0,outlineOpacity:!0,strokeWidth:!0,strokeColor:!0,strokeOpacity:!0,fillOpacity:!0,debugSDF:!0}}}return c.\u0275fac=function(){let o;return function(u){return(o||(o=b.n5z(c)))(u||c)}}(),c.\u0275cmp=b.Xpm({type:c,selectors:[["ngt-soba-text","text",""]],contentQueries:function(r,u,t){if(1&r&&(b.Suo(t,gi,5),b.Suo(t,L.hZ,5)),2&r){let e;b.iGM(e=b.CRH())&&(u.content=e.first),b.iGM(e=b.CRH())&&(u.commonMaterial=e.first)}},inputs:{text:"text",characters:"characters",fontSize:"fontSize",maxWidth:"maxWidth",lineHeight:"lineHeight",letterSpacing:"letterSpacing",textAlign:"textAlign",font:"font",anchorX:"anchorX",anchorY:"anchorY",clipRect:"clipRect",depthOffset:"depthOffset",direction:"direction",overflowWrap:"overflowWrap",whiteSpace:"whiteSpace",outlineWidth:"outlineWidth",outlineOffsetX:"outlineOffsetX",outlineOffsetY:"outlineOffsetY",outlineBlur:"outlineBlur",outlineColor:"outlineColor",outlineOpacity:"outlineOpacity",strokeWidth:"strokeWidth",strokeColor:"strokeColor",strokeOpacity:"strokeOpacity",fillOpacity:"fillOpacity",debugSDF:"debugSDF",material:"material"},outputs:{beforeRender:"beforeRender",sync:"sync"},standalone:!0,features:[b._Bn([(0,L.RD)(c),(0,L.wY)(c,o=>o.textMesh),(0,L.Hm)(c)]),b.qOj,b.jDz],attrs:ri,decls:2,vars:3,consts:[[3,"object","ngtObjectPassThrough","beforeRender"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(r,u){1&r&&(b.TgZ(0,"ngt-primitive",0),b.NdJ("beforeRender",function(e){return u.beforeRender.emit(e)}),b.YNc(1,ni,1,4,"ng-container",1),b.qZA()),2&r&&(b.Q6J("object",u.textMesh)("ngtObjectPassThrough",u),b.xp6(1),b.Q6J("ngIf",u.content))},dependencies:[pt.U,L.VL,Ee.O5,Ee.tP],encapsulation:2,changeDetection:0}),c})()}}]);