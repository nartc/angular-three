"use strict";(self.webpackChunksandbox=self.webpackChunksandbox||[]).push([[472],{6436:(ur,ft,me)=>{me.d(ft,{Z:()=>mt});var L=me(843),Me=me(5994);const Ee={schedule(Le){let oe=requestAnimationFrame,ke=cancelAnimationFrame;const{delegate:Ge}=Ee;Ge&&(oe=Ge.requestAnimationFrame,ke=Ge.cancelAnimationFrame);const $e=oe(It=>{ke=void 0,Le(It)});return new Me.w0(()=>ke?.($e))},requestAnimationFrame(...Le){const{delegate:oe}=Ee;return(oe?.requestAnimationFrame||requestAnimationFrame)(...Le)},cancelAnimationFrame(...Le){const{delegate:oe}=Ee;return(oe?.cancelAnimationFrame||cancelAnimationFrame)(...Le)},delegate:void 0};var $=me(708);const mt=new class pt extends $.v{flush(oe){this._active=!0;const ke=this._scheduled;this._scheduled=void 0;const{actions:Ge}=this;let $e;oe=oe||Ge.shift();do{if($e=oe.execute(oe.state,oe.delay))break}while((oe=Ge[0])&&oe.id===ke&&Ge.shift());if(this._active=!1,$e){for(;(oe=Ge[0])&&oe.id===ke&&Ge.shift();)oe.unsubscribe();throw $e}}}(class v extends L.o{constructor(oe,ke){super(oe,ke),this.scheduler=oe,this.work=ke}requestAsyncId(oe,ke,Ge=0){return null!==Ge&&Ge>0?super.requestAsyncId(oe,ke,Ge):(oe.actions.push(this),oe._scheduled||(oe._scheduled=Ee.requestAnimationFrame(()=>oe.flush(void 0))))}recycleAsyncId(oe,ke,Ge=0){if(null!=Ge&&Ge>0||null==Ge&&this.delay>0)return super.recycleAsyncId(oe,ke,Ge);oe.actions.some($e=>$e.id===ke)||(Ee.cancelAnimationFrame(ke),oe._scheduled=void 0)}})},5188:(ur,ft,me)=>{me.d(ft,{eR:()=>$e,pB:()=>mt});var L=me(3152),Me=me(9796),Ee=me(6128);const v=["*"];let mt=(()=>{class Te extends L.fc{set left(ue){this.set({left:(0,L.su)(ue)})}set right(ue){this.set({right:(0,L.su)(ue)})}set top(ue){this.set({top:(0,L.su)(ue)})}set bottom(ue){this.set({bottom:(0,L.su)(ue)})}set near(ue){this.set({near:(0,L.su)(ue)})}set far(ue){this.set({far:(0,L.su)(ue)})}get cameraType(){return Ee.iKG}get optionFields(){return{...super.optionFields,left:!0,right:!0,top:!0,bottom:!0,near:!0,far:!0}}}return Te.\u0275fac=function(){let Se;return function(Ue){return(Se||(Se=Me.n5z(Te)))(Ue||Te)}}(),Te.\u0275cmp=Me.Xpm({type:Te,selectors:[["ngt-orthographic-camera"]],inputs:{left:"left",right:"right",top:"top",bottom:"bottom",near:"near",far:"far"},standalone:!0,features:[Me._Bn([(0,L.hS)(Te),(0,L.dF)(Te)]),Me.qOj,Me.jDz],ngContentSelectors:v,decls:1,vars:0,template:function(ue,Ue){1&ue&&(Me.F$t(),Me.Hsn(0))},encapsulation:2,changeDetection:0}),Te})(),$e=(()=>{class Te extends L.Jy{set args(ue){this.set({instanceArgs:ue})}set near(ue){this.set({near:(0,L.su)(ue)})}set far(ue){this.set({far:(0,L.su)(ue)})}set renderTarget(ue){this.set({renderTarget:ue})}objectInitFn(){const ue=this.get(Ue=>Ue.instanceArgs);return new Ee._am(...ue)}get preObjectInit(){return ue=>{const Ue=this.get(Lr=>Lr.instanceArgs);Ue&&Ue.length&&this.set({near:Ue[0],far:Ue[1],renderTarget:Ue[2]}),this.effect((0,L.oe)(()=>{ue()}))(this.instanceArgs$)}}get optionFields(){return{...super.optionFields,near:!1,far:!1,renderTarget:!1}}}return Te.\u0275fac=function(){let Se;return function(Ue){return(Se||(Se=Me.n5z(Te)))(Ue||Te)}}(),Te.\u0275cmp=Me.Xpm({type:Te,selectors:[["ngt-cube-camera"]],inputs:{args:"args",near:"near",far:"far",renderTarget:"renderTarget"},standalone:!0,features:[Me._Bn([(0,L.RD)(Te),(0,L.wY)(Te)]),Me.qOj,Me.jDz],ngContentSelectors:v,decls:1,vars:0,template:function(ue,Ue){1&ue&&(Me.F$t(),Me.Hsn(0))},encapsulation:2,changeDetection:0}),Te})()},6958:(ur,ft,me)=>{me.d(ft,{U:()=>pt});var L=me(3152),Me=me(9796),Ee=me(8721);const v=["object",""],$=["*"];let pt=(()=>{class Ye extends L.Jy{constructor(){super(...arguments),this.object$=this.select(oe=>oe.object).pipe((0,Ee.h)(oe=>null!=oe)),this.isPrimitive=!0}set object(oe){L.is.ref(oe)?(this.ref=oe,this.set({object:oe.value})):this.set({object:oe})}get object(){return this.get(oe=>oe.object)}objectInitFn(){return this.object}get preObjectInit(){return oe=>{this.effect((0,L.oe)(()=>{oe()}))(this.object$)}}}return Ye.\u0275fac=function(){let Le;return function(ke){return(Le||(Le=Me.n5z(Ye)))(ke||Ye)}}(),Ye.\u0275cmp=Me.Xpm({type:Ye,selectors:[["ngt-primitive","object",""]],inputs:{object:"object"},standalone:!0,features:[Me._Bn([(0,L.RD)(Ye),(0,L.wY)(Ye)]),Me.qOj,Me.jDz],attrs:v,ngContentSelectors:$,decls:1,vars:0,template:function(oe,ke){1&oe&&(Me.F$t(),Me.Hsn(0))},encapsulation:2,changeDetection:0}),Ye})()},1472:(ur,ft,me)=>{me.d(ft,{xy:()=>vr,EE:()=>un,co:()=>li,OS:()=>bn,gV:()=>mi,vw:()=>yn,GG:()=>bi});var L=me(3152),Me=me(4372),Ee=me(610),v=me(9796),$=me(6128),pt=me(6958),mt=me(2474),Ye=me(7472),Le=me(3494),oe=me(8721),ke=me(7431),Ge=me(7554),$e=me(5023),It=me(6436),Te=me(6071),Se=me(5188);const ue=["*"];let Ue=(()=>{class l extends Se.pB{constructor(){super(...arguments),this.setDefaultCamera=this.effect((0,L.oe)(()=>{const r=this.store.get(e=>e.camera),u=this.store.get(e=>e.cameraRef),t=this.get(e=>e.makeDefault);if(this.instance.value&&t){const e=r;return this.store.set({camera:this.instance.value}),u.set(this.instance.value),()=>{this.store.set({camera:e}),u.set(e)}}}))}set makeDefault(r){this.set({makeDefault:(0,L.Ig)(r)})}set manual(r){this.set({manual:(0,L.Ig)(r)})}get preObjectInit(){return r=>{const u=this.store.get(t=>t.size);this.set(t=>({left:u.width/-2,right:u.width/2,top:u.height/2,bottom:u.height/-2,near:t.near,far:t.far})),r()}}get setOptionsTrigger$(){return this.select(r=>r.manual).pipe((0,L.Xb)())}postSetOptions(r){this.get(t=>t.manual)||r.updateProjectionMatrix()}ngOnInit(){super.ngOnInit(),this.zone.runOutsideAngular(()=>{this.store.onReady(()=>{this.setDefaultCamera(this.select(this.instance$,this.select(r=>r.makeDefault)))})})}}return l.\u0275fac=function(){let n;return function(u){return(n||(n=v.n5z(l)))(u||l)}}(),l.\u0275cmp=v.Xpm({type:l,selectors:[["ngt-soba-orthographic-camera"]],inputs:{makeDefault:"makeDefault",manual:"manual"},standalone:!0,features:[v._Bn([(0,L.hS)(l),(0,L.dF)(l)]),v.qOj,v.jDz],ngContentSelectors:ue,decls:1,vars:0,template:function(r,u){1&r&&(v.F$t(),v.Hsn(0))},encapsulation:2,changeDetection:0}),l})();var Er=me(397),Rr=me(7814),Ir=me(2313);function fr(){var r,l=0,n=[],u=0,t=0,s=h(function(m){t||o(1,m)}),i=h(function(m){t||o(-1,m)});function o(m,g){t++;var y=0;try{g===S&&C();var p=m>0&&d(g);p?p.call(g,h(function(_){y++,o(1,_)}),h(function(_){y++,o(-1,_)})):(l=m,r=g,a())}catch(_){!l&&!y&&o(-1,_)}}function a(){u||(setTimeout(c,0),u=1)}function c(){var m=n;u=0,n=[],m.forEach(f)}function f(m){m()}function d(m){var g=m&&(x(m)||"object"==typeof m)&&m.then;return x(g)&&g}function h(m){var g=0;return function(){for(var y=[],p=arguments.length;p--;)y[p]=arguments[p];g++||m.apply(this,y)}}function C(){throw new TypeError("Chaining cycle detected")}var x=function(m){return"function"==typeof m},S={then:function e(m,g){var y=fr();return n.push(function p(){var _=l>0?m:g;if(x(_))try{var T=_(r);T===y&&C();var B=d(T);B?B.call(T,y.resolve,y.reject):y.resolve(T)}catch(w){y.reject(w)}else y[l>0?"resolve":"reject"](r)}),l&&a(),y},resolve:s,reject:i};return S}function Vr(){var l,n,r=new Promise(function(u,t){l=u,n=t});return{then:r.then.bind(r),resolve:l,reject:n}}fr.all=Vr.all=function(l){var n=0,r=[],u=it();return 0===l.length?u.resolve([]):l.forEach(function(t,e){var s=it();s.resolve(t),s.then(function(i){n++,r[e]=i,n===l.length&&u.resolve(r)},u.reject)}),u};var it="function"==typeof Promise?Vr:fr;function Rn(){var l=Object.create(null);function n(t,e){var s=t.id,i=t.name,o=t.dependencies;void 0===o&&(o=[]);var a=t.init;void 0===a&&(a=function(){});var c=t.getTransferables;if(void 0===c&&(c=null),!l[s])try{o=o.map(function(d){return d&&d.isWorkerModule&&(n(d,function(h){if(h instanceof Error)throw h}),d=l[d.id].value),d}),a=u("<"+i+">.init",a),c&&(c=u("<"+i+">.getTransferables",c));var f=null;"function"==typeof a?f=a.apply(void 0,o):console.error("worker module init function failed to rehydrate"),l[s]={id:s,value:f,getTransferables:c},e(f)}catch(d){d&&d.noLog||console.error(d),e(d)}}function u(t,e){var s=void 0;self.troikaDefine=function(o){return s=o};var i=URL.createObjectURL(new Blob(["/** "+t.replace(/\*/g,"")+" **/\n\ntroikaDefine(\n"+e+"\n)"],{type:"application/javascript"}));try{importScripts(i)}catch(o){console.error(o)}return URL.revokeObjectURL(i),delete self.troikaDefine,s}self.addEventListener("message",function(t){var e=t.data,s=e.messageId,i=e.action,o=e.data;try{"registerModule"===i&&n(o,function(a){a instanceof Error?postMessage({messageId:s,success:!1,error:a.message}):postMessage({messageId:s,success:!0,result:{isCallable:"function"==typeof a}})}),"callModule"===i&&function r(t,e){var s,i=t.id,o=t.args;(!l[i]||"function"!=typeof l[i].value)&&e(new Error("Worker module "+i+": not found or its 'init' did not return a function"));try{var a=(s=l[i]).value.apply(s,o);a&&"function"==typeof a.then?a.then(c,function(f){return e(f instanceof Error?f:new Error(""+f))}):c(a)}catch(f){e(f)}function c(f){try{var d=l[i].getTransferables&&l[i].getTransferables(f);(!d||!Array.isArray(d)||!d.length)&&(d=void 0),e(f,d)}catch(h){console.error(h),e(h)}}}(o,function(a,c){a instanceof Error?postMessage({messageId:s,success:!1,error:a.message}):postMessage({messageId:s,success:!0,result:a},c||void 0)})}catch(a){postMessage({messageId:s,success:!1,error:a.stack})}})}var jr=function(){var l=!1;if(typeof window<"u"&&typeof window.document<"u")try{new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"}))).terminate(),l=!0}catch(r){console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+r.message+"]")}return jr=function(){return l},l},Vn=0,jn=0,dr=!1,Tt=Object.create(null),wt=Object.create(null),hr=Object.create(null);function vt(l){if(!(l&&"function"==typeof l.init||dr))throw new Error("requires `options.init` function");var n=l.dependencies,r=l.init,u=l.getTransferables,t=l.workerId;if(!jr())return function In(l){var n=function(){for(var r=[],u=arguments.length;u--;)r[u]=arguments[u];return n._getInitResult().then(function(t){if("function"==typeof t)return t.apply(void 0,r);throw new Error("Worker module function was called but `init` did not return a callable function")})};return n._getInitResult=function(){var r=l.dependencies,u=l.init;r=Array.isArray(r)?r.map(function(e){return e&&e._getInitResult?e._getInitResult():e}):[];var t=it.all(r).then(function(e){return u.apply(null,e)});return n._getInitResult=function(){return t},t},n}(l);null==t&&(t="#default");var e="workerModule"+ ++Vn,s=l.name||e,i=null;function o(){for(var a=[],c=arguments.length;c--;)a[c]=arguments[c];if(!i){i=Wr(t,"registerModule",o.workerModuleData);var f=function(){i=null,wt[t].delete(f)};(wt[t]||(wt[t]=new Set)).add(f)}return i.then(function(d){if(d.isCallable)return Wr(t,"callModule",{id:e,args:a});throw new Error("Worker module function was called but `init` did not return a callable function")})}return n=n&&n.map(function(a){return"function"==typeof a&&!a.workerModuleData&&(dr=!0,a=vt({workerId:t,name:"<"+s+"> function dependency: "+a.name,init:"function(){return (\n"+Vt(a)+"\n)}"}),dr=!1),a&&a.workerModuleData&&(a=a.workerModuleData),a}),o.workerModuleData={isWorkerModule:!0,id:e,name:s,dependencies:n,init:Vt(r),getTransferables:u&&Vt(u)},o}function Vt(l){var n=l.toString();return!/^function/.test(n)&&/^\w+\s*\(/.test(n)&&(n="function "+n),n}function Wr(l,n,r){var u=it(),t=++jn;return hr[t]=function(e){e.success?u.resolve(e.result):u.reject(new Error("Error in worker "+n+" call: "+e.error))},function Hn(l){var n=Tt[l];if(!n){var r=Vt(Rn);(n=Tt[l]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+l.replace(/\*/g,"")+" **/\n\n;("+r+")()"],{type:"application/javascript"})))).onmessage=function(u){var t=u.data,e=t.messageId,s=hr[e];if(!s)throw new Error("WorkerModule response with empty or unknown messageId");delete hr[e],s(t)}}return n}(l).postMessage({messageId:t,action:n,data:r}),u}var Xn=vt({name:"Thenable",dependencies:[it],init:function(l){return l}});function Hr(){var l=function(n){function r(z,I,b,F,E,O,P,R){var M=1-P;R.x=M*M*z+2*M*P*b+P*P*E,R.y=M*M*I+2*M*P*F+P*P*O}function u(z,I,b,F,E,O,P,R,M,G){var H=1-M;G.x=H*H*H*z+3*H*H*M*b+3*H*M*M*E+M*M*M*P,G.y=H*H*H*I+3*H*H*M*F+3*H*M*M*O+M*M*M*R}function t(z,I){for(var F,E,O,P,R,b=/([MLQCZ])([^MLQCZ]*)/g;F=b.exec(z);){var M=F[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map(function(G){return parseFloat(G)});switch(F[1]){case"M":P=E=M[0],R=O=M[1];break;case"L":(M[0]!==P||M[1]!==R)&&I("L",P,R,P=M[0],R=M[1]);break;case"Q":I("Q",P,R,P=M[2],R=M[3],M[0],M[1]);break;case"C":I("C",P,R,P=M[4],R=M[5],M[0],M[1],M[2],M[3]);break;case"Z":(P!==E||R!==O)&&I("L",P,R,E,O)}}}function e(z,I,b){void 0===b&&(b=16);var F={x:0,y:0};t(z,function(E,O,P,R,M,G,H,le,X){switch(E){case"L":I(O,P,R,M);break;case"Q":for(var V=O,_e=P,pe=1;pe<b;pe++)r(O,P,G,H,R,M,pe/(b-1),F),I(V,_e,F.x,F.y),V=F.x,_e=F.y;break;case"C":for(var te=O,ae=P,ge=1;ge<b;ge++)u(O,P,G,H,le,X,R,M,ge/(b-1),F),I(te,ae,F.x,F.y),te=F.x,ae=F.y}})}var s="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",o=new WeakMap,a={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function c(z,I){var b=z.getContext?z.getContext("webgl",a):z,F=o.get(b);if(!F){let H=function(te){var ae=O[te];if(!ae&&!(ae=O[te]=b.getExtension(te)))throw new Error(te+" not supported");return ae},le=function(te,ae){var ge=b.createShader(ae);return b.shaderSource(ge,te),b.compileShader(ge),ge},X=function(te,ae,ge,A){if(!P[te]){var ie={},Z={},U=b.createProgram();b.attachShader(U,le(ae,b.VERTEX_SHADER)),b.attachShader(U,le(ge,b.FRAGMENT_SHADER)),b.linkProgram(U),P[te]={program:U,transaction:function(K){b.useProgram(U),K({setUniform:function(Y,ve){for(var ye=[],Q=arguments.length-2;Q-- >0;)ye[Q]=arguments[Q+2];var de=Z[ve]||(Z[ve]=b.getUniformLocation(U,ve));b["uniform"+Y].apply(b,[de].concat(ye))},setAttribute:function(Y,ve,ye,Q,de){var xe=ie[Y];xe||(xe=ie[Y]={buf:b.createBuffer(),loc:b.getAttribLocation(U,Y),data:null}),b.bindBuffer(b.ARRAY_BUFFER,xe.buf),b.vertexAttribPointer(xe.loc,ve,b.FLOAT,!1,0,0),b.enableVertexAttribArray(xe.loc),E?b.vertexAttribDivisor(xe.loc,Q):H("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(xe.loc,Q),de!==xe.data&&(b.bufferData(b.ARRAY_BUFFER,de,ye),xe.data=de)}})}}}P[te].transaction(A)},V=function(te,ae){M++;try{b.activeTexture(b.TEXTURE0+M);var ge=R[te];ge||(ge=R[te]=b.createTexture(),b.bindTexture(b.TEXTURE_2D,ge),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.NEAREST),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.NEAREST)),b.bindTexture(b.TEXTURE_2D,ge),ae(ge,M)}finally{M--}},_e=function(te,ae,ge){var A=b.createFramebuffer();G.push(A),b.bindFramebuffer(b.FRAMEBUFFER,A),b.activeTexture(b.TEXTURE0+ae),b.bindTexture(b.TEXTURE_2D,te),b.framebufferTexture2D(b.FRAMEBUFFER,b.COLOR_ATTACHMENT0,b.TEXTURE_2D,te,0);try{ge(A)}finally{b.deleteFramebuffer(A),b.bindFramebuffer(b.FRAMEBUFFER,G[--G.length-1]||null)}},pe=function(){O={},P={},R={},M=-1,G.length=0};var E=typeof WebGL2RenderingContext<"u"&&b instanceof WebGL2RenderingContext,O={},P={},R={},M=-1,G=[];b.canvas.addEventListener("webglcontextlost",function(te){pe(),te.preventDefault()},!1),o.set(b,F={gl:b,isWebGL2:E,getExtension:H,withProgram:X,withTexture:V,withTextureFramebuffer:_e,handleContextLoss:pe})}I(F)}function f(z,I,b,F,E,O,P,R){void 0===P&&(P=15),void 0===R&&(R=null),c(z,function(M){var G=M.gl,H=M.withProgram;(0,M.withTexture)("copy",function(X,V){G.texImage2D(G.TEXTURE_2D,0,G.RGBA,E,O,0,G.RGBA,G.UNSIGNED_BYTE,I),H("copy",s,"precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",function(_e){var pe=_e.setUniform;(0,_e.setAttribute)("aUV",2,G.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),pe("1i","image",V),G.bindFramebuffer(G.FRAMEBUFFER,R||null),G.disable(G.BLEND),G.colorMask(8&P,4&P,2&P,1&P),G.viewport(b,F,E,O),G.scissor(b,F,E,O),G.drawArrays(G.TRIANGLES,0,3)})})})}var h=Object.freeze({__proto__:null,withWebGLContext:c,renderImageData:f,resizeWebGLCanvasWithoutClearing:function d(z,I,b){var F=z.width,E=z.height;c(z,function(O){var P=O.gl,R=new Uint8Array(F*E*4);P.readPixels(0,0,F,E,P.RGBA,P.UNSIGNED_BYTE,R),z.width=I,z.height=b,f(P,R,0,0,F,E)})}});function C(z,I,b,F,E,O){void 0===O&&(O=1);var P=new Uint8Array(z*I),R=F[2]-F[0],M=F[3]-F[1],G=[];e(b,function(te,ae,ge,A){G.push({x1:te,y1:ae,x2:ge,y2:A,minX:Math.min(te,ge),minY:Math.min(ae,A),maxX:Math.max(te,ge),maxY:Math.max(ae,A)})}),G.sort(function(te,ae){return te.maxX-ae.maxX});for(var H=0;H<z;H++)for(var le=0;le<I;le++){var X=_e(F[0]+R*(H+.5)/z,F[1]+M*(le+.5)/I),V=Math.pow(1-Math.abs(X)/E,O)/2;X<0&&(V=1-V),V=Math.max(0,Math.min(255,Math.round(255*V))),P[le*z+H]=V}return P;function _e(te,ae){for(var ge=1/0,A=1/0,ie=G.length;ie--;){var Z=G[ie];if(Z.maxX+A<=te)break;if(te+A>Z.minX&&ae-A<Z.maxY&&ae+A>Z.minY){var U=m(te,ae,Z.x1,Z.y1,Z.x2,Z.y2);U<ge&&(ge=U,A=Math.sqrt(ge))}}return function pe(te,ae){for(var ge=0,A=G.length;A--;){var ie=G[A];if(ie.maxX<=te)break;ie.y1>ae!=ie.y2>ae&&te<(ie.x2-ie.x1)*(ae-ie.y1)/(ie.y2-ie.y1)+ie.x1&&(ge+=ie.y1<ie.y2?1:-1)}return 0!==ge}(te,ae)&&(A=-A),A}}function x(z,I,b,F,E,O,P,R,M,G){void 0===O&&(O=1),void 0===R&&(R=0),void 0===M&&(M=0),void 0===G&&(G=0),S(z,I,b,F,E,O,P,null,R,M,G)}function S(z,I,b,F,E,O,P,R,M,G,H){void 0===O&&(O=1),void 0===M&&(M=0),void 0===G&&(G=0),void 0===H&&(H=0);for(var le=C(z,I,b,F,E,O),X=new Uint8Array(4*le.length),V=0;V<le.length;V++)X[4*V+H]=le[V];f(P,X,M,G,z,I,1<<3-H,R)}function m(z,I,b,F,E,O){var P=E-b,R=O-F,M=P*P+R*R,G=M?Math.max(0,Math.min(1,((z-b)*P+(I-F)*R)/M)):0,H=z-(b+G*P),le=I-(F+G*R);return H*H+le*le}var g=Object.freeze({__proto__:null,generate:C,generateIntoCanvas:x,generateIntoFramebuffer:S}),T=new Float32Array([0,0,2,0,0,2]),B=null,w=!1,j={},ee=new WeakMap;function J(z){if(!w&&!q(z))throw new Error("WebGL generation not supported")}function N(z,I,b,F,E,O,P){if(void 0===O&&(O=1),void 0===P&&(P=null),!P&&!(P=B)){var R="function"==typeof OffscreenCanvas?new OffscreenCanvas(1,1):typeof document<"u"?document.createElement("canvas"):null;if(!R)throw new Error("OffscreenCanvas or DOM canvas not supported");P=B=R.getContext("webgl",{depth:!1})}J(P);var M=new Uint8Array(z*I*4);c(P,function(X){var V=X.gl,pe=X.withTextureFramebuffer;(0,X.withTexture)("readable",function(te,ae){V.texImage2D(V.TEXTURE_2D,0,V.RGBA,z,I,0,V.RGBA,V.UNSIGNED_BYTE,null),pe(te,ae,function(ge){D(z,I,b,F,E,O,V,ge,0,0,0),V.readPixels(0,0,z,I,V.RGBA,V.UNSIGNED_BYTE,M)})})});for(var G=new Uint8Array(z*I),H=0,le=0;H<M.length;H+=4)G[le++]=M[H];return G}function k(z,I,b,F,E,O,P,R,M,G){void 0===O&&(O=1),void 0===R&&(R=0),void 0===M&&(M=0),void 0===G&&(G=0),D(z,I,b,F,E,O,P,null,R,M,G)}function D(z,I,b,F,E,O,P,R,M,G,H){void 0===O&&(O=1),void 0===M&&(M=0),void 0===G&&(G=0),void 0===H&&(H=0),J(P);var le=[];e(b,function(X,V,_e,pe){le.push(X,V,_e,pe)}),le=new Float32Array(le),c(P,function(X){var V=X.gl,_e=X.isWebGL2,pe=X.getExtension,te=X.withProgram,ge=X.withTextureFramebuffer,A=X.handleContextLoss;if((0,X.withTexture)("rawDistances",function(ie,Z){(z!==ie._lastWidth||I!==ie._lastHeight)&&V.texImage2D(V.TEXTURE_2D,0,V.RGBA,ie._lastWidth=z,ie._lastHeight=I,0,V.RGBA,V.UNSIGNED_BYTE,null),te("main","precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}","precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",function(U){var be=U.setAttribute,K=U.setUniform,re=!_e&&pe("ANGLE_instanced_arrays"),Y=!_e&&pe("EXT_blend_minmax");be("aUV",2,V.STATIC_DRAW,0,T),be("aLineSegment",4,V.DYNAMIC_DRAW,1,le),K.apply(void 0,["4f","uGlyphBounds"].concat(F)),K("1f","uMaxDistance",E),K("1f","uExponent",O),ge(ie,Z,function(ve){V.enable(V.BLEND),V.colorMask(!0,!0,!0,!0),V.viewport(0,0,z,I),V.scissor(0,0,z,I),V.blendFunc(V.ONE,V.ONE),V.blendEquationSeparate(V.FUNC_ADD,_e?V.MAX:Y.MAX_EXT),V.clear(V.COLOR_BUFFER_BIT),_e?V.drawArraysInstanced(V.TRIANGLES,0,3,le.length/4):re.drawArraysInstancedANGLE(V.TRIANGLES,0,3,le.length/4)})}),te("post",s,"precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",function(U){U.setAttribute("aUV",2,V.STATIC_DRAW,0,T),U.setUniform("1i","tex",Z),V.bindFramebuffer(V.FRAMEBUFFER,R),V.disable(V.BLEND),V.colorMask(0===H,1===H,2===H,3===H),V.viewport(M,G,z,I),V.scissor(M,G,z,I),V.drawArrays(V.TRIANGLES,0,3)})}),V.isContextLost())throw A(),new Error("webgl context lost")})}function q(z){var I=z&&z!==B?z.canvas||z:j,b=ee.get(I);if(void 0===b){w=!0;var F=null;try{var E=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],O=N(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,z);(b=O&&E.length===O.length&&O.every(function(P,R){return P===E[R]}))||(F="bad trial run results",console.info(E,O))}catch(P){b=!1,F=P.message}F&&console.warn("WebGL SDF generation not supported:",F),w=!1,ee.set(I,b)}return b}var W=Object.freeze({__proto__:null,generate:N,generateIntoCanvas:k,generateIntoFramebuffer:D,isSupported:q});return n.forEachPathCommand=t,n.generate=function ce(z,I,b,F,E,O){void 0===E&&(E=Math.max(F[2]-F[0],F[3]-F[1])/2),void 0===O&&(O=1);try{return N.apply(W,arguments)}catch(P){return console.info("WebGL SDF generation failed, falling back to JS",P),C.apply(g,arguments)}},n.generateIntoCanvas=function fe(z,I,b,F,E,O,P,R,M,G){void 0===E&&(E=Math.max(F[2]-F[0],F[3]-F[1])/2),void 0===O&&(O=1),void 0===R&&(R=0),void 0===M&&(M=0),void 0===G&&(G=0);try{return k.apply(W,arguments)}catch(H){return console.info("WebGL SDF generation failed, falling back to JS",H),x.apply(g,arguments)}},n.javascript=g,n.pathToLineSegments=e,n.webgl=W,n.webglUtils=h,Object.defineProperty(n,"__esModule",{value:!0}),n}({});return l}const Xr=/\bvoid\s+main\s*\(\s*\)\s*{/g;function gr(l){return l.replace(/^[ \t]*#include +<([\w\d./]+)>/gm,function r(u,t){let e=$.WdD[t];return e?gr(e):u})}const Ie=[];for(let l=0;l<256;l++)Ie[l]=(l<16?"0":"")+l.toString(16);const dt=Object.assign||function(){let l=arguments[0];for(let n=1,r=arguments.length;n<r;n++){let u=arguments[n];if(u)for(let t in u)u.hasOwnProperty(t)&&(l[t]=u[t])}return l},Zn=Date.now(),Qr=new WeakMap,Yr=new Map;let Kn=1e10;function jt(l,n){const r=function to(l){const n=JSON.stringify(l,$n);let r=Zr.get(n);return null==r&&Zr.set(n,r=++eo),r}(n);let u=Qr.get(l);if(u||Qr.set(l,u=Object.create(null)),u[r])return new u[r];const t=`_onBeforeCompile${r}`,e=function(a){l.onBeforeCompile.call(this,a);const c=this.customProgramCacheKey()+"|"+a.vertexShader+"|"+a.fragmentShader;let f=Yr[c];if(!f){const d=function qn({vertexShader:l,fragmentShader:n},r,u){let{vertexDefs:t,vertexMainIntro:e,vertexMainOutro:s,vertexTransform:i,fragmentDefs:o,fragmentMainIntro:a,fragmentMainOutro:c,fragmentColorTransform:f,customRewriter:d,timeUniform:h}=r;if(t=t||"",e=e||"",s=s||"",o=o||"",a=a||"",c=c||"",(i||d)&&(l=gr(l)),(f||d)&&(n=gr(n=n.replace(/^[ \t]*#include <((?:tonemapping|encodings|fog|premultiplied_alpha|dithering)_fragment)>/gm,"\n//!BEGIN_POST_CHUNK $1\n$&\n//!END_POST_CHUNK\n"))),d){let C=d({vertexShader:l,fragmentShader:n});l=C.vertexShader,n=C.fragmentShader}if(f){let C=[];n=n.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,x=>(C.push(x),"")),c=`${f}\n${C.join("\n")}\n${c}`}if(h){const C=`\nuniform float ${h};\n`;t=C+t,o=C+o}return i&&(t=`${t}\nvoid troikaVertexTransform${u}(inout vec3 position, inout vec3 normal, inout vec2 uv) {\n  ${i}\n}\n`,e=`\ntroika_position_${u} = vec3(position);\ntroika_normal_${u} = vec3(normal);\ntroika_uv_${u} = vec2(uv);\ntroikaVertexTransform${u}(troika_position_${u}, troika_normal_${u}, troika_uv_${u});\n${e}\n`,l=(l=`vec3 troika_position_${u};\nvec3 troika_normal_${u};\nvec2 troika_uv_${u};\n${l}\n`).replace(/\b(position|normal|uv)\b/g,(C,x,S,m)=>/\battribute\s+vec[23]\s+$/.test(m.substr(0,S))?x:`troika_${x}_${u}`)),{vertexShader:l=Jr(l,u,t,e,s),fragmentShader:n=Jr(n,u,o,a,c)}}(a,n,r);f=Yr[c]=d}a.vertexShader=f.vertexShader,a.fragmentShader=f.fragmentShader,dt(a.uniforms,this.uniforms),n.timeUniform&&(a.uniforms[n.timeUniform]={get value(){return Date.now()-Zn}}),this[t]&&this[t](a)},s=function(){return i(n.chained?l:l.clone())},i=function(a){const c=Object.create(a,o);return Object.defineProperty(c,"baseMaterial",{value:l}),Object.defineProperty(c,"id",{value:Kn++}),c.uuid=function Jn(){const l=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0,u=4294967295*Math.random()|0;return(Ie[255&l]+Ie[l>>8&255]+Ie[l>>16&255]+Ie[l>>24&255]+"-"+Ie[255&n]+Ie[n>>8&255]+"-"+Ie[n>>16&15|64]+Ie[n>>24&255]+"-"+Ie[63&r|128]+Ie[r>>8&255]+"-"+Ie[r>>16&255]+Ie[r>>24&255]+Ie[255&u]+Ie[u>>8&255]+Ie[u>>16&255]+Ie[u>>24&255]).toUpperCase()}(),c.uniforms=dt({},a.uniforms,n.uniforms),c.defines=dt({},a.defines,n.defines),c.defines[`TROIKA_DERIVED_MATERIAL_${r}`]="",c.extensions=dt({},a.extensions,n.extensions),c._listeners=void 0,c},o={constructor:{value:s},isDerivedMaterial:{value:!0},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return l.customProgramCacheKey()+"|"+r}},onBeforeCompile:{get:()=>e,set(a){this[t]=a}},copy:{writable:!0,configurable:!0,value:function(a){return l.copy.call(this,a),!l.isShaderMaterial&&!l.isDerivedMaterial&&(dt(this.extensions,a.extensions),dt(this.defines,a.defines),dt(this.uniforms,$.rDY.clone(a.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const a=new l.constructor;return i(a).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let a=this._depthMaterial;return a||(a=this._depthMaterial=jt(l.isDerivedMaterial?l.getDepthMaterial():new $.lRF({depthPacking:$.mSO}),n),a.defines.IS_DEPTH_MATERIAL="",a.uniforms=this.uniforms),a}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let a=this._distanceMaterial;return a||(a=this._distanceMaterial=jt(l.isDerivedMaterial?l.getDistanceMaterial():new $.Lun,n),a.defines.IS_DISTANCE_MATERIAL="",a.uniforms=this.uniforms),a}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:a,_distanceMaterial:c}=this;a&&a.dispose(),c&&c.dispose(),l.dispose.call(this)}}};return u[r]=s,new s}function Jr(l,n,r,u,t){return(u||t||r)&&(l=l.replace(Xr,`\n${r}\nvoid troikaOrigMain${n}() {`),l+=`\nvoid main() {\n  ${u}\n  troikaOrigMain${n}();\n  ${t}\n}`),l}function $n(l,n){return"uniforms"===l?void 0:"function"==typeof n?n.toString():n}let eo=0;const Zr=new Map,ht=()=>(self.performance||Date).now(),Wt=Hr();let en;const uo=function(){const l=[];let r=0;function u(){const t=ht();for(;l.length&&ht()-t<5;)l.shift()();r=l.length?setTimeout(u,0):0}return(...t)=>{const e=it();return l.push(()=>{const s=ht();try{Wt.webgl.generateIntoCanvas(...t),e.resolve({timing:ht()-s})}catch(i){e.reject(i)}}),r||(r=setTimeout(u,0)),e}}(),tn=function(){const r={};let u=0;return function(t,e,s,i,o,a,c,f,d,h){const C="TroikaTextSDFGenerator_JS_"+u++%4;let x=r[C];return x||(x=r[C]={workerModule:vt({name:C,workerId:C,dependencies:[Hr,ht],init(S,m){const g=S().javascript.generate;return function(...y){const p=m();return{textureData:g(...y),timing:m()-p}}},getTransferables:S=>[S.textureData.buffer]}),requests:0,idleTimer:null}),x.requests++,clearTimeout(x.idleTimer),x.workerModule(t,e,s,i,o,a).then(({textureData:S,timing:m})=>{const g=ht(),y=new Uint8Array(4*S.length);for(let p=0;p<S.length;p++)y[4*p+h]=S[p];return Wt.webglUtils.renderImageData(c,y,f,d,t,e,1<<3-h),m+=ht()-g,0==--x.requests&&(x.idleTimer=setTimeout(()=>{!function Wn(l){wt[l]&&wt[l].forEach(function(n){n()}),Tt[l]&&(Tt[l].terminate(),delete Tt[l])}(C)},2e3)),{timing:m}})}}(),ho=Wt.webglUtils.resizeWebGLCanvasWithoutClearing,vo=vt({name:"Typr Font Parser",dependencies:[function go(){return typeof window>"u"&&(self.window=self),function(l){var n={parse:function(t){var e=n._bin,s=new Uint8Array(t);if("ttcf"==e.readASCII(s,0,4)){var i=4;e.readUshort(s,i),e.readUshort(s,i+=2);var o=e.readUint(s,i+=2);i+=4;for(var a=[],c=0;c<o;c++){var f=e.readUint(s,i);i+=4,a.push(n._readFont(s,f))}return a}return[n._readFont(s,0)]},_readFont:function(t,e){var s=n._bin,i=e;s.readFixed(t,e);var o=s.readUshort(t,e+=4);s.readUshort(t,e+=2),s.readUshort(t,e+=2),s.readUshort(t,e+=2),e+=2;for(var a=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GPOS","GSUB","SVG "],c={_data:t,_offset:i},f={},d=0;d<o;d++){var h=s.readASCII(t,e,4);s.readUint(t,e+=4);var C=s.readUint(t,e+=4),x=s.readUint(t,e+=4);e+=4,f[h]={offset:C,length:x}}for(d=0;d<a.length;d++){var S=a[d];f[S]&&(c[S.trim()]=n[S.trim()].parse(t,f[S].offset,f[S].length,c))}return c},_tabOffset:function(t,e,s){for(var i=n._bin,o=i.readUshort(t,s+4),a=s+12,c=0;c<o;c++){var f=i.readASCII(t,a,4);i.readUint(t,a+=4);var d=i.readUint(t,a+=4);if(i.readUint(t,a+=4),a+=4,f==e)return d}return 0}};n._bin={readFixed:function(t,e){return(t[e]<<8|t[e+1])+(t[e+2]<<8|t[e+3])/65540},readF2dot14:function(t,e){return n._bin.readShort(t,e)/16384},readInt:function(t,e){return n._bin._view(t).getInt32(e)},readInt8:function(t,e){return n._bin._view(t).getInt8(e)},readShort:function(t,e){return n._bin._view(t).getInt16(e)},readUshort:function(t,e){return n._bin._view(t).getUint16(e)},readUshorts:function(t,e,s){for(var i=[],o=0;o<s;o++)i.push(n._bin.readUshort(t,e+2*o));return i},readUint:function(t,e){return n._bin._view(t).getUint32(e)},readUint64:function(t,e){return 4294967296*n._bin.readUint(t,e)+n._bin.readUint(t,e+4)},readASCII:function(t,e,s){for(var i="",o=0;o<s;o++)i+=String.fromCharCode(t[e+o]);return i},readUnicode:function(t,e,s){for(var i="",o=0;o<s;o++){var a=t[e++]<<8|t[e++];i+=String.fromCharCode(a)}return i},_tdec:typeof window<"u"&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(t,e,s){var i=n._bin._tdec;return i&&0==e&&s==t.length?i.decode(t):n._bin.readASCII(t,e,s)},readBytes:function(t,e,s){for(var i=[],o=0;o<s;o++)i.push(t[e+o]);return i},readASCIIArray:function(t,e,s){for(var i=[],o=0;o<s;o++)i.push(String.fromCharCode(t[e+o]));return i},_view:function(t){return t._dataView||(t._dataView=t.buffer?new DataView(t.buffer,t.byteOffset,t.byteLength):new DataView(new Uint8Array(t).buffer))}},n._lctf={},n._lctf.parse=function(t,e,s,i,o){var a=n._bin,c={},f=e;a.readFixed(t,e);var d=a.readUshort(t,e+=4),h=a.readUshort(t,e+=2),C=a.readUshort(t,e+=2);return e+=2,c.scriptList=n._lctf.readScriptList(t,f+d),c.featureList=n._lctf.readFeatureList(t,f+h),c.lookupList=n._lctf.readLookupList(t,f+C,o),c},n._lctf.readLookupList=function(t,e,s){var i=n._bin,o=e,a=[],c=i.readUshort(t,e);e+=2;for(var f=0;f<c;f++){var d=i.readUshort(t,e);e+=2;var h=n._lctf.readLookupTable(t,o+d,s);a.push(h)}return a},n._lctf.readLookupTable=function(t,e,s){var i=n._bin,o=e,a={tabs:[]};a.ltype=i.readUshort(t,e),a.flag=i.readUshort(t,e+=2);var c=i.readUshort(t,e+=2);e+=2;for(var f=a.ltype,d=0;d<c;d++){var h=i.readUshort(t,e);e+=2;var C=s(t,f,o+h,a);a.tabs.push(C)}return a},n._lctf.numOfOnes=function(t){for(var e=0,s=0;s<32;s++)0!=(t>>>s&1)&&e++;return e},n._lctf.readClassDef=function(t,e){var s=n._bin,i=[],o=s.readUshort(t,e);if(e+=2,1==o){var a=s.readUshort(t,e),c=s.readUshort(t,e+=2);e+=2;for(var f=0;f<c;f++)i.push(a+f),i.push(a+f),i.push(s.readUshort(t,e)),e+=2}if(2==o){var d=s.readUshort(t,e);for(e+=2,f=0;f<d;f++)i.push(s.readUshort(t,e)),i.push(s.readUshort(t,e+=2)),i.push(s.readUshort(t,e+=2)),e+=2}return i},n._lctf.getInterval=function(t,e){for(var s=0;s<t.length;s+=3)if(t[s]<=e&&e<=t[s+1])return s;return-1},n._lctf.readCoverage=function(t,e){var s=n._bin,i={};i.fmt=s.readUshort(t,e);var o=s.readUshort(t,e+=2);return e+=2,1==i.fmt&&(i.tab=s.readUshorts(t,e,o)),2==i.fmt&&(i.tab=s.readUshorts(t,e,3*o)),i},n._lctf.coverageIndex=function(t,e){var s=t.tab;if(1==t.fmt)return s.indexOf(e);if(2==t.fmt){var i=n._lctf.getInterval(s,e);if(-1!=i)return s[i+2]+(e-s[i])}return-1},n._lctf.readFeatureList=function(t,e){var s=n._bin,i=e,o=[],a=s.readUshort(t,e);e+=2;for(var c=0;c<a;c++){var f=s.readASCII(t,e,4),d=s.readUshort(t,e+=4);e+=2;var h=n._lctf.readFeatureTable(t,i+d);h.tag=f.trim(),o.push(h)}return o},n._lctf.readFeatureTable=function(t,e){var s=n._bin,i=e,o={},a=s.readUshort(t,e);e+=2,a>0&&(o.featureParams=i+a);var c=s.readUshort(t,e);e+=2,o.tab=[];for(var f=0;f<c;f++)o.tab.push(s.readUshort(t,e+2*f));return o},n._lctf.readScriptList=function(t,e){var s=n._bin,i=e,o={},a=s.readUshort(t,e);e+=2;for(var c=0;c<a;c++){var f=s.readASCII(t,e,4),d=s.readUshort(t,e+=4);e+=2,o[f.trim()]=n._lctf.readScriptTable(t,i+d)}return o},n._lctf.readScriptTable=function(t,e){var s=n._bin,i=e,o={},a=s.readUshort(t,e);e+=2,o.default=n._lctf.readLangSysTable(t,i+a);var c=s.readUshort(t,e);e+=2;for(var f=0;f<c;f++){var d=s.readASCII(t,e,4),h=s.readUshort(t,e+=4);e+=2,o[d.trim()]=n._lctf.readLangSysTable(t,i+h)}return o},n._lctf.readLangSysTable=function(t,e){var s=n._bin,i={};s.readUshort(t,e),i.reqFeature=s.readUshort(t,e+=2);var o=s.readUshort(t,e+=2);return i.features=s.readUshorts(t,e+=2,o),i},n.CFF={},n.CFF.parse=function(t,e,s){var i=n._bin;t=new Uint8Array(t.buffer,e,s),e=0,++e,++e,++e,e++;var o=[];e=n.CFF.readIndex(t,e,o);for(var a=[],c=0;c<o.length-1;c++)a.push(i.readASCII(t,e+o[c],o[c+1]-o[c]));var f=[];e=n.CFF.readIndex(t,e+=o[o.length-1],f);var d=[];for(c=0;c<f.length-1;c++)d.push(n.CFF.readDict(t,e+f[c],e+f[c+1]));var h=d[0],C=[];e=n.CFF.readIndex(t,e+=f[f.length-1],C);var x=[];for(c=0;c<C.length-1;c++)x.push(i.readASCII(t,e+C[c],C[c+1]-C[c]));if(n.CFF.readSubrs(t,e+=C[C.length-1],h),h.CharStrings){e=n.CFF.readIndex(t,e=h.CharStrings,C=[]);var S=[];for(c=0;c<C.length-1;c++)S.push(i.readBytes(t,e+C[c],C[c+1]-C[c]));h.CharStrings=S}if(h.ROS){var m=[];for(e=n.CFF.readIndex(t,e=h.FDArray,m),h.FDArray=[],c=0;c<m.length-1;c++){var g=n.CFF.readDict(t,e+m[c],e+m[c+1]);n.CFF._readFDict(t,g,x),h.FDArray.push(g)}e+=m[m.length-1],e=h.FDSelect,h.FDSelect=[];var y=t[e];if(e++,3!=y)throw y;var p=i.readUshort(t,e);for(e+=2,c=0;c<p+1;c++)h.FDSelect.push(i.readUshort(t,e),t[e+2]),e+=3}return h.Encoding&&(h.Encoding=n.CFF.readEncoding(t,h.Encoding,h.CharStrings.length)),h.charset&&(h.charset=n.CFF.readCharset(t,h.charset,h.CharStrings.length)),n.CFF._readFDict(t,h,x),h},n.CFF._readFDict=function(t,e,s){var i;for(var o in e.Private&&(e.Private=n.CFF.readDict(t,i=e.Private[1],i+e.Private[0]),e.Private.Subrs&&n.CFF.readSubrs(t,i+e.Private.Subrs,e.Private)),e)-1!=["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(o)&&(e[o]=s[e[o]-426+35])},n.CFF.readSubrs=function(t,e,s){var i=n._bin,o=[];e=n.CFF.readIndex(t,e,o);var c=o.length;s.Bias=c<1240?107:c<33900?1131:32768,s.Subrs=[];for(var f=0;f<o.length-1;f++)s.Subrs.push(i.readBytes(t,e+o[f],o[f+1]-o[f]))},n.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],n.CFF.glyphByUnicode=function(t,e){for(var s=0;s<t.charset.length;s++)if(t.charset[s]==e)return s;return-1},n.CFF.glyphBySE=function(t,e){return e<0||e>255?-1:n.CFF.glyphByUnicode(t,n.CFF.tableSE[e])},n.CFF.readEncoding=function(t,e,s){var i=[".notdef"],o=t[e];if(e++,0!=o)throw"error: unknown encoding format: "+o;var a=t[e];e++;for(var c=0;c<a;c++)i.push(t[e+c]);return i},n.CFF.readCharset=function(t,e,s){var i=n._bin,o=[".notdef"],a=t[e];if(e++,0==a)for(var c=0;c<s;c++){var f=i.readUshort(t,e);e+=2,o.push(f)}else{if(1!=a&&2!=a)throw"error: format: "+a;for(;o.length<s;){f=i.readUshort(t,e),e+=2;var d=0;for(1==a?(d=t[e],e++):(d=i.readUshort(t,e),e+=2),c=0;c<=d;c++)o.push(f),f++}}return o},n.CFF.readIndex=function(t,e,s){var i=n._bin,o=i.readUshort(t,e)+1,a=t[e+=2];if(e++,1==a)for(var c=0;c<o;c++)s.push(t[e+c]);else if(2==a)for(c=0;c<o;c++)s.push(i.readUshort(t,e+2*c));else if(3==a)for(c=0;c<o;c++)s.push(16777215&i.readUint(t,e+3*c-1));else if(1!=o)throw"unsupported offset size: "+a+", count: "+o;return(e+=o*a)-1},n.CFF.getCharString=function(t,e,s){var i=n._bin,o=t[e],a=t[e+1],c=1,f=null,d=null;o<=20&&(f=o,c=1),12==o&&(f=100*o+a,c=2),21<=o&&o<=27&&(f=o,c=1),28==o&&(d=i.readShort(t,e+1),c=3),29<=o&&o<=31&&(f=o,c=1),32<=o&&o<=246&&(d=o-139,c=1),247<=o&&o<=250&&(d=256*(o-247)+a+108,c=2),251<=o&&o<=254&&(d=256*-(o-251)-a-108,c=2),255==o&&(d=i.readInt(t,e+1)/65535,c=5),s.val=d??"o"+f,s.size=c},n.CFF.readCharString=function(t,e,s){for(var i=e+s,o=n._bin,a=[];e<i;){var c=t[e],f=t[e+1],d=1,h=null,C=null;c<=20&&(h=c,d=1),12==c&&(h=100*c+f,d=2),19!=c&&20!=c||(h=c,d=2),21<=c&&c<=27&&(h=c,d=1),28==c&&(C=o.readShort(t,e+1),d=3),29<=c&&c<=31&&(h=c,d=1),32<=c&&c<=246&&(C=c-139,d=1),247<=c&&c<=250&&(C=256*(c-247)+f+108,d=2),251<=c&&c<=254&&(C=256*-(c-251)-f-108,d=2),255==c&&(C=o.readInt(t,e+1)/65535,d=5),a.push(C??"o"+h),e+=d}return a},n.CFF.readDict=function(t,e,s){for(var i=n._bin,o={},a=[];e<s;){var c=t[e],f=t[e+1],d=1,h=null,C=null;if(28==c&&(C=i.readShort(t,e+1),d=3),29==c&&(C=i.readInt(t,e+1),d=5),32<=c&&c<=246&&(C=c-139,d=1),247<=c&&c<=250&&(C=256*(c-247)+f+108,d=2),251<=c&&c<=254&&(C=256*-(c-251)-f-108,d=2),255==c)throw C=i.readInt(t,e+1)/65535,d=5,"unknown number";if(30==c){var x=[];for(d=1;;){var S=t[e+d];d++;var m=S>>4,g=15&S;if(15!=m&&x.push(m),15!=g&&x.push(g),15==g)break}for(var y="",p=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],_=0;_<x.length;_++)y+=p[x[_]];C=parseFloat(y)}c<=21&&(h=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][c],d=1,12==c&&(h=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][f],d=2)),null!=h?(o[h]=1==a.length?a[0]:a,a=[]):a.push(C),e+=d}return o},n.cmap={},n.cmap.parse=function(t,e,s){t=new Uint8Array(t.buffer,e,s);var i=n._bin,o={};i.readUshort(t,e=0);var a=i.readUshort(t,e+=2);e+=2;var c=[];o.tables=[];for(var f=0;f<a;f++){var d=i.readUshort(t,e),h=i.readUshort(t,e+=2),C=i.readUint(t,e+=2);e+=4;var x="p"+d+"e"+h,S=c.indexOf(C);if(-1==S){var m;S=o.tables.length,c.push(C);var g=i.readUshort(t,C);0==g?m=n.cmap.parse0(t,C):4==g?m=n.cmap.parse4(t,C):6==g?m=n.cmap.parse6(t,C):12==g?m=n.cmap.parse12(t,C):console.debug("unknown format: "+g,d,h,C),o.tables.push(m)}if(null!=o[x])throw"multiple tables for one platform+encoding";o[x]=S}return o},n.cmap.parse0=function(t,e){var s=n._bin,i={};i.format=s.readUshort(t,e);var o=s.readUshort(t,e+=2);s.readUshort(t,e+=2),e+=2,i.map=[];for(var a=0;a<o-6;a++)i.map.push(t[e+a]);return i},n.cmap.parse4=function(t,e){var s=n._bin,i=e,o={};o.format=s.readUshort(t,e);var a=s.readUshort(t,e+=2);s.readUshort(t,e+=2);var f=s.readUshort(t,e+=2)/2;o.searchRange=s.readUshort(t,e+=2),o.entrySelector=s.readUshort(t,e+=2),o.rangeShift=s.readUshort(t,e+=2),o.endCount=s.readUshorts(t,e+=2,f),e+=2*f,o.startCount=s.readUshorts(t,e+=2,f),e+=2*f,o.idDelta=[];for(var d=0;d<f;d++)o.idDelta.push(s.readShort(t,e)),e+=2;for(o.idRangeOffset=s.readUshorts(t,e,f),e+=2*f,o.glyphIdArray=[];e<i+a;)o.glyphIdArray.push(s.readUshort(t,e)),e+=2;return o},n.cmap.parse6=function(t,e){var s=n._bin,i={};i.format=s.readUshort(t,e),s.readUshort(t,e+=2),s.readUshort(t,e+=2),i.firstCode=s.readUshort(t,e+=2);var o=s.readUshort(t,e+=2);e+=2,i.glyphIdArray=[];for(var a=0;a<o;a++)i.glyphIdArray.push(s.readUshort(t,e)),e+=2;return i},n.cmap.parse12=function(t,e){var s=n._bin,i={};i.format=s.readUshort(t,e),e+=2,s.readUint(t,e+=2),s.readUint(t,e+=4);var o=s.readUint(t,e+=4);e+=4,i.groups=[];for(var a=0;a<o;a++){var c=e+12*a,f=s.readUint(t,c+0),d=s.readUint(t,c+4),h=s.readUint(t,c+8);i.groups.push([f,d,h])}return i},n.glyf={},n.glyf.parse=function(t,e,s,i){for(var o=[],a=0;a<i.maxp.numGlyphs;a++)o.push(null);return o},n.glyf._parseGlyf=function(t,e){var s=n._bin,i=t._data,o=n._tabOffset(i,"glyf",t._offset)+t.loca[e];if(t.loca[e]==t.loca[e+1])return null;var a={};if(a.noc=s.readShort(i,o),a.xMin=s.readShort(i,o+=2),a.yMin=s.readShort(i,o+=2),a.xMax=s.readShort(i,o+=2),a.yMax=s.readShort(i,o+=2),o+=2,a.xMin>=a.xMax||a.yMin>=a.yMax)return null;if(a.noc>0){a.endPts=[];for(var c=0;c<a.noc;c++)a.endPts.push(s.readUshort(i,o)),o+=2;var f=s.readUshort(i,o);if(i.length-(o+=2)<f)return null;a.instructions=s.readBytes(i,o,f),o+=f;var d=a.endPts[a.noc-1]+1;for(a.flags=[],c=0;c<d;c++){var h=i[o];if(o++,a.flags.push(h),0!=(8&h)){var C=i[o];o++;for(var x=0;x<C;x++)a.flags.push(h),c++}}for(a.xs=[],c=0;c<d;c++){var S=0!=(2&a.flags[c]),m=0!=(16&a.flags[c]);S?(a.xs.push(m?i[o]:-i[o]),o++):m?a.xs.push(0):(a.xs.push(s.readShort(i,o)),o+=2)}for(a.ys=[],c=0;c<d;c++)m=0!=(32&a.flags[c]),(S=0!=(4&a.flags[c]))?(a.ys.push(m?i[o]:-i[o]),o++):m?a.ys.push(0):(a.ys.push(s.readShort(i,o)),o+=2);var g=0,y=0;for(c=0;c<d;c++)y+=a.ys[c],a.xs[c]=g+=a.xs[c],a.ys[c]=y}else{var p;a.parts=[];do{p=s.readUshort(i,o),o+=2;var _={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(a.parts.push(_),_.glyphIndex=s.readUshort(i,o),o+=2,1&p){var T=s.readShort(i,o),B=s.readShort(i,o+=2);o+=2}else T=s.readInt8(i,o),o++,B=s.readInt8(i,o),o++;2&p?(_.m.tx=T,_.m.ty=B):(_.p1=T,_.p2=B),8&p?(_.m.a=_.m.d=s.readF2dot14(i,o),o+=2):64&p?(_.m.a=s.readF2dot14(i,o),_.m.d=s.readF2dot14(i,o+=2),o+=2):128&p&&(_.m.a=s.readF2dot14(i,o),_.m.b=s.readF2dot14(i,o+=2),_.m.c=s.readF2dot14(i,o+=2),_.m.d=s.readF2dot14(i,o+=2),o+=2)}while(32&p);if(256&p){var w=s.readUshort(i,o);for(o+=2,a.instr=[],c=0;c<w;c++)a.instr.push(i[o]),o++}}return a},n.GPOS={},n.GPOS.parse=function(t,e,s,i){return n._lctf.parse(t,e,s,i,n.GPOS.subt)},n.GPOS.subt=function(t,e,s,i){var o=n._bin,a=s,c={};if(c.fmt=o.readUshort(t,s),s+=2,1==e||2==e||3==e||7==e||8==e&&c.fmt<=2){var f=o.readUshort(t,s);s+=2,c.coverage=n._lctf.readCoverage(t,f+a)}if(1==e&&1==c.fmt){var d=o.readUshort(t,s);s+=2;var h=n._lctf.numOfOnes(d);0!=d&&(c.pos=n.GPOS.readValueRecord(t,s,d))}else if(2==e&&c.fmt>=1&&c.fmt<=2){d=o.readUshort(t,s);var C=o.readUshort(t,s+=2);s+=2,h=n._lctf.numOfOnes(d);var x=n._lctf.numOfOnes(C);if(1==c.fmt){c.pairsets=[];var S=o.readUshort(t,s);s+=2;for(var m=0;m<S;m++){var g=a+o.readUshort(t,s);s+=2;var y=o.readUshort(t,g);g+=2;for(var p=[],_=0;_<y;_++){var T=o.readUshort(t,g);g+=2,0!=d&&(N=n.GPOS.readValueRecord(t,g,d),g+=2*h),0!=C&&(k=n.GPOS.readValueRecord(t,g,C),g+=2*x),p.push({gid2:T,val1:N,val2:k})}c.pairsets.push(p)}}if(2==c.fmt){var B=o.readUshort(t,s),w=o.readUshort(t,s+=2),j=o.readUshort(t,s+=2),ee=o.readUshort(t,s+=2);for(s+=2,c.classDef1=n._lctf.readClassDef(t,a+B),c.classDef2=n._lctf.readClassDef(t,a+w),c.matrix=[],m=0;m<j;m++){var J=[];for(_=0;_<ee;_++){var N=null,k=null;0!=d&&(N=n.GPOS.readValueRecord(t,s,d),s+=2*h),0!=C&&(k=n.GPOS.readValueRecord(t,s,C),s+=2*x),J.push({val1:N,val2:k})}c.matrix.push(J)}}}else{if(9==e&&1==c.fmt){var D=o.readUshort(t,s),q=o.readUint(t,s+=2);if(s+=4,9==i.ltype)i.ltype=D;else if(i.ltype!=D)throw"invalid extension substitution";return n.GPOS.subt(t,i.ltype,a+q)}console.debug("unsupported GPOS table LookupType",e,"format",c.fmt)}return c},n.GPOS.readValueRecord=function(t,e,s){var i=n._bin,o=[];return o.push(1&s?i.readShort(t,e):0),e+=1&s?2:0,o.push(2&s?i.readShort(t,e):0),e+=2&s?2:0,o.push(4&s?i.readShort(t,e):0),e+=4&s?2:0,o.push(8&s?i.readShort(t,e):0),e+=8&s?2:0,o},n.GSUB={},n.GSUB.parse=function(t,e,s,i){return n._lctf.parse(t,e,s,i,n.GSUB.subt)},n.GSUB.subt=function(t,e,s,i){var o=n._bin,a=s,c={};if(c.fmt=o.readUshort(t,s),s+=2,1!=e&&4!=e&&5!=e&&6!=e)return null;if(1==e||4==e||5==e&&c.fmt<=2||6==e&&c.fmt<=2){var f=o.readUshort(t,s);s+=2,c.coverage=n._lctf.readCoverage(t,a+f)}if(1==e&&c.fmt>=1&&c.fmt<=2){if(1==c.fmt)c.delta=o.readShort(t,s),s+=2;else if(2==c.fmt){var d=o.readUshort(t,s);c.newg=o.readUshorts(t,s+=2,d),s+=2*c.newg.length}}else if(4==e){c.vals=[],d=o.readUshort(t,s),s+=2;for(var h=0;h<d;h++){var C=o.readUshort(t,s);s+=2,c.vals.push(n.GSUB.readLigatureSet(t,a+C))}}else if(5==e&&2==c.fmt){if(2==c.fmt){var x=o.readUshort(t,s);s+=2,c.cDef=n._lctf.readClassDef(t,a+x),c.scset=[];var S=o.readUshort(t,s);for(s+=2,h=0;h<S;h++){var m=o.readUshort(t,s);s+=2,c.scset.push(0==m?null:n.GSUB.readSubClassSet(t,a+m))}}}else if(6==e&&3==c.fmt){if(3==c.fmt){for(h=0;h<3;h++){d=o.readUshort(t,s),s+=2;for(var g=[],y=0;y<d;y++)g.push(n._lctf.readCoverage(t,a+o.readUshort(t,s+2*y)));s+=2*d,0==h&&(c.backCvg=g),1==h&&(c.inptCvg=g),2==h&&(c.ahedCvg=g)}d=o.readUshort(t,s),c.lookupRec=n.GSUB.readSubstLookupRecords(t,s+=2,d)}}else{if(7==e&&1==c.fmt){var p=o.readUshort(t,s),_=o.readUint(t,s+=2);if(s+=4,9==i.ltype)i.ltype=p;else if(i.ltype!=p)throw"invalid extension substitution";return n.GSUB.subt(t,i.ltype,a+_)}console.debug("unsupported GSUB table LookupType",e,"format",c.fmt)}return c},n.GSUB.readSubClassSet=function(t,e){var s=n._bin.readUshort,i=e,o=[],a=s(t,e);e+=2;for(var c=0;c<a;c++){var f=s(t,e);e+=2,o.push(n.GSUB.readSubClassRule(t,i+f))}return o},n.GSUB.readSubClassRule=function(t,e){var s=n._bin.readUshort,i={},o=s(t,e),a=s(t,e+=2);e+=2,i.input=[];for(var c=0;c<o-1;c++)i.input.push(s(t,e)),e+=2;return i.substLookupRecords=n.GSUB.readSubstLookupRecords(t,e,a),i},n.GSUB.readSubstLookupRecords=function(t,e,s){for(var i=n._bin.readUshort,o=[],a=0;a<s;a++)o.push(i(t,e),i(t,e+2)),e+=4;return o},n.GSUB.readChainSubClassSet=function(t,e){var s=n._bin,i=e,o=[],a=s.readUshort(t,e);e+=2;for(var c=0;c<a;c++){var f=s.readUshort(t,e);e+=2,o.push(n.GSUB.readChainSubClassRule(t,i+f))}return o},n.GSUB.readChainSubClassRule=function(t,e){for(var s=n._bin,i={},o=["backtrack","input","lookahead"],a=0;a<o.length;a++){var c=s.readUshort(t,e);1==a&&c--,i[o[a]]=s.readUshorts(t,e+=2,c),e+=2*i[o[a]].length}return c=s.readUshort(t,e),i.subst=s.readUshorts(t,e+=2,2*c),e+=2*i.subst.length,i},n.GSUB.readLigatureSet=function(t,e){var s=n._bin,i=e,o=[],a=s.readUshort(t,e);e+=2;for(var c=0;c<a;c++){var f=s.readUshort(t,e);e+=2,o.push(n.GSUB.readLigature(t,i+f))}return o},n.GSUB.readLigature=function(t,e){var s=n._bin,i={chain:[]};i.nglyph=s.readUshort(t,e);var o=s.readUshort(t,e+=2);e+=2;for(var a=0;a<o-1;a++)i.chain.push(s.readUshort(t,e)),e+=2;return i},n.head={},n.head.parse=function(t,e,s){var i=n._bin,o={};return i.readFixed(t,e),o.fontRevision=i.readFixed(t,e+=4),i.readUint(t,e+=4),i.readUint(t,e+=4),o.flags=i.readUshort(t,e+=4),o.unitsPerEm=i.readUshort(t,e+=2),o.created=i.readUint64(t,e+=2),o.modified=i.readUint64(t,e+=8),o.xMin=i.readShort(t,e+=8),o.yMin=i.readShort(t,e+=2),o.xMax=i.readShort(t,e+=2),o.yMax=i.readShort(t,e+=2),o.macStyle=i.readUshort(t,e+=2),o.lowestRecPPEM=i.readUshort(t,e+=2),o.fontDirectionHint=i.readShort(t,e+=2),o.indexToLocFormat=i.readShort(t,e+=2),o.glyphDataFormat=i.readShort(t,e+=2),e+=2,o},n.hhea={},n.hhea.parse=function(t,e,s){var i=n._bin,o={};return i.readFixed(t,e),o.ascender=i.readShort(t,e+=4),o.descender=i.readShort(t,e+=2),o.lineGap=i.readShort(t,e+=2),o.advanceWidthMax=i.readUshort(t,e+=2),o.minLeftSideBearing=i.readShort(t,e+=2),o.minRightSideBearing=i.readShort(t,e+=2),o.xMaxExtent=i.readShort(t,e+=2),o.caretSlopeRise=i.readShort(t,e+=2),o.caretSlopeRun=i.readShort(t,e+=2),o.caretOffset=i.readShort(t,e+=2),e+=2,o.metricDataFormat=i.readShort(t,e+=8),o.numberOfHMetrics=i.readUshort(t,e+=2),e+=2,o},n.hmtx={},n.hmtx.parse=function(t,e,s,i){for(var o=n._bin,a={aWidth:[],lsBearing:[]},c=0,f=0,d=0;d<i.maxp.numGlyphs;d++)d<i.hhea.numberOfHMetrics&&(c=o.readUshort(t,e),f=o.readShort(t,e+=2),e+=2),a.aWidth.push(c),a.lsBearing.push(f);return a},n.kern={},n.kern.parse=function(t,e,s,i){var o=n._bin,a=o.readUshort(t,e);if(e+=2,1==a)return n.kern.parseV1(t,e-2,s,i);var c=o.readUshort(t,e);e+=2;for(var f={glyph1:[],rval:[]},d=0;d<c;d++){s=o.readUshort(t,e+=2);var C=o.readUshort(t,e+=2)>>>8;if(0!=(C&=15))throw"unknown kern table format: "+C;e=n.kern.readFormat0(t,e+=2,f)}return f},n.kern.parseV1=function(t,e,s,i){var o=n._bin;o.readFixed(t,e);var a=o.readUint(t,e+=4);e+=4;for(var c={glyph1:[],rval:[]},f=0;f<a;f++){o.readUint(t,e);var d=o.readUshort(t,e+=4);o.readUshort(t,e+=2);var h=d>>>8;if(0!=(h&=15))throw"unknown kern table format: "+h;e=n.kern.readFormat0(t,e+=2,c)}return c},n.kern.readFormat0=function(t,e,s){var i=n._bin,o=-1,a=i.readUshort(t,e);i.readUshort(t,e+=2),i.readUshort(t,e+=2),i.readUshort(t,e+=2),e+=2;for(var c=0;c<a;c++){var f=i.readUshort(t,e),d=i.readUshort(t,e+=2),h=i.readShort(t,e+=2);e+=2,f!=o&&(s.glyph1.push(f),s.rval.push({glyph2:[],vals:[]}));var C=s.rval[s.rval.length-1];C.glyph2.push(d),C.vals.push(h),o=f}return e},n.loca={},n.loca.parse=function(t,e,s,i){var o=n._bin,a=[],c=i.head.indexToLocFormat,f=i.maxp.numGlyphs+1;if(0==c)for(var d=0;d<f;d++)a.push(o.readUshort(t,e+(d<<1))<<1);if(1==c)for(d=0;d<f;d++)a.push(o.readUint(t,e+(d<<2)));return a},n.maxp={},n.maxp.parse=function(t,e,s){var i=n._bin,o={},a=i.readUint(t,e);return o.numGlyphs=i.readUshort(t,e+=4),e+=2,65536==a&&(o.maxPoints=i.readUshort(t,e),o.maxContours=i.readUshort(t,e+=2),o.maxCompositePoints=i.readUshort(t,e+=2),o.maxCompositeContours=i.readUshort(t,e+=2),o.maxZones=i.readUshort(t,e+=2),o.maxTwilightPoints=i.readUshort(t,e+=2),o.maxStorage=i.readUshort(t,e+=2),o.maxFunctionDefs=i.readUshort(t,e+=2),o.maxInstructionDefs=i.readUshort(t,e+=2),o.maxStackElements=i.readUshort(t,e+=2),o.maxSizeOfInstructions=i.readUshort(t,e+=2),o.maxComponentElements=i.readUshort(t,e+=2),o.maxComponentDepth=i.readUshort(t,e+=2),e+=2),o},n.name={},n.name.parse=function(t,e,s){var i=n._bin,o={};i.readUshort(t,e);var a=i.readUshort(t,e+=2);i.readUshort(t,e+=2);for(var c,f=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],d=e+=2,h=0;h<a;h++){var C=i.readUshort(t,e),x=i.readUshort(t,e+=2),S=i.readUshort(t,e+=2),m=i.readUshort(t,e+=2),g=i.readUshort(t,e+=2),y=i.readUshort(t,e+=2);e+=2;var p,_=f[m],T=d+12*a+y;if(0==C)p=i.readUnicode(t,T,g/2);else if(3==C&&0==x)p=i.readUnicode(t,T,g/2);else if(0==x)p=i.readASCII(t,T,g);else if(1==x)p=i.readUnicode(t,T,g/2);else if(3==x)p=i.readUnicode(t,T,g/2);else{if(1!=C)throw"unknown encoding "+x+", platformID: "+C;p=i.readASCII(t,T,g),console.debug("reading unknown MAC encoding "+x+" as ASCII")}var B="p"+C+","+S.toString(16);null==o[B]&&(o[B]={}),o[B][void 0!==_?_:m]=p,o[B]._lang=S}for(var w in o)if(null!=o[w].postScriptName&&1033==o[w]._lang)return o[w];for(var w in o)if(null!=o[w].postScriptName&&0==o[w]._lang)return o[w];for(var w in o)if(null!=o[w].postScriptName&&3084==o[w]._lang)return o[w];for(var w in o)if(null!=o[w].postScriptName)return o[w];for(var w in o){c=w;break}return console.debug("returning name table with languageID "+o[c]._lang),o[c]},n["OS/2"]={},n["OS/2"].parse=function(t,e,s){var i=n._bin.readUshort(t,e);e+=2;var o={};if(0==i)n["OS/2"].version0(t,e,o);else if(1==i)n["OS/2"].version1(t,e,o);else if(2==i||3==i||4==i)n["OS/2"].version2(t,e,o);else{if(5!=i)throw"unknown OS/2 table version: "+i;n["OS/2"].version5(t,e,o)}return o},n["OS/2"].version0=function(t,e,s){var i=n._bin;return s.xAvgCharWidth=i.readShort(t,e),s.usWeightClass=i.readUshort(t,e+=2),s.usWidthClass=i.readUshort(t,e+=2),s.fsType=i.readUshort(t,e+=2),s.ySubscriptXSize=i.readShort(t,e+=2),s.ySubscriptYSize=i.readShort(t,e+=2),s.ySubscriptXOffset=i.readShort(t,e+=2),s.ySubscriptYOffset=i.readShort(t,e+=2),s.ySuperscriptXSize=i.readShort(t,e+=2),s.ySuperscriptYSize=i.readShort(t,e+=2),s.ySuperscriptXOffset=i.readShort(t,e+=2),s.ySuperscriptYOffset=i.readShort(t,e+=2),s.yStrikeoutSize=i.readShort(t,e+=2),s.yStrikeoutPosition=i.readShort(t,e+=2),s.sFamilyClass=i.readShort(t,e+=2),s.panose=i.readBytes(t,e+=2,10),s.ulUnicodeRange1=i.readUint(t,e+=10),s.ulUnicodeRange2=i.readUint(t,e+=4),s.ulUnicodeRange3=i.readUint(t,e+=4),s.ulUnicodeRange4=i.readUint(t,e+=4),s.achVendID=[i.readInt8(t,e+=4),i.readInt8(t,e+1),i.readInt8(t,e+2),i.readInt8(t,e+3)],s.fsSelection=i.readUshort(t,e+=4),s.usFirstCharIndex=i.readUshort(t,e+=2),s.usLastCharIndex=i.readUshort(t,e+=2),s.sTypoAscender=i.readShort(t,e+=2),s.sTypoDescender=i.readShort(t,e+=2),s.sTypoLineGap=i.readShort(t,e+=2),s.usWinAscent=i.readUshort(t,e+=2),s.usWinDescent=i.readUshort(t,e+=2),e+2},n["OS/2"].version1=function(t,e,s){var i=n._bin;return e=n["OS/2"].version0(t,e,s),s.ulCodePageRange1=i.readUint(t,e),s.ulCodePageRange2=i.readUint(t,e+=4),e+4},n["OS/2"].version2=function(t,e,s){var i=n._bin;return e=n["OS/2"].version1(t,e,s),s.sxHeight=i.readShort(t,e),s.sCapHeight=i.readShort(t,e+=2),s.usDefault=i.readUshort(t,e+=2),s.usBreak=i.readUshort(t,e+=2),s.usMaxContext=i.readUshort(t,e+=2),e+2},n["OS/2"].version5=function(t,e,s){var i=n._bin;return e=n["OS/2"].version2(t,e,s),s.usLowerOpticalPointSize=i.readUshort(t,e),s.usUpperOpticalPointSize=i.readUshort(t,e+=2),e+2},n.post={},n.post.parse=function(t,e,s){var i=n._bin,o={};return o.version=i.readFixed(t,e),o.italicAngle=i.readFixed(t,e+=4),o.underlinePosition=i.readShort(t,e+=4),o.underlineThickness=i.readShort(t,e+=2),e+=2,o},null==n&&(n={}),null==n.U&&(n.U={}),n.U.codeToGlyph=function(t,e){var s=t.cmap,i=-1;if(null!=s.p0e4?i=s.p0e4:null!=s.p3e1?i=s.p3e1:null!=s.p1e0?i=s.p1e0:null!=s.p0e3&&(i=s.p0e3),-1==i)throw"no familiar platform and encoding!";var o=s.tables[i];if(0==o.format)return e>=o.map.length?0:o.map[e];if(4==o.format){for(var a=-1,c=0;c<o.endCount.length;c++)if(e<=o.endCount[c]){a=c;break}return-1==a||o.startCount[a]>e?0:65535&(0!=o.idRangeOffset[a]?o.glyphIdArray[e-o.startCount[a]+(o.idRangeOffset[a]>>1)-(o.idRangeOffset.length-a)]:e+o.idDelta[a])}if(12==o.format){if(e>o.groups[o.groups.length-1][1])return 0;for(c=0;c<o.groups.length;c++){var f=o.groups[c];if(f[0]<=e&&e<=f[1])return f[2]+(e-f[0])}return 0}throw"unknown cmap table format "+o.format},n.U.glyphToPath=function(t,e){var s={cmds:[],crds:[]};if(t.SVG&&t.SVG.entries[e]){var i=t.SVG.entries[e];return null==i?s:("string"==typeof i&&(i=n.SVG.toPath(i),t.SVG.entries[e]=i),i)}if(t.CFF){var o={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:t.CFF.Private?t.CFF.Private.defaultWidthX:0,open:!1},a=t.CFF,c=t.CFF.Private;if(a.ROS){for(var f=0;a.FDSelect[f+2]<=e;)f+=2;c=a.FDArray[a.FDSelect[f+1]].Private}n.U._drawCFF(t.CFF.CharStrings[e],o,a,c,s)}else t.glyf&&n.U._drawGlyf(e,t,s);return s},n.U._drawGlyf=function(t,e,s){var i=e.glyf[t];null==i&&(i=e.glyf[t]=n.glyf._parseGlyf(e,t)),null!=i&&(i.noc>-1?n.U._simpleGlyph(i,s):n.U._compoGlyph(i,e,s))},n.U._simpleGlyph=function(t,e){for(var s=0;s<t.noc;s++){for(var i=0==s?0:t.endPts[s-1]+1,o=t.endPts[s],a=i;a<=o;a++){var c=a==i?o:a-1,f=a==o?i:a+1,d=1&t.flags[a],h=1&t.flags[c],C=1&t.flags[f],x=t.xs[a],S=t.ys[a];if(a==i)if(d){if(!h){n.U.P.moveTo(e,x,S);continue}n.U.P.moveTo(e,t.xs[c],t.ys[c])}else h?n.U.P.moveTo(e,t.xs[c],t.ys[c]):n.U.P.moveTo(e,(t.xs[c]+x)/2,(t.ys[c]+S)/2);d?h&&n.U.P.lineTo(e,x,S):C?n.U.P.qcurveTo(e,x,S,t.xs[f],t.ys[f]):n.U.P.qcurveTo(e,x,S,(x+t.xs[f])/2,(S+t.ys[f])/2)}n.U.P.closePath(e)}},n.U._compoGlyph=function(t,e,s){for(var i=0;i<t.parts.length;i++){var o={cmds:[],crds:[]},a=t.parts[i];n.U._drawGlyf(a.glyphIndex,e,o);for(var c=a.m,f=0;f<o.crds.length;f+=2){var d=o.crds[f],h=o.crds[f+1];s.crds.push(d*c.a+h*c.b+c.tx),s.crds.push(d*c.c+h*c.d+c.ty)}for(f=0;f<o.cmds.length;f++)s.cmds.push(o.cmds[f])}},n.U._getGlyphClass=function(t,e){var s=n._lctf.getInterval(e,t);return-1==s?0:e[s+2]},n.U.getPairAdjustment=function(t,e,s){var i=0,o=!1;if(t.GPOS)for(var a=t.GPOS,c=a.lookupList,f=a.featureList,d=[],h=0;h<f.length;h++){var C=f[h];if("kern"==C.tag){o=!0;for(var x=0;x<C.tab.length;x++)if(!d[C.tab[x]]){d[C.tab[x]]=!0;for(var S=c[C.tab[x]],m=0;m<S.tabs.length;m++)if(null!=S.tabs[m]){var g,y=S.tabs[m];if((!y.coverage||-1!=(g=n._lctf.coverageIndex(y.coverage,e)))&&1!=S.ltype&&2==S.ltype){var p;if(1==y.fmt){var _=y.pairsets[g];for(h=0;h<_.length;h++)_[h].gid2==s&&(p=_[h])}else if(2==y.fmt){var T=n.U._getGlyphClass(e,y.classDef1),B=n.U._getGlyphClass(s,y.classDef2);p=y.matrix[T][B]}p&&p.val1&&p.val1[2]&&(i+=p.val1[2]),p&&p.val2&&p.val2[0]&&(i+=p.val2[0])}}}}}if(t.kern&&!o){var w=t.kern.glyph1.indexOf(e);if(-1!=w){var j=t.kern.rval[w].glyph2.indexOf(s);-1!=j&&(i+=t.kern.rval[w].vals[j])}}return i},n.U._applySubs=function(t,e,s,i){for(var o=t.length-e-1,a=0;a<s.tabs.length;a++)if(null!=s.tabs[a]){var c,f=s.tabs[a];if(!f.coverage||-1!=(c=n._lctf.coverageIndex(f.coverage,t[e])))if(1==s.ltype)t[e]=1==f.fmt?t[e]+f.delta:f.newg[c];else if(4==s.ltype)for(var d=f.vals[c],h=0;h<d.length;h++){var C=d[h],x=C.chain.length;if(!(x>o)){for(var S=!0,m=0,g=0;g<x;g++){for(;-1==t[e+m+(1+g)];)m++;C.chain[g]!=t[e+m+(1+g)]&&(S=!1)}if(S){for(t[e]=C.nglyph,g=0;g<x+m;g++)t[e+g+1]=-1;break}}}else if(5==s.ltype&&2==f.fmt)for(var y=n._lctf.getInterval(f.cDef,t[e]),_=f.scset[f.cDef[y+2]],T=0;T<_.length;T++){var B=_[T],w=B.input;if(!(w.length>o)){for(S=!0,g=0;g<w.length;g++){var j=n._lctf.getInterval(f.cDef,t[e+1+g]);if(-1==y&&f.cDef[j+2]!=w[g]){S=!1;break}}if(S){var ee=B.substLookupRecords;for(h=0;h<ee.length;h+=2);}}}else if(6==s.ltype&&3==f.fmt){if(!n.U._glsCovered(t,f.backCvg,e-f.backCvg.length)||!n.U._glsCovered(t,f.inptCvg,e)||!n.U._glsCovered(t,f.ahedCvg,e+f.inptCvg.length))continue;var J=f.lookupRec;for(T=0;T<J.length;T+=2)n.U._applySubs(t,e+(y=J[T]),i[J[T+1]],i)}}},n.U._glsCovered=function(t,e,s){for(var i=0;i<e.length;i++)if(-1==n._lctf.coverageIndex(e[i],t[s+i]))return!1;return!0},n.U.glyphsToPath=function(t,e,s){for(var i={cmds:[],crds:[]},o=0,a=0;a<e.length;a++){var c=e[a];if(-1!=c){for(var f=a<e.length-1&&-1!=e[a+1]?e[a+1]:0,d=n.U.glyphToPath(t,c),h=0;h<d.crds.length;h+=2)i.crds.push(d.crds[h]+o),i.crds.push(d.crds[h+1]);for(s&&i.cmds.push(s),h=0;h<d.cmds.length;h++)i.cmds.push(d.cmds[h]);s&&i.cmds.push("X"),o+=t.hmtx.aWidth[c],a<e.length-1&&(o+=n.U.getPairAdjustment(t,c,f))}}return i},n.U.P={},n.U.P.moveTo=function(t,e,s){t.cmds.push("M"),t.crds.push(e,s)},n.U.P.lineTo=function(t,e,s){t.cmds.push("L"),t.crds.push(e,s)},n.U.P.curveTo=function(t,e,s,i,o,a,c){t.cmds.push("C"),t.crds.push(e,s,i,o,a,c)},n.U.P.qcurveTo=function(t,e,s,i,o){t.cmds.push("Q"),t.crds.push(e,s,i,o)},n.U.P.closePath=function(t){t.cmds.push("Z")},n.U._drawCFF=function(t,e,s,i,o){for(var a=e.stack,c=e.nStems,f=e.haveWidth,d=e.width,h=e.open,C=0,x=e.x,S=e.y,m=0,g=0,y=0,p=0,_=0,T=0,B=0,w=0,j=0,ee=0,J={val:0,size:0};C<t.length;){n.CFF.getCharString(t,C,J);var N=J.val;if(C+=J.size,"o1"==N||"o18"==N)a.length%2!=0&&!f&&(d=a.shift()+i.nominalWidthX),c+=a.length>>1,a.length=0,f=!0;else if("o3"==N||"o23"==N)a.length%2!=0&&!f&&(d=a.shift()+i.nominalWidthX),c+=a.length>>1,a.length=0,f=!0;else if("o4"==N)a.length>1&&!f&&(d=a.shift()+i.nominalWidthX,f=!0),h&&n.U.P.closePath(o),S+=a.pop(),n.U.P.moveTo(o,x,S),h=!0;else if("o5"==N)for(;a.length>0;)x+=a.shift(),S+=a.shift(),n.U.P.lineTo(o,x,S);else if("o6"==N||"o7"==N)for(var k=a.length,D="o6"==N,q=0;q<k;q++){var W=a.shift();D?x+=W:S+=W,D=!D,n.U.P.lineTo(o,x,S)}else if("o8"==N||"o24"==N){k=a.length;for(var ce=0;ce+6<=k;)m=x+a.shift(),g=S+a.shift(),y=m+a.shift(),p=g+a.shift(),x=y+a.shift(),S=p+a.shift(),n.U.P.curveTo(o,m,g,y,p,x,S),ce+=6;"o24"==N&&(x+=a.shift(),S+=a.shift(),n.U.P.lineTo(o,x,S))}else{if("o11"==N)break;if("o1234"==N||"o1235"==N||"o1236"==N||"o1237"==N)"o1234"==N&&(g=S,y=(m=x+a.shift())+a.shift(),ee=p=g+a.shift(),T=p,w=S,x=(B=(_=(j=y+a.shift())+a.shift())+a.shift())+a.shift(),n.U.P.curveTo(o,m,g,y,p,j,ee),n.U.P.curveTo(o,_,T,B,w,x,S)),"o1235"==N&&(m=x+a.shift(),g=S+a.shift(),y=m+a.shift(),p=g+a.shift(),j=y+a.shift(),ee=p+a.shift(),_=j+a.shift(),T=ee+a.shift(),B=_+a.shift(),w=T+a.shift(),x=B+a.shift(),S=w+a.shift(),a.shift(),n.U.P.curveTo(o,m,g,y,p,j,ee),n.U.P.curveTo(o,_,T,B,w,x,S)),"o1236"==N&&(m=x+a.shift(),g=S+a.shift(),y=m+a.shift(),ee=p=g+a.shift(),T=p,B=(_=(j=y+a.shift())+a.shift())+a.shift(),w=T+a.shift(),x=B+a.shift(),n.U.P.curveTo(o,m,g,y,p,j,ee),n.U.P.curveTo(o,_,T,B,w,x,S)),"o1237"==N&&(m=x+a.shift(),g=S+a.shift(),y=m+a.shift(),p=g+a.shift(),j=y+a.shift(),ee=p+a.shift(),_=j+a.shift(),T=ee+a.shift(),B=_+a.shift(),w=T+a.shift(),Math.abs(B-x)>Math.abs(w-S)?x=B+a.shift():S=w+a.shift(),n.U.P.curveTo(o,m,g,y,p,j,ee),n.U.P.curveTo(o,_,T,B,w,x,S));else if("o14"==N){if(a.length>0&&!f&&(d=a.shift()+s.nominalWidthX,f=!0),4==a.length){var fe=a.shift(),z=a.shift(),I=a.shift(),b=a.shift(),F=n.CFF.glyphBySE(s,I),E=n.CFF.glyphBySE(s,b);n.U._drawCFF(s.CharStrings[F],e,s,i,o),e.x=fe,e.y=z,n.U._drawCFF(s.CharStrings[E],e,s,i,o)}h&&(n.U.P.closePath(o),h=!1)}else if("o19"==N||"o20"==N)a.length%2!=0&&!f&&(d=a.shift()+i.nominalWidthX),c+=a.length>>1,a.length=0,f=!0,C+=c+7>>3;else if("o21"==N)a.length>2&&!f&&(d=a.shift()+i.nominalWidthX,f=!0),S+=a.pop(),x+=a.pop(),h&&n.U.P.closePath(o),n.U.P.moveTo(o,x,S),h=!0;else if("o22"==N)a.length>1&&!f&&(d=a.shift()+i.nominalWidthX,f=!0),x+=a.pop(),h&&n.U.P.closePath(o),n.U.P.moveTo(o,x,S),h=!0;else if("o25"==N){for(;a.length>6;)x+=a.shift(),S+=a.shift(),n.U.P.lineTo(o,x,S);m=x+a.shift(),g=S+a.shift(),y=m+a.shift(),p=g+a.shift(),x=y+a.shift(),S=p+a.shift(),n.U.P.curveTo(o,m,g,y,p,x,S)}else if("o26"==N)for(a.length%2&&(x+=a.shift());a.length>0;)m=x,g=S+a.shift(),x=y=m+a.shift(),S=(p=g+a.shift())+a.shift(),n.U.P.curveTo(o,m,g,y,p,x,S);else if("o27"==N)for(a.length%2&&(S+=a.shift());a.length>0;)g=S,y=(m=x+a.shift())+a.shift(),p=g+a.shift(),x=y+a.shift(),n.U.P.curveTo(o,m,g,y,p,x,S=p);else if("o10"==N||"o29"==N){var O="o10"==N?i:s;if(0==a.length)console.debug("error: empty stack");else{var P=a.pop(),R=O.Subrs[P+O.Bias];e.x=x,e.y=S,e.nStems=c,e.haveWidth=f,e.width=d,e.open=h,n.U._drawCFF(R,e,s,i,o),x=e.x,S=e.y,c=e.nStems,f=e.haveWidth,d=e.width,h=e.open}}else if("o30"==N||"o31"==N){var M=a.length,G=(ce=0,"o31"==N);for(ce+=M-(k=-3&M);ce<k;)G?(g=S,y=(m=x+a.shift())+a.shift(),S=(p=g+a.shift())+a.shift(),k-ce==5?(x=y+a.shift(),ce++):x=y,G=!1):(m=x,g=S+a.shift(),y=m+a.shift(),p=g+a.shift(),x=y+a.shift(),k-ce==5?(S=p+a.shift(),ce++):S=p,G=!0),n.U.P.curveTo(o,m,g,y,p,x,S),ce+=4}else{if("o"==(N+"").charAt(0))throw console.debug("Unknown operation: "+N,t),N;a.push(N)}}}e.x=x,e.y=S,e.nStems=c,e.haveWidth=f,e.width=d,e.open=h};var u={Typr:n};return l.Typr=n,l.default=u,Object.defineProperty(l,"__esModule",{value:!0}),l}({}).Typr},function po(){return function(l){var n=Uint8Array,r=Uint16Array,u=Uint32Array,t=new n([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),e=new n([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),s=new n([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),i=function(N,k){for(var D=new r(31),q=0;q<31;++q)D[q]=k+=1<<N[q-1];var W=new u(D[30]);for(q=1;q<30;++q)for(var ce=D[q];ce<D[q+1];++ce)W[ce]=ce-D[q]<<5|q;return[D,W]},o=i(t,2),a=o[0],c=o[1];a[28]=258,c[258]=28;for(var f=i(e,0)[0],d=new r(32768),h=0;h<32768;++h){var C=(43690&h)>>>1|(21845&h)<<1;C=(61680&(C=(52428&C)>>>2|(13107&C)<<2))>>>4|(3855&C)<<4,d[h]=((65280&C)>>>8|(255&C)<<8)>>>1}var x=function(N,k,D){for(var q=N.length,W=0,ce=new r(k);W<q;++W)++ce[N[W]-1];var fe,z=new r(k);for(W=0;W<k;++W)z[W]=z[W-1]+ce[W-1]<<1;if(D){fe=new r(1<<k);var I=15-k;for(W=0;W<q;++W)if(N[W])for(var b=W<<4|N[W],F=k-N[W],E=z[N[W]-1]++<<F,O=E|(1<<F)-1;E<=O;++E)fe[d[E]>>>I]=b}else for(fe=new r(q),W=0;W<q;++W)N[W]&&(fe[W]=d[z[N[W]-1]++]>>>15-N[W]);return fe},S=new n(288);for(h=0;h<144;++h)S[h]=8;for(h=144;h<256;++h)S[h]=9;for(h=256;h<280;++h)S[h]=7;for(h=280;h<288;++h)S[h]=8;var m=new n(32);for(h=0;h<32;++h)m[h]=5;var g=x(S,9,1),y=x(m,5,1),p=function(N){for(var k=N[0],D=1;D<N.length;++D)N[D]>k&&(k=N[D]);return k},_=function(N,k,D){var q=k/8|0;return(N[q]|N[q+1]<<8)>>(7&k)&D},T=function(N,k){var D=k/8|0;return(N[D]|N[D+1]<<8|N[D+2]<<16)>>(7&k)},B=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],w=function(N,k,D){var q=new Error(k||B[N]);if(q.code=N,Error.captureStackTrace&&Error.captureStackTrace(q,w),!D)throw q;return q},ee=new n(0),J=typeof TextDecoder<"u"&&new TextDecoder;try{J.decode(ee,{stream:!0})}catch{}return l.convert_streams=function(N){var k=new DataView(N),D=0;function q(){var X=k.getUint16(D);return D+=2,X}function W(){var X=k.getUint32(D);return D+=4,X}function ce(X){H.setUint16(le,X),le+=2}function fe(X){H.setUint32(le,X),le+=4}for(var z={signature:W(),flavor:W(),length:W(),numTables:q(),reserved:q(),totalSfntSize:W(),majorVersion:q(),minorVersion:q(),metaOffset:W(),metaLength:W(),metaOrigLength:W(),privOffset:W(),privLength:W()},I=0;Math.pow(2,I)<=z.numTables;)I++;I--;for(var b=16*Math.pow(2,I),F=16*z.numTables-b,E=12,O=[],P=0;P<z.numTables;P++)O.push({tag:W(),offset:W(),compLength:W(),origLength:W(),origChecksum:W()}),E+=16;var R,M=new Uint8Array(12+16*O.length+O.reduce(function(X,V){return X+V.origLength+4},0)),G=M.buffer,H=new DataView(G),le=0;return fe(z.flavor),ce(z.numTables),ce(b),ce(I),ce(F),O.forEach(function(X){fe(X.tag),fe(X.origChecksum),fe(E),fe(X.origLength),X.outOffset=E,(E+=X.origLength)%4!=0&&(E+=4-E%4)}),O.forEach(function(X){var _e=N.slice(X.offset,X.offset+X.compLength);if(X.compLength!=X.origLength){var pe=new Uint8Array(X.origLength);!function(N,k,D){var q=N.length;if(!q||D&&!D.l&&q<5)return k||new n(0);var W=!k||D,ce=!D||D.i;D||(D={}),k||(k=new n(3*q));var fe,se,Be,Ce,z=function(se){var Be=k.length;if(se>Be){var Ce=new n(Math.max(2*Be,se));Ce.set(k),k=Ce}},I=D.f||0,b=D.p||0,F=D.b||0,E=D.l,O=D.d,P=D.m,R=D.n,M=8*q;do{if(!E){D.f=I=_(N,b,1);var G=_(N,b+1,3);if(b+=3,!G){var H=N[(Z=((fe=b)/8|0)+(7&fe&&1)+4)-4]|N[Z-3]<<8,le=Z+H;if(le>q){ce&&w(0);break}W&&z(F+H),k.set(N.subarray(Z,le),F),D.b=F+=H,D.p=b=8*le;continue}if(1==G)E=g,O=y,P=9,R=5;else if(2==G){var X=_(N,b,31)+257,V=_(N,b+10,15)+4,_e=X+_(N,b+5,31)+1;b+=14;for(var pe=new n(_e),te=new n(19),ae=0;ae<V;++ae)te[s[ae]]=_(N,b+3*ae,7);b+=3*V;var ge=p(te),A=(1<<ge)-1,ie=x(te,ge,1);for(ae=0;ae<_e;){var Z,U=ie[_(N,b,A)];if(b+=15&U,(Z=U>>>4)<16)pe[ae++]=Z;else{var be=0,K=0;for(16==Z?(K=3+_(N,b,3),b+=2,be=pe[ae-1]):17==Z?(K=3+_(N,b,7),b+=3):18==Z&&(K=11+_(N,b,127),b+=7);K--;)pe[ae++]=be}}var re=pe.subarray(0,X),Y=pe.subarray(X);P=p(re),R=p(Y),E=x(re,P,1),O=x(Y,R,1)}else w(1);if(b>M){ce&&w(0);break}}W&&z(F+131072);for(var ve=(1<<P)-1,ye=(1<<R)-1,Q=b;;Q=b){var de=(be=E[T(N,b)&ve])>>>4;if((b+=15&be)>M){ce&&w(0);break}if(be||w(2),de<256)k[F++]=de;else{if(256==de){Q=b,E=null;break}var xe=de-254;if(de>264){var we=t[ae=de-257];xe=_(N,b,(1<<we)-1)+a[ae],b+=we}var Pe=O[T(N,b)&ye],Oe=Pe>>>4;if(Pe||w(3),b+=15&Pe,Y=f[Oe],Oe>3&&(we=e[Oe],Y+=T(N,b)&(1<<we)-1,b+=we),b>M){ce&&w(0);break}W&&z(F+131072);for(var he=F+xe;F<he;F+=4)k[F]=k[F-Y],k[F+1]=k[F+1-Y],k[F+2]=k[F+2-Y],k[F+3]=k[F+3-Y];F=he}}D.l=E,D.p=Q,D.b=F,E&&(I=1,D.m=P,D.d=O,D.n=R)}while(!I);F==k.length||(se=k,(null==(Be=0)||Be<0)&&(Be=0),(null==(Ce=F)||Ce>se.length)&&(Ce=se.length),new(se instanceof r?r:se instanceof u?u:n)(Ce-Be).set(se.subarray(Be,Ce)))}(new Uint8Array(_e,2),pe)}else pe=new Uint8Array(_e);M.set(pe,X.outOffset);var te=0;(E=X.outOffset+X.origLength)%4!=0&&(te=4-E%4),M.set(new Uint8Array(te).buffer,X.outOffset+X.origLength),R=E+te}),G.slice(0,R)},Object.defineProperty(l,"__esModule",{value:!0}),l}({}).convert_streams},function mo(l,n){const r={M:2,L:2,Q:4,C:6,Z:0},u={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"};let c;function f(p){if(!c){const _={R:2,L:1,D:4,C:16,U:32,T:8};c=new Map;for(let T in u){let B=0;u[T].split(",").forEach(w=>{let[j,ee]=w.split("+");j=parseInt(j,36),ee=ee?parseInt(ee,36):0,c.set(B+=j,_[T]);for(let J=ee;J--;)c.set(++B,_[T])})}}return c.get(p)||32}const S=[null,"isol","init","fina","medi"];function m(p){const _=new Uint8Array(p.length);let T=32,B=1,w=-1;for(let j=0;j<p.length;j++){const ee=p.codePointAt(j);let J=0|f(ee),N=1;8&J||(21&T?22&J?(N=3,(1===B||3===B)&&_[w]++):33&J&&(2===B||4===B)&&_[w]--:34&T&&(2===B||4===B)&&_[w]--,B=_[j]=N,T=J,w=j,ee>65535&&j++)}return _}return function(_){const T=new Uint8Array(_,0,4),B=l._bin.readASCII(T,0,4);if("wOFF"===B)_=n(_);else if("wOF2"===B)throw new Error("woff2 fonts not supported");return function y(p){const _=Object.create(null),T={unitsPerEm:p.head.unitsPerEm,ascender:p.hhea.ascender,descender:p.hhea.descender,forEachGlyph(B,w,j,ee){let J=0;const N=1/T.unitsPerEm*w,k=function g(p,_){const T=[];for(let w=0;w<_.length;w++){const j=_.codePointAt(w);j>65535&&w++,T.push(l.U.codeToGlyph(p,j))}const B=p.GSUB;if(B){const{lookupList:w,featureList:j}=B;let ee;const J=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws)$/,N=[];j.forEach(k=>{if(J.test(k.tag))for(let D=0;D<k.tab.length;D++){if(N[k.tab[D]])continue;N[k.tab[D]]=!0;const q=w[k.tab[D]],W=/^(isol|init|fina|medi)$/.test(k.tag);W&&!ee&&(ee=m(_));for(let ce=0;ce<T.length;ce++)(!ee||!W||S[ee[ce]]===k.tag)&&l.U._applySubs(T,ce,q,w)}})}return T}(p,B);let D=0,q=-1;return k.forEach((W,ce)=>{if(-1!==W){let fe=_[W];if(!fe){const{cmds:z,crds:I}=l.U.glyphToPath(p,W);let E,O,P,R,b="",F=0;for(let M=0,G=z.length;M<G;M++){const H=r[z[M]];b+=z[M];for(let le=1;le<=H;le++)b+=(le>1?",":"")+I[F++]}if(I.length){E=O=1/0,P=R=-1/0;for(let M=0,G=I.length;M<G;M+=2){let H=I[M],le=I[M+1];H<E&&(E=H),le<O&&(O=le),H>P&&(P=H),le>R&&(R=le)}}else E=P=O=R=0;fe=_[W]={index:W,advanceWidth:p.hmtx.aWidth[W],xMin:E,yMin:O,xMax:P,yMax:R,path:b,pathCommandCount:z.length}}-1!==q&&(J+=l.U.getPairAdjustment(p,q,W)*N),ee.call(null,fe,J,D),fe.advanceWidth&&(J+=fe.advanceWidth*N),j&&(J+=j*w),q=W}D+=B.codePointAt(D)>65535?2:1}),J}};return T}(l.parse(_)[0])}}],init:(l,n,r)=>r(l(),n())}),gt={defaultFontURL:"https://fonts.gstatic.com/s/roboto/v18/KFOmCnqEu92Fr1Mu4mxM.woff",sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},bo=new $.Ilk;let rn=!1;function bt(){return(self.performance||Date).now()}const Ht=Object.create(null);function nn(l,n){rn=!0,l=function an(l,n){for(let r in n)n.hasOwnProperty(r)&&(l[r]=n[r]);return l}({},l);const r=bt();if(l.font=function _o(l){return Xt||(Xt=typeof document>"u"?{}:document.createElement("a")),Xt.href=l,Xt.href}(l.font||gt.defaultFontURL),l.text=""+l.text,l.sdfGlyphSize=l.sdfGlyphSize||gt.sdfGlyphSize,null!=l.colorRanges){let f={};for(let d in l.colorRanges)if(l.colorRanges.hasOwnProperty(d)){let h=l.colorRanges[d];"number"!=typeof h&&(h=bo.set(h).getHex()),f[d]=h}l.colorRanges=f}Object.freeze(l);const{textureWidth:u,sdfExponent:t}=gt,{sdfGlyphSize:e}=l,s=u/e*4;let i=Ht[e];if(!i){const f=document.createElement("canvas");f.width=u,f.height=256*e/s,i=Ht[e]={glyphCount:0,sdfGlyphSize:e,sdfCanvas:f,sdfTexture:new $.xEZ(f,void 0,void 0,void 0,$.wem,$.wem),contextLost:!1,glyphsByFont:new Map},i.sdfTexture.generateMipmaps=!1,function yo(l){const n=l.sdfCanvas;n.addEventListener("webglcontextlost",r=>{console.log("Context Lost",r),r.preventDefault(),l.contextLost=!0}),n.addEventListener("webglcontextrestored",r=>{console.log("Context Restored",r),l.contextLost=!1;const u=[];l.glyphsByFont.forEach(t=>{t.forEach(e=>{u.push(on(e,l,!0))})}),it.all(u).then(()=>{sn(l),l.sdfTexture.needsUpdate=!0})})}(i)}const{sdfTexture:o,sdfCanvas:a}=i;let c=i.glyphsByFont.get(l.font);c||i.glyphsByFont.set(l.font,c=new Map),xo(l).then(f=>{const{glyphIds:d,glyphPositions:h,fontSize:C,unitsPerEm:x,timings:S}=f,m=[],g=new Float32Array(4*d.length),y=C/x;let p=0,_=0;const T=bt();d.forEach((J,N)=>{let k=c.get(J);if(!k){const{path:ce,pathBounds:fe}=f.glyphData[J],z=Math.max(fe[2]-fe[0],fe[3]-fe[1])/e*(gt.sdfMargin*e+.5),I=i.glyphCount++;c.set(J,k={path:ce,atlasIndex:I,sdfViewBox:[fe[0]-z,fe[1]-z,fe[2]+z,fe[3]+z]}),m.push(k)}const{sdfViewBox:D}=k,q=h[_++],W=h[_++];g[p++]=q+D[0]*y,g[p++]=W+D[1]*y,g[p++]=q+D[2]*y,g[p++]=W+D[3]*y,d[N]=k.atlasIndex}),S.quads=(S.quads||0)+(bt()-T);const B=bt();S.sdf={};const w=a.height,j=Math.ceil(i.glyphCount/s),ee=Math.pow(2,Math.ceil(Math.log2(j*e)));ee>w&&(console.info(`Increasing SDF texture size ${w}->${ee}`),ho(a,u,ee),o.dispose()),it.all(m.map(J=>on(J,i,l.gpuAccelerateSDF).then(({timing:N})=>{S.sdf[J.atlasIndex]=N}))).then(()=>{m.length&&!i.contextLost&&(sn(i),o.needsUpdate=!0),S.sdfTotal=bt()-B,S.total=bt()-r,n(Object.freeze({parameters:l,sdfTexture:o,sdfGlyphSize:e,sdfExponent:t,glyphBounds:g,glyphAtlasIndices:d,glyphColors:f.glyphColors,caretPositions:f.caretPositions,caretHeight:f.caretHeight,chunkedBounds:f.chunkedBounds,ascender:f.ascender,descender:f.descender,lineHeight:f.lineHeight,topBaseline:f.topBaseline,blockBounds:f.blockBounds,visibleBounds:f.visibleBounds,timings:f.timings,get totalBounds(){return console.log("totalBounds deprecated, use blockBounds instead"),f.blockBounds},get totalBlockSize(){console.log("totalBlockSize deprecated, use blockBounds instead");const[J,N,k,D]=f.blockBounds;return[k-J,D-N]}}))})}),it.all([]).then(()=>{i.contextLost||function fo(l){l._warm||(Wt.webgl.isSupported(l),l._warm=!0)}(a)})}function on({path:l,atlasIndex:n,sdfViewBox:r},{sdfGlyphSize:u,sdfCanvas:t,contextLost:e},s){if(e)return Promise.resolve({timing:-1});const{textureWidth:i,sdfExponent:o}=gt,a=Math.max(r[2]-r[0],r[3]-r[1]),c=Math.floor(n/4);return function co(l,n,r,u,t,e,s,i,o,a,c=!0){return c?uo(l,n,r,u,t,e,s,i,o,a).then(null,f=>(en||(console.warn("WebGL SDF generation failed, falling back to JS",f),en=!0),tn(l,n,r,u,t,e,s,i,o,a))):tn(l,n,r,u,t,e,s,i,o,a)}(u,u,l,r,a,o,t,c%(i/u)*u,Math.floor(c/(i/u))*u,n%4,s)}let Xt;function sn(l){if("function"!=typeof createImageBitmap){console.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas:n,sdfTexture:r}=l,{width:u,height:t}=n,e=l.sdfCanvas.getContext("webgl");let s=r.image.data;(!s||s.length!==u*t*4)&&(s=new Uint8Array(u*t*4),r.image={width:u,height:t,data:s},r.flipY=!1,r.isDataTexture=!0),e.readPixels(0,0,u,t,e.RGBA,e.UNSIGNED_BYTE,s)}}const xo=vt({name:"Typesetter",dependencies:[vt({name:"Typesetter",dependencies:[gt,vo,function lo(l,n,r){const{defaultFontURL:u}=r,t=Object.create(null),e=1/0,s=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,i=/[\s\-\u007C\u00AD\u2010\u2012-\u2014\u2027\u2056\u2E17\u2E40]/;function a(m,g){m||(m=u);let y=t[m];y?y.pending?y.pending.push(g):g(y):(t[m]={pending:[g]},function o(m,g){!function y(){const p=_=>{console.error(`Failure loading font ${m}${m===u?"":"; trying fallback"}`,_),m!==u&&(m=u,y())};try{const _=new XMLHttpRequest;_.open("get",m,!0),_.responseType="arraybuffer",_.onload=function(){if(_.status>=400)p(new Error(_.statusText));else if(_.status>0)try{const T=l(_.response);g(T)}catch(T){p(T)}},_.onerror=p,_.send()}catch(_){p(_)}}()}(m,p=>{let _=t[m].pending;t[m]=p,_.forEach(T=>T(p))}))}function c({text:m="",font:g=u,sdfGlyphSize:y=64,fontSize:p=1,letterSpacing:_=0,lineHeight:T="normal",maxWidth:B=e,direction:w,textAlign:j="left",textIndent:ee=0,whiteSpace:J="normal",overflowWrap:N="normal",anchorX:k=0,anchorY:D=0,includeCaretPositions:q=!1,chunkedBoundsSize:W=8192,colorRanges:ce=null},fe,z=!1){const I=C(),b={fontLoad:0,typesetting:0};m.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),m=m.replace(/\r\n/g,"\n").replace(/\r/g,"\n")),p=+p,_=+_,B=+B,T=T||"normal",ee=+ee,a(g,F=>{const E=isFinite(B);let O=null,P=null,R=null,M=null,G=null,H=null,le=null,X=0,V=0,_e="nowrap"!==J;const{ascender:pe,descender:te,unitsPerEm:ae}=F;b.fontLoad=C()-I;const ge=C(),A=p/ae;"normal"===T&&(T=(pe-te)/ae);const ie=((T*=p)-(pe-te)*A)/2,Z=-(pe*A+ie),U=Math.min(T,(pe-te)*A),be=(pe+te)/2*A-U/2;let K=ee,re=new x;const Y=[re];F.forEachGlyph(m,p,_,(Q,de,xe)=>{const we=m.charAt(xe),Pe=Q.advanceWidth*A,Oe=re.count;let he;if("isEmpty"in Q||(Q.isWhitespace=!!we&&/\s/.test(we),Q.canBreakAfter=!!we&&i.test(we),Q.isEmpty=Q.xMin===Q.xMax||Q.yMin===Q.yMax||s.test(we)),!Q.isWhitespace&&!Q.isEmpty&&V++,_e&&E&&!Q.isWhitespace&&de+Pe+K>B&&Oe){if(re.glyphAt(Oe-1).glyphObj.canBreakAfter)he=new x,K=-de;else for(let Be=Oe;Be--;){if(0===Be&&"break-word"===N){he=new x,K=-de;break}if(re.glyphAt(Be).glyphObj.canBreakAfter){he=re.splitAt(Be+1);const Ce=he.glyphAt(0).x;K-=Ce;for(let Je=he.count;Je--;)he.glyphAt(Je).x-=Ce;break}}he&&(re.isSoftWrapped=!0,re=he,Y.push(re),X=B)}let se=re.glyphAt(re.count);se.glyphObj=Q,se.x=de+K,se.width=Pe,se.charIndex=xe,"\n"===we&&(re=new x,Y.push(re),K=-(de+Pe+_*p)+ee)}),Y.forEach(Q=>{for(let de=Q.count;de--;){let{glyphObj:xe,x:we,width:Pe}=Q.glyphAt(de);if(!xe.isWhitespace)return Q.width=we+Pe,void(Q.width>X&&(X=Q.width))}});let ve=0,ye=0;if(k&&("number"==typeof k?ve=-k:"string"==typeof k&&(ve=-X*("left"===k?0:"center"===k?.5:"right"===k?1:d(k)))),D)if("number"==typeof D)ye=-D;else if("string"==typeof D){let Q=Y.length*T;ye="top"===D?0:"top-baseline"===D?-Z:"middle"===D?Q/2:"bottom"===D?Q:"bottom-baseline"===D?Q-ie+te*A:d(D)*Q}if(!z){const Q=n.getEmbeddingLevels(m,w);O=new Uint16Array(V),P=new Float32Array(2*V),R={},H=[e,e,-e,-e],le=[];let de=Z;q&&(G=new Float32Array(3*m.length)),ce&&(M=new Uint8Array(3*V));let Oe,he,xe=0,we=-1,Pe=-1;if(Y.forEach((se,Be)=>{let{count:Ce,width:Je}=se;if(Ce>0){let ze=0;for(let Fe=Ce;Fe--&&se.glyphAt(Fe).glyphObj.isWhitespace;)ze++;let Ae=0,at=0;if("center"===j)Ae=(X-Je)/2;else if("right"===j)Ae=X-Je;else if("justify"===j&&se.isSoftWrapped){let Fe=0;for(let Ne=Ce-ze;Ne--;)se.glyphAt(Ne).glyphObj.isWhitespace&&Fe++;at=(X-Je)/Fe}if(at||Ae){let Fe=0;for(let Ne=0;Ne<Ce;Ne++){let je=se.glyphAt(Ne);const Ze=je.glyphObj;je.x+=Ae+Fe,0!==at&&Ze.isWhitespace&&Ne<Ce-ze&&(Fe+=at,je.width+=at)}}const Mt=n.getReorderSegments(m,Q,se.glyphAt(0).charIndex,se.glyphAt(se.count-1).charIndex);for(let Fe=0;Fe<Mt.length;Fe++){const[Ne,je]=Mt[Fe];let Ze=1/0,De=-1/0;for(let Xe=0;Xe<Ce;Xe++)if(se.glyphAt(Xe).charIndex>=Ne){let ot=Xe,We=Xe;for(;We<Ce;We++){let Re=se.glyphAt(We);if(Re.charIndex>je)break;We<Ce-ze&&(Ze=Math.min(Ze,Re.x),De=Math.max(De,Re.x+Re.width))}for(let Re=ot;Re<We;Re++){const Ke=se.glyphAt(Re);Ke.x=De-(Ke.x+Ke.width-Ze)}break}}let Ve;const Ft=Fe=>Ve=Fe;for(let Fe=0;Fe<Ce;Fe++){let Ne=se.glyphAt(Fe);Ve=Ne.glyphObj;const je=Ve.index,Ze=1&Q.levels[Ne.charIndex];if(Ze){const De=n.getMirroredCharacter(m[Ne.charIndex]);De&&F.forEachGlyph(De,0,0,Ft)}if(q){const{charIndex:De}=Ne,Xe=Ne.x+ve,ot=Ne.x+Ne.width+ve;G[3*De]=Ze?ot:Xe,G[3*De+1]=Ze?Xe:ot,G[3*De+2]=de+be+ye;const We=De-we;We>1&&h(G,we,We),we=De}if(ce){const{charIndex:De}=Ne;for(;De>Pe;)Pe++,ce.hasOwnProperty(Pe)&&(he=ce[Pe])}if(!Ve.isWhitespace&&!Ve.isEmpty){const De=xe++;R[je]||(R[je]={path:Ve.path,pathBounds:[Ve.xMin,Ve.yMin,Ve.xMax,Ve.yMax]});const Xe=Ne.x+ve,ot=de+ye;P[2*De]=Xe,P[2*De+1]=ot;const We=Xe+Ve.xMin*A,Re=ot+Ve.yMin*A,Ke=Xe+Ve.xMax*A,st=ot+Ve.yMax*A;We<H[0]&&(H[0]=We),Re<H[1]&&(H[1]=Re),Ke>H[2]&&(H[2]=Ke),st>H[3]&&(H[3]=st),De%W==0&&(Oe={start:De,end:De,rect:[e,e,-e,-e]},le.push(Oe)),Oe.end++;const et=Oe.rect;if(We<et[0]&&(et[0]=We),Re<et[1]&&(et[1]=Re),Ke>et[2]&&(et[2]=Ke),st>et[3]&&(et[3]=st),O[De]=je,ce){const lt=3*De;M[lt]=he>>16&255,M[lt+1]=he>>8&255,M[lt+2]=255&he}}}}de-=T}),G){const se=m.length-we;se>1&&h(G,we,se)}}b.typesetting=C()-ge,fe({glyphIds:O,glyphPositions:P,glyphData:R,caretPositions:G,caretHeight:U,glyphColors:M,chunkedBounds:le,fontSize:p,unitsPerEm:ae,ascender:pe*A,descender:te*A,lineHeight:T,topBaseline:Z,blockBounds:[ve,ye-Y.length*T,ve+X,ye],visibleBounds:H,timings:b})})}function d(m){let g=m.match(/^([\d.]+)%$/),y=g?parseFloat(g[1]):NaN;return isNaN(y)?0:y/100}function h(m,g,y){const p=m[3*g],T=m[3*g+2],B=(m[3*g+1]-p)/y;for(let w=0;w<y;w++){const j=3*(g+w);m[j]=p+B*w,m[j+1]=p+B*(w+1),m[j+2]=T}}function C(){return(self.performance||Date).now()}function x(){this.data=[]}const S=["glyphObj","x","width","charIndex"];return x.prototype={width:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/S.length)},glyphAt(m){let g=x.flyweight;return g.data=this.data,g.index=m,g},splitAt(m){let g=new x;return g.data=this.data.splice(m*S.length),g}},x.flyweight=S.reduce((m,g,y,p)=>(Object.defineProperty(m,g,{get(){return this.data[this.index*S.length+y]},set(_){this.data[this.index*S.length+y]=_}}),m),{data:null,index:0}),{typeset:c,measure:function f(m,g){c(m,y=>{const[p,_,T,B]=y.blockBounds;g({width:T-p,height:B-_})},{metricsOnly:!0})},loadFont:a}},function Qn(){return function(n){var r={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},u={},t={};u.L=1,t[1]="L",Object.keys(r).forEach(function(A,ie){u[A]=1<<ie+1,t[u[A]]=A}),Object.freeze(u);var e=u.LRI|u.RLI|u.FSI,s=u.L|u.R|u.AL,i=u.B|u.S|u.WS|u.ON|u.FSI|u.LRI|u.RLI|u.PDI,o=u.BN|u.RLE|u.LRE|u.RLO|u.LRO|u.PDF,a=u.S|u.WS|u.B|e|u.PDI|o,c=null;function d(A){return function f(){if(!c){c=new Map;var A=function(Z){if(r.hasOwnProperty(Z)){var U=0;r[Z].split(",").forEach(function(be){var K=be.split("+"),re=K[0],Y=K[1];re=parseInt(re,36),Y=Y?parseInt(Y,36):0,c.set(U+=re,u[Z]);for(var ve=0;ve<Y;ve++)c.set(++U,u[Z])})}};for(var ie in r)A(ie)}}(),c.get(A.codePointAt(0))||u.L}var S,m,g;function x(A,ie){var re,U=0,be=new Map,K=ie&&new Map;return A.split(",").forEach(function Y(ve){if(-1!==ve.indexOf("+"))for(var ye=+ve;ye--;)Y(re);else{re=ve;var Q=ve.split(">"),de=Q[0],xe=Q[1];de=String.fromCodePoint(U+=parseInt(de,36)),xe=String.fromCodePoint(U+=parseInt(xe,36)),be.set(de,xe),ie&&K.set(xe,de)}}),{map:be,reverseMap:K}}function y(){if(!S){var A=x("14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",!0);S=A.map,m=A.reverseMap,g=x("6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye",!1).map}}function p(A){return y(),S.get(A)||null}function _(A){return y(),m.get(A)||null}function T(A){return y(),g.get(A)||null}var X,B=u.L,w=u.R,j=u.EN,ee=u.ES,J=u.ET,N=u.AN,k=u.CS,D=u.B,q=u.S,W=u.ON,ce=u.BN,fe=u.NSM,z=u.AL,I=u.LRO,b=u.RLO,F=u.LRE,E=u.RLE,O=u.PDF,P=u.LRI,R=u.RLI,M=u.FSI,G=u.PDI;function _e(A){return function V(){if(!X){var A=x("14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",!0),ie=A.map;A.reverseMap.forEach(function(U,be){ie.set(be,U)}),X=ie}}(),X.get(A)||null}function te(A,ie,Z,U){var be=A.length;Z=Math.max(0,null==Z?0:+Z),U=Math.min(be-1,null==U?be-1:+U);var K=[];return ie.paragraphs.forEach(function(re){var Y=Math.max(Z,re.start),ve=Math.min(U,re.end);if(Y<ve){for(var ye=ie.levels.slice(Y,ve+1),Q=ve;Q>=Y&&d(A[Q])&a;Q--)ye[Q]=re.level;for(var de=re.level,xe=1/0,we=0;we<ye.length;we++){var Pe=ye[we];Pe>de&&(de=Pe),Pe<xe&&(xe=1|Pe)}for(var Oe=de;Oe>=xe;Oe--)for(var he=0;he<ye.length;he++)if(ye[he]>=Oe){for(var se=he;he+1<ye.length&&ye[he+1]>=Oe;)he++;he>se&&K.push([se+Z,he+Z])}}}),K}function ge(A,ie,Z,U){for(var be=te(A,ie,Z,U),K=[],re=0;re<A.length;re++)K[re]=re;return be.forEach(function(Y){for(var ye=Y[1],Q=K.slice(Y[0],ye+1),de=Q.length;de--;)K[ye-de]=Q[de]}),K}return n.closingToOpeningBracket=_,n.getBidiCharType=d,n.getBidiCharTypeName=function h(A){return t[d(A)]},n.getCanonicalBracket=T,n.getEmbeddingLevels=function H(A,ie){for(var U=new Uint32Array(A.length),be=0;be<A.length;be++)U[be]=d(A[be]);var K=new Map;function re(He,rt){var Qe=U[He];U[He]=rt,K.set(Qe,K.get(Qe)-1),Qe&i&&K.set(i,K.get(i)-1),K.set(rt,(K.get(rt)||0)+1),rt&i&&K.set(i,(K.get(i)||0)+1)}for(var Y=new Uint8Array(A.length),ve=new Map,ye=[],Q=null,de=0;de<A.length;de++)Q||ye.push(Q={start:de,end:A.length-1,level:"rtl"===ie?1:"ltr"===ie?0:Ln(de,!1)}),U[de]&D&&(Q.end=de,Q=null);for(var xe=E|F|b|I|e|G|O|D,we=function(He){return He+(1&He?1:2)},Pe=function(He){return He+(1&He?2:1)},Oe=0;Oe<ye.length;Oe++){var he=[{_level:(Q=ye[Oe]).level,_override:0,_isolate:0}],se=void 0,Be=0,Ce=0,Je=0;K.clear();for(var ze=Q.start;ze<=Q.end;ze++){var Ae=U[ze];if(se=he[he.length-1],K.set(Ae,(K.get(Ae)||0)+1),Ae&i&&K.set(i,(K.get(i)||0)+1),Ae&xe)if(Ae&(E|F)){Y[ze]=se._level;var at=(Ae===E?Pe:we)(se._level);at<=125&&!Be&&!Ce?he.push({_level:at,_override:0,_isolate:0}):Be||Ce++}else if(Ae&(b|I)){Y[ze]=se._level;var Mt=(Ae===b?Pe:we)(se._level);Mt<=125&&!Be&&!Ce?he.push({_level:Mt,_override:Ae&b?w:B,_isolate:0}):Be||Ce++}else if(Ae&e){Ae&M&&(Ae=1===Ln(ze+1,!0)?R:P),Y[ze]=se._level,se._override&&re(ze,se._override);var Ve=(Ae===R?Pe:we)(se._level);Ve<=125&&0===Be&&0===Ce?(Je++,he.push({_level:Ve,_override:0,_isolate:1,_isolInitIndex:ze})):Be++}else if(Ae&G){if(Be>0)Be--;else if(Je>0){for(Ce=0;!he[he.length-1]._isolate;)he.pop();var Ft=he[he.length-1]._isolInitIndex;null!=Ft&&(ve.set(Ft,ze),ve.set(ze,Ft)),he.pop(),Je--}Y[ze]=(se=he[he.length-1])._level,se._override&&re(ze,se._override)}else Ae&O?(0===Be&&(Ce>0?Ce--:!se._isolate&&he.length>1&&(he.pop(),se=he[he.length-1])),Y[ze]=se._level):Ae&D&&(Y[ze]=Q.level);else Y[ze]=se._level,se._override&&Ae!==ce&&re(ze,se._override)}for(var Fe=[],Ne=null,je=Q.start;je<=Q.end;je++){var Ze=U[je];if(!(Ze&o)){var De=Y[je],Xe=Ze&e,ot=Ze===G;Ne&&De===Ne._level?(Ne._end=je,Ne._endsWithIsolInit=Xe):Fe.push(Ne={_start:je,_end:je,_level:De,_startsWithPDI:ot,_endsWithIsolInit:Xe})}}for(var We=[],Re=0;Re<Fe.length;Re++){var Ke=Fe[Re];if(!Ke._startsWithPDI||Ke._startsWithPDI&&!ve.has(Ke._start)){for(var st=[Ne=Ke],et=void 0;Ne&&Ne._endsWithIsolInit&&null!=(et=ve.get(Ne._end));)for(var lt=Re+1;lt<Fe.length;lt++)if(Fe[lt]._start===et){st.push(Ne=Fe[lt]);break}for(var St=[],br=0;br<st.length;br++)for(var Sn=st[br],yr=Sn._start;yr<=Sn._end;yr++)St.push(yr);for(var yi=Y[St[0]],_n=Q.level,Yt=St[0]-1;Yt>=0;Yt--)if(!(U[Yt]&o)){_n=Y[Yt];break}var Sr=St[St.length-1],Si=Y[Sr],xn=Q.level;if(!(U[Sr]&e))for(var Jt=Sr+1;Jt<=Q.end;Jt++)if(!(U[Jt]&o)){xn=Y[Jt];break}We.push({_seqIndices:St,_sosType:Math.max(_n,yi)%2?w:B,_eosType:Math.max(xn,Si)%2?w:B})}}for(var _r=0;_r<We.length;_r++){var xr=We[_r],ne=xr._seqIndices,Dt=xr._sosType,_i=xr._eosType;if(K.get(fe))for(var Zt=0;Zt<ne.length;Zt++){var Cn=ne[Zt];if(U[Cn]&fe){for(var Cr=Dt,Kt=Zt-1;Kt>=0;Kt--)if(!(U[ne[Kt]]&o)){Cr=U[ne[Kt]];break}re(Cn,Cr&(e|G)?W:Cr)}}if(K.get(j))for(var qt=0;qt<ne.length;qt++){var Nn=ne[qt];if(U[Nn]&j)for(var $t=qt-1;$t>=-1;$t--){var Tn=-1===$t?Dt:U[ne[$t]];if(Tn&s){Tn===z&&re(Nn,N);break}}}if(K.get(z))for(var Nr=0;Nr<ne.length;Nr++){var wn=ne[Nr];U[wn]&z&&re(wn,w)}if(K.get(ee)||K.get(k))for(var kt=1;kt<ne.length-1;kt++){var Tr=ne[kt];if(U[Tr]&(ee|k)){for(var _t=0,wr=0,Mr=kt-1;Mr>=0&&(_t=U[ne[Mr]])&o;Mr--);for(var Fr=kt+1;Fr<ne.length&&(wr=U[ne[Fr]])&o;Fr++);_t===wr&&(U[Tr]===ee?_t===j:_t&(j|N))&&re(Tr,_t)}}if(K.get(j))for(var Bt=0;Bt<ne.length;Bt++)if(U[ne[Bt]]&j){for(var er=Bt-1;er>=0&&U[ne[er]]&(J|o);er--)re(ne[er],j);for(var tr=Bt+1;tr<ne.length&&U[ne[tr]]&(J|o);tr++)re(ne[tr],j)}if(K.get(J)||K.get(ee)||K.get(k))for(var Pt=0;Pt<ne.length;Pt++){var Mn=ne[Pt];if(U[Mn]&(J|ee|k)){re(Mn,W);for(var rr=Pt-1;rr>=0&&U[ne[rr]]&o;rr--)re(ne[rr],W);for(var nr=Pt+1;nr<ne.length&&U[ne[nr]]&o;nr++)re(ne[nr],W)}}if(K.get(j))for(var Dr=0,Fn=Dt;Dr<ne.length;Dr++){var Dn=ne[Dr],kr=U[Dn];kr&j?Fn===B&&re(Dn,B):kr&s&&(Fn=kr)}if(K.get(i)){for(var zt=w|j|N,kn=zt|B,or=[],xt=[],Ct=0;Ct<ne.length;Ct++)if(U[ne[Ct]]&i){var At=A[ne[Ct]],Bn=void 0;if(null!==p(At)){if(!(xt.length<63))break;xt.push({char:At,seqIndex:Ct})}else if(null!==(Bn=_(At)))for(var Gt=xt.length-1;Gt>=0;Gt--){var Br=xt[Gt].char;if(Br===Bn||Br===_(T(At))||p(T(Br))===At){or.push([xt[Gt].seqIndex,Ct]),xt.length=Gt;break}}}or.sort(function(He,rt){return He[0]-rt[0]});for(var Pr=0;Pr<or.length;Pr++){for(var Pn=or[Pr],Ut=Pn[0],ir=Pn[1],zn=!1,tt=0,zr=Ut+1;zr<ir;zr++){var Ar=ne[zr];if(U[Ar]&kn){zn=!0;var An=U[Ar]&zt?w:B;if(An===Nt(Ar)){tt=An;break}}}if(zn&&!tt){tt=Dt;for(var Gr=Ut-1;Gr>=0;Gr--){var ar=ne[Gr];if(U[ar]&kn){var Gn=U[ar]&zt?w:B;tt=Gn!==Nt(ar)?Gn:Nt(ar);break}}}if(tt){if(U[ne[Ut]]=U[ne[ir]]=tt,tt!==Nt(ne[Ut]))for(var Ot=Ut+1;Ot<ne.length;Ot++)if(!(U[ne[Ot]]&o)){d(A[ne[Ot]])&fe&&(U[ne[Ot]]=tt);break}if(tt!==Nt(ne[ir]))for(var Lt=ir+1;Lt<ne.length;Lt++)if(!(U[ne[Lt]]&o)){d(A[ne[Lt]])&fe&&(U[ne[Lt]]=tt);break}}}for(var ct=0;ct<ne.length;ct++)if(U[ne[ct]]&i){for(var Un=ct,Ur=ct,Or=Dt,Et=ct-1;Et>=0;Et--){if(!(U[ne[Et]]&o)){Or=U[ne[Et]]&zt?w:B;break}Un=Et}for(var On=_i,Rt=ct+1;Rt<ne.length;Rt++){if(!(U[ne[Rt]]&(i|o))){On=U[ne[Rt]]&zt?w:B;break}Ur=Rt}for(var sr=Un;sr<=Ur;sr++)U[ne[sr]]=Or===On?Or:Nt(ne[sr]);ct=Ur}}}for(var qe=Q.start;qe<=Q.end;qe++){var lr=U[qe];if(1&Y[qe]?lr&(B|j|N)&&Y[qe]++:lr&w?Y[qe]++:lr&(N|j)&&(Y[qe]+=2),lr&o&&(Y[qe]=0===qe?Q.level:Y[qe-1]),qe===Q.end||d(A[qe])&(q|D))for(var cr=qe;cr>=0&&d(A[cr])&a;cr--)Y[cr]=Q.level}}return{levels:Y,paragraphs:ye};function Ln(He,rt){for(var Qe=He;Qe<A.length;Qe++){var ut=U[Qe];if(ut&(w|z))return 1;if(ut&(D|B)||rt&&ut===G)return 0;if(ut&e){var En=Ni(Qe);Qe=-1===En?A.length:En}}return 0}function Ni(He){for(var rt=1,Qe=He+1;Qe<A.length;Qe++){var ut=U[Qe];if(ut&D)break;if(ut&G){if(0==--rt)return Qe}else ut&e&&rt++}return-1}function Nt(He){return 1&Y[He]?w:B}},n.getMirroredCharacter=_e,n.getMirroredCharactersMap=function pe(A,ie,Z,U){var be=A.length;Z=Math.max(0,null==Z?0:+Z),U=Math.min(be-1,null==U?be-1:+U);for(var K=new Map,re=Z;re<=U;re++)if(1&ie[re]){var Y=_e(A[re]);null!==Y&&K.set(re,Y)}return K},n.getReorderSegments=te,n.getReorderedIndices=ge,n.getReorderedString=function ae(A,ie,Z,U){var be=ge(A,ie,Z,U),K=[].concat(A);return be.forEach(function(re,Y){K[Y]=(1&ie.levels[re]?_e(A[re]):null)||A[re]}),K.join("")},n.openingToClosingBracket=p,Object.defineProperty(n,"__esModule",{value:!0}),n}({})}],init(l,n,r,u){const{defaultFontURL:t}=l;return r(n,u(),{defaultFontURL:t})}}),Xn],init:(l,n)=>function(r){const u=new n;return l.typeset(r,u.resolve),u},getTransferables(l){const n=[l.glyphPositions.buffer,l.glyphIds.buffer];return l.caretPositions&&n.push(l.caretPositions.buffer),l.glyphColors&&n.push(l.glyphColors.buffer),n}}),Co=(()=>{const l={},u="aTroikaGlyphIndex";class e extends $.L5s{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new $.aLr,this.boundingBox=new $.ZzF}computeBoundingSphere(){}computeBoundingBox(){}setSide(a){const c=this.getIndex().count;this.setDrawRange(a===$._Li?c/2:0,a===$.ehD?c:c/2)}set detail(a){if(a!==this._detail){this._detail=a,("number"!=typeof a||a<1)&&(a=1);let c=function n(o){let a=l[o];if(!a){const c=new $.BKK(1,1,o,o),f=c.clone(),d=c.attributes,h=f.attributes,C=new $.u9r,x=d.uv.count;for(let S=0;S<x;S++)h.position.array[3*S]*=-1,h.normal.array[3*S+2]*=-1;["position","normal","uv"].forEach(S=>{C.setAttribute(S,new $.a$l([...d[S].array,...h[S].array],d[S].itemSize))}),C.setIndex([...c.index.array,...f.index.array.map(S=>S+x)]),C.translate(.5,.5,0),a=l[o]=C}return a}(a);["position","normal","uv"].forEach(f=>{this.attributes[f]=c.attributes[f].clone()}),this.setIndex(c.getIndex().clone())}}get detail(){return this._detail}set curveRadius(a){a!==this._curveRadius&&(this._curveRadius=a,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(a,c,f,d,h){s(this,"aTroikaGlyphBounds",a,4),s(this,u,c,1),s(this,"aTroikaGlyphColor",h,3),this._blockBounds=f,this._chunkedBounds=d,i(this,c.length),this._updateBounds()}_updateBounds(){const a=this._blockBounds;if(a){const{curveRadius:c,boundingBox:f}=this;if(c){const{PI:d,floor:h,min:C,max:x,sin:S,cos:m}=Math,g=d/2,y=2*d,p=Math.abs(c),_=a[0]/p,T=a[2]/p,B=h((_+g)/y)!==h((T+g)/y)?-p:C(S(_)*p,S(T)*p),w=h((_-g)/y)!==h((T-g)/y)?p:x(S(_)*p,S(T)*p),j=h((_+d)/y)!==h((T+d)/y)?2*p:x(p-m(_)*p,p-m(T)*p);f.min.set(B,a[1],c<0?-j:0),f.max.set(w,a[3],c<0?0:j)}else f.min.set(a[0],a[1],0),f.max.set(a[2],a[3],0);f.getBoundingSphere(this.boundingSphere)}}applyClipRect(a){let c=this.getAttribute(u).count,f=this._chunkedBounds;if(f)for(let d=f.length;d--;){c=f[d].end;let h=f[d].rect;if(h[1]<a.w&&h[3]>a.y&&h[0]<a.z&&h[2]>a.x)break}i(this,c)}}function s(o,a,c,f){const d=o.getAttribute(a);c?d&&d.array.length===c.length?(d.array.set(c),d.needsUpdate=!0):(o.setAttribute(a,new $.lb7(c,f)),delete o._maxInstanceCount,o.dispose()):d&&o.deleteAttribute(a)}function i(o,a){o[o.hasOwnProperty("instanceCount")?"instanceCount":"maxInstancedCount"]=a}return e.prototype.setAttribute||(e.prototype.setAttribute=function(o,a){return this.attributes[o]=a,this}),e})(),Do=(()=>{const l=new $.vBJ({color:16777215,side:$.ehD,transparent:!0}),n=8421504,r=new $.yGw,u=new $.Pa4,t=new $.Pa4,e=[],s=new $.Pa4,i="+x+y";function o(m){return Array.isArray(m)?m[0]:m}let a=()=>{const m=new $.Kj0(new $.BKK(1,1),l);return a=()=>m,m},c=()=>{const m=new $.Kj0(new $.BKK(1,1,32,1),l);return c=()=>m,m};const f={type:"syncstart"},d={type:"synccomplete"},h=["font","fontSize","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],C=h.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");class x extends $.Kj0{constructor(){super(new Co,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.fontSize=.1,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=n,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=i,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(g){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(g):(this._isSyncing=!0,this.dispatchEvent(f),nn({text:this.text,font:this.font,fontSize:this.fontSize||.1,letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF},y=>{this._isSyncing=!1,this._textRenderInfo=y,this.geometry.updateGlyphs(y.glyphBounds,y.glyphAtlasIndices,y.blockBounds,y.chunkedBounds,y.glyphColors);const p=this._queuedSyncs;p&&(this._queuedSyncs=null,this._needsSync=!0,this.sync(()=>{p.forEach(_=>_&&_())})),this.dispatchEvent(d),g&&g()})))}onBeforeRender(g,y,p,_,T,B){this.sync(),T.isTroikaTextMaterial&&this._prepareForRender(T),T._hadOwnSide=T.hasOwnProperty("side"),this.geometry.setSide(T._actualSide=T.side),T.side=$.Wl3}onAfterRender(g,y,p,_,T,B){T._hadOwnSide?T.side=T._actualSide:delete T.side}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}get material(){let g=this._derivedMaterial;const y=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=l.clone());if((!g||g.baseMaterial!==y)&&(g=this._derivedMaterial=function Fo(l){const n=jt(l,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new $.FM8},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new $.Ltg(0,0,0,0)},uTroikaClipRect:{value:new $.Ltg(0,0,0,0)},uTroikaDistanceOffset:{value:0},uTroikaOutlineOpacity:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new $.FM8},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new $.Ilk},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new $.Vkp},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:"\nuniform vec2 uTroikaSDFTextureSize;\nuniform float uTroikaSDFGlyphSize;\nuniform vec4 uTroikaTotalBounds;\nuniform vec4 uTroikaClipRect;\nuniform mat3 uTroikaOrient;\nuniform bool uTroikaUseGlyphColors;\nuniform float uTroikaDistanceOffset;\nuniform float uTroikaBlurRadius;\nuniform vec2 uTroikaPositionOffset;\nuniform float uTroikaCurveRadius;\nattribute vec4 aTroikaGlyphBounds;\nattribute float aTroikaGlyphIndex;\nattribute vec3 aTroikaGlyphColor;\nvarying vec2 vTroikaGlyphUV;\nvarying vec4 vTroikaTextureUVBounds;\nvarying float vTroikaTextureChannel;\nvarying vec3 vTroikaGlyphColor;\nvarying vec2 vTroikaGlyphDimensions;\n",vertexTransform:"\nvec4 bounds = aTroikaGlyphBounds;\nbounds.xz += uTroikaPositionOffset.x;\nbounds.yw -= uTroikaPositionOffset.y;\n\nvec4 outlineBounds = vec4(\n  bounds.xy - uTroikaDistanceOffset - uTroikaBlurRadius,\n  bounds.zw + uTroikaDistanceOffset + uTroikaBlurRadius\n);\nvec4 clippedBounds = vec4(\n  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),\n  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)\n);\n\nvec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);\n\nposition.xy = mix(bounds.xy, bounds.zw, clippedXY);\n\nuv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);\n\nfloat rad = uTroikaCurveRadius;\nif (rad != 0.0) {\n  float angle = position.x / rad;\n  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);\n  normal.xz = vec2(sin(angle), cos(angle));\n}\n  \nposition = uTroikaOrient * position;\nnormal = uTroikaOrient * normal;\n\nvTroikaGlyphUV = clippedXY.xy;\nvTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);\n\n\nfloat txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;\nvec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;\nvec2 txStartUV = txUvPerSquare * vec2(\n  mod(floor(aTroikaGlyphIndex / 4.0), txCols),\n  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)\n);\nvTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);\nvTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);\n",fragmentDefs:"\nuniform sampler2D uTroikaSDFTexture;\nuniform vec2 uTroikaSDFTextureSize;\nuniform float uTroikaSDFGlyphSize;\nuniform float uTroikaSDFExponent;\nuniform float uTroikaDistanceOffset;\nuniform float uTroikaFillOpacity;\nuniform float uTroikaOutlineOpacity;\nuniform float uTroikaBlurRadius;\nuniform vec3 uTroikaStrokeColor;\nuniform float uTroikaStrokeWidth;\nuniform float uTroikaStrokeOpacity;\nuniform bool uTroikaSDFDebug;\nvarying vec2 vTroikaGlyphUV;\nvarying vec4 vTroikaTextureUVBounds;\nvarying float vTroikaTextureChannel;\nvarying vec2 vTroikaGlyphDimensions;\n\nfloat troikaSdfValueToSignedDistance(float alpha) {\n  // Inverse of exponential encoding in webgl-sdf-generator\n  \n  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);\n  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;\n  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);\n  return signedDist;\n}\n\nfloat troikaGlyphUvToSdfValue(vec2 glyphUV) {\n  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);\n  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);\n  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1\n  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;\n}\n\nfloat troikaGlyphUvToDistance(vec2 uv) {\n  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));\n}\n\nfloat troikaGetAADist() {\n  \n  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300\n  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;\n  #else\n  return vTroikaGlyphDimensions.x / 64.0;\n  #endif\n}\n\nfloat troikaGetFragDistValue() {\n  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);\n  float distance = troikaGlyphUvToDistance(clampedGlyphUV);\n \n  // Extrapolate distance when outside bounds:\n  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : \n    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);\n\n  \n\n  return distance;\n}\n\nfloat troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {\n  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)\n  float alpha = step(-distanceOffset, -distance);\n  #else\n\n  float alpha = smoothstep(\n    distanceOffset + aaDist,\n    distanceOffset - aaDist,\n    distance\n  );\n  #endif\n\n  return alpha;\n}\n",fragmentColorTransform:"\nfloat aaDist = troikaGetAADist();\nfloat fragDistance = troikaGetFragDistValue();\nfloat edgeAlpha = uTroikaSDFDebug ?\n  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :\n  troikaGetEdgeAlpha(fragDistance, uTroikaDistanceOffset, max(aaDist, uTroikaBlurRadius));\n\n#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)\nvec4 fillRGBA = gl_FragColor;\nfillRGBA.a *= uTroikaFillOpacity;\nvec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);\nif (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;\ngl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(\n  -uTroikaStrokeWidth - aaDist,\n  -uTroikaStrokeWidth + aaDist,\n  fragDistance\n));\ngl_FragColor.a *= edgeAlpha;\n#endif\n\nif (edgeAlpha == 0.0) {\n  discard;\n}\n",customRewriter({vertexShader:r,fragmentShader:u}){let t=/\buniform\s+vec3\s+diffuse\b/;return t.test(u)&&(u=u.replace(t,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),t.test(r)||(r=r.replace(Xr,"uniform vec3 diffuse;\n$&\nvTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;\n"))),{vertexShader:r,fragmentShader:u}}});return n.transparent=!0,Object.defineProperties(n,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),n}(y),y.addEventListener("dispose",function p(){y.removeEventListener("dispose",p),g.dispose()})),this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY){let p=g._outlineMtl;return p||(p=g._outlineMtl=Object.create(g,{id:{value:g.id+.1}}),p.isTextOutlineMaterial=!0,p.depthWrite=!1,p.map=null,g.addEventListener("dispose",function _(){g.removeEventListener("dispose",_),p.dispose()})),[p,g]}return g}set material(g){g&&g.isTroikaTextMaterial?(this._derivedMaterial=g,this._baseMaterial=g.baseMaterial):this._baseMaterial=g}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(g){this.geometry.detail=g}get curveRadius(){return this.geometry.curveRadius}set curveRadius(g){this.geometry.curveRadius=g}get customDepthMaterial(){return o(this.material).getDepthMaterial()}get customDistanceMaterial(){return o(this.material).getDistanceMaterial()}_prepareForRender(g){const y=g.isTextOutlineMaterial,p=g.uniforms,_=this.textRenderInfo;if(_){const{sdfTexture:w,blockBounds:j}=_;p.uTroikaSDFTexture.value=w,p.uTroikaSDFTextureSize.value.set(w.image.width,w.image.height),p.uTroikaSDFGlyphSize.value=_.sdfGlyphSize,p.uTroikaSDFExponent.value=_.sdfExponent,p.uTroikaTotalBounds.value.fromArray(j),p.uTroikaUseGlyphColors.value=!y&&!!_.glyphColors;let k,D,q,ee=0,J=0,N=0,W=0,ce=0;if(y){let{outlineWidth:z,outlineOffsetX:I,outlineOffsetY:b,outlineBlur:F,outlineOpacity:E}=this;ee=this._parsePercent(z)||0,J=Math.max(0,this._parsePercent(F)||0),k=E,W=this._parsePercent(I)||0,ce=this._parsePercent(b)||0}else N=Math.max(0,this._parsePercent(this.strokeWidth)||0),N&&(q=this.strokeColor,p.uTroikaStrokeColor.value.set(q??n),D=this.strokeOpacity,null==D&&(D=1)),k=this.fillOpacity;p.uTroikaDistanceOffset.value=ee,p.uTroikaPositionOffset.value.set(W,ce),p.uTroikaBlurRadius.value=J,p.uTroikaStrokeWidth.value=N,p.uTroikaStrokeOpacity.value=D,p.uTroikaFillOpacity.value=k??1,p.uTroikaCurveRadius.value=this.curveRadius||0;let fe=this.clipRect;if(fe&&Array.isArray(fe)&&4===fe.length)p.uTroikaClipRect.value.fromArray(fe);else{const z=100*(this.fontSize||.1);p.uTroikaClipRect.value.set(j[0]-z,j[1]-z,j[2]+z,j[3]+z)}this.geometry.applyClipRect(p.uTroikaClipRect.value)}p.uTroikaSDFDebug.value=!!this.debugSDF,g.polygonOffset=!!this.depthOffset,g.polygonOffsetFactor=g.polygonOffsetUnits=this.depthOffset||0;const T=y?this.outlineColor||0:this.color;if(null==T)delete g.color;else{const w=g.hasOwnProperty("color")?g.color:g.color=new $.Ilk;(T!==w._input||"object"==typeof T)&&w.set(w._input=T)}let B=this.orientation||i;if(B!==g._orientation){let w=p.uTroikaOrient.value;B=B.replace(/[^-+xyz]/g,"");let j=B!==i&&B.match(/^([-+])([xyz])([-+])([xyz])$/);if(j){let[,ee,J,N,k]=j;u.set(0,0,0)[J]="-"===ee?1:-1,t.set(0,0,0)[k]="-"===N?-1:1,r.lookAt(s,u.cross(t),t),w.setFromMatrix4(r)}else w.identity();g._orientation=B}}_parsePercent(g){if("string"==typeof g){let y=g.match(/^(-?[\d.]+)%$/),p=y?parseFloat(y[1]):NaN;g=(isNaN(p)?0:p/100)*this.fontSize}return g}localPositionToTextCoords(g,y=new $.FM8){y.copy(g);const p=this.curveRadius;return p&&(y.x=Math.atan2(g.x,Math.abs(p)-Math.abs(g.z))*Math.abs(p)),y}worldPositionToTextCoords(g,y=new $.FM8){return u.copy(g),this.localPositionToTextCoords(this.worldToLocal(u),y)}raycast(g,y){const{textRenderInfo:p,curveRadius:_}=this;if(p){const T=p.blockBounds,B=_?c():a(),w=B.geometry,{position:j,uv:ee}=w.attributes;for(let J=0;J<ee.count;J++){let N=T[0]+ee.getX(J)*(T[2]-T[0]);const k=T[1]+ee.getY(J)*(T[3]-T[1]);let D=0;_&&(D=_-Math.cos(N/_)*_,N=Math.sin(N/_)*_),j.setXYZ(J,N,k,D)}w.boundingSphere=this.geometry.boundingSphere,w.boundingBox=this.geometry.boundingBox,B.matrixWorld=this.matrixWorld,B.material.side=this.material.side,e.length=0,B.raycast(g,e);for(let J=0;J<e.length;J++)e[J].object=this,y.push(e[J])}}copy(g){const y=this.geometry;return super.copy(g),this.geometry=y,C.forEach(p=>{this[p]=g[p]}),this}clone(){return(new this.constructor).copy(this)}}h.forEach(m=>{const g="_private_"+m;Object.defineProperty(x.prototype,m,{get(){return this[g]},set(y){y!==this[g]&&(this[g]=y,this._needsSync=!0)}})});let S=!1;return Object.defineProperty(x.prototype,"anchor",{get(){return this._deprecated_anchor},set(m){this._deprecated_anchor=m,S||(console.warn("TextMesh: `anchor` has been deprecated; use `anchorX` and `anchorY` instead."),S=!0),Array.isArray(m)?(this.anchorX=100*(+m[0]||0)+"%",this.anchorY=100*(+m[1]||0)+"%"):this.anchorX=this.anchorY=0}}),x})(),Go=function(l){return{gizmo:l}};function Uo(l,n){if(1&l&&v.GkF(0,6),2&l){const r=v.oxw(3);v.Q6J("ngTemplateOutlet",r.content.templateRef)("ngTemplateOutletContext",v.VKq(2,Go,r.instance))}}const Oo=function(){return[0,0,200]};function Lo(l,n){if(1&l){const r=v.EpF();v.TgZ(0,"ngt-group",3),v.NdJ("beforeRender",function(t){v.CHM(r);const e=v.oxw(2);return v.KtG(e.beforeRender.emit(t))}),v.ALo(1,"async"),v.YNc(2,Uo,1,4,"ng-container",4),v.qZA(),v._UZ(3,"ngt-soba-orthographic-camera",5)}if(2&l){const r=v.oxw(2);v.Q6J("ngtObjectPassThrough",r)("position",v.lcZ(1,5,r.position$)),v.xp6(2),v.Q6J("ngIf",r.content),v.xp6(1),v.Q6J("ref",r.virtualCamera)("position",v.DdM(7,Oo))}}function Eo(l,n){if(1&l&&(v.TgZ(0,"ngt-portal",1),v.YNc(1,Lo,4,8,"ng-template",2),v.qZA()),2&l){const r=v.oxw();v.Q6J("ref",r.virtualScene)}}const Ro=["hover","","index",""],Io=function(l){return["material",l]};function Vo(l,n){if(1&l&&v._UZ(0,"ngt-soba-gizmo-face-material",2),2&l){const r=n.$implicit,u=v.oxw();v.Q6J("hover",u.hover===r)("index",r)("ngtSobaGizmoViewCubeGenericPassThrough",u)}}const jo=["dimensions","","position",""];function Wo(l,n){if(1&l&&v._UZ(0,"ngt-soba-gizmo-edge-cube",5),2&l){const r=n.$implicit,u=n.index,t=v.oxw();v.Q6J("position",r)("dimensions",t.edgeDimensions[u])("ngtSobaGizmoViewCubeGenericPassThrough",t)}}function Ho(l,n){if(1&l&&v._UZ(0,"ngt-soba-gizmo-edge-cube",5),2&l){const r=n.$implicit,u=v.oxw();v.Q6J("position",r)("dimensions",u.cornerDimensions)("ngtSobaGizmoViewCubeGenericPassThrough",u)}}const oi=["text",""],ii=function(l){return{textMesh:l}};function ai(l,n){if(1&l&&v.GkF(0,2),2&l){const r=v.oxw();v.Q6J("ngTemplateOutlet",r.content.templateRef)("ngTemplateOutletContext",v.VKq(2,ii,r.instance))}}let un=(()=>{class l{constructor(r){this.templateRef=r}static ngTemplateContextGuard(r,u){return!0}}return l.\u0275fac=function(r){return new(r||l)(v.Y36(v.Rgc))},l.\u0275dir=v.lG2({type:l,selectors:[["ng-template","ngt-soba-gizmo-helper-content",""]],standalone:!0}),l})();const si=2*Math.PI,fn=new $.Tme,dn=(0,L.Sy)($.yGw),[yt,mr]=[(0,L.Sy)($._fP),(0,L.Sy)($._fP)],hn=(0,L.Sy)($.Pa4),gn=(0,L.Sy)($.Pa4);let vr=(()=>{class l extends L.Kw{constructor(){super(...arguments),this.ready$=(0,mt.H)(250).pipe((0,Ye.U)(()=>!0)),this.beforeRender=new v.vpe,this.update=new v.vpe,this.position$=this.select(this.select(r=>r.margin),this.select(r=>r.alignment),this.store.select(r=>r.size),([r,u],t,e)=>{const s=t.endsWith("-left")?-e.width/2+r:e.width/2-r,i=t.startsWith("top-")?e.height/2-u:-e.height/2+u;return(0,L.Sy)($.Pa4,[s,i,0])}),this.animating=!1,this.focusPoint=(0,L.Sy)($.Pa4,[0,0,0]),this.radius=0,this.switchSceneBackground=this.effect((0,L.oe)(()=>{let r;const u=this.store.get(e=>e.scene),t=this.get(e=>e.virtualScene);return u.background&&(r=u.background,u.background=null,t.value.background=r),()=>{r&&(u.background=r)}})),this.setBeforeRender=this.effect((0,L.oe)(()=>{const r=this.get(t=>t.renderPriority),u=this.store.get(t=>t.gl);return this.store.registerBeforeRender({callback:({delta:t})=>{const e=this.instance,{camera:s,controls:i,invalidate:o}=this.store.get(),{virtualScene:a,virtualCamera:c,autoClear:f}=this.get();e.value&&a.value&&c.value&&(this.animating&&(yt.angleTo(mr)<.01?this.animating=!1:(yt.rotateTowards(mr,t*si),s.position.set(0,0,1).applyQuaternion(yt).multiplyScalar(this.radius).add(this.focusPoint),s.up.set(0,1,0).applyQuaternion(yt).normalize(),s.quaternion.copy(yt),this.update.observed?this.update.emit():i&&i.update(),o())),dn.copy(s.matrix).invert(),e.value?.quaternion.setFromRotationMatrix(dn),f&&(u.autoClear=!1),u.clearDepth(),u.render(a.value,c.value))},priority:r})})),this.setRaycast=this.effect((0,Le.b)(r=>{const u=this.store.get(e=>e.pointer),t=new $.iMs;this.set({raycast:function(e,s){t.setFromCamera(u,r);const i=this.constructor.prototype.raycast.bind(this);i&&i(t,s)}})})),this.tweenCamera=this.effect((0,Le.b)(r=>{this.animating=!0;const{controls:u,camera:t,invalidate:e}=this.store.get();u&&(this.focusPoint=u.target),this.radius=t.position.distanceTo(hn),yt.copy(t.quaternion),gn.copy(r).multiplyScalar(this.radius).add(hn),fn.lookAt(gn),mr.copy(fn.quaternion),e()}))}set alignment(r){this.set({alignment:r})}set margin(r){this.set({margin:r})}set renderPriority(r){this.set({renderPriority:r})}set autoClear(r){this.set({autoClear:(0,L.Ig)(r)})}get virtualScene(){return this.get(r=>r.virtualScene)}get virtualCamera(){return this.get(r=>r.virtualCamera)}preInit(){super.preInit(),this.set(r=>({virtualCamera:new L.Rl,virtualScene:new L.Rl((0,L.Pl)(new $.xsS,()=>this.store.get())),alignment:r.alignment??"bottom-right",margin:r.margin??[80,80],renderPriority:r.renderPriority??0,autoClear:r.autoClear??!0}))}ngOnInit(){super.ngOnInit(),this.zone.runOutsideAngular(()=>{this.store.onReady(()=>{this.switchSceneBackground(),this.setBeforeRender(),this.setRaycast(this.get(r=>r.virtualCamera).pipe((0,oe.h)(r=>!!r)))})})}}return l.\u0275fac=function(){let n;return function(u){return(n||(n=v.n5z(l)))(u||l)}}(),l.\u0275cmp=v.Xpm({type:l,selectors:[["ngt-soba-gizmo-helper"]],contentQueries:function(r,u,t){if(1&r&&v.Suo(t,un,5),2&r){let e;v.iGM(e=v.CRH())&&(u.content=e.first)}},inputs:{alignment:"alignment",margin:"margin",renderPriority:"renderPriority",autoClear:"autoClear"},outputs:{beforeRender:"beforeRender",update:"update"},standalone:!0,features:[v._Bn([(0,L.RD)(l),(0,L.wY)(l),(0,L.Hm)(l)]),v.qOj,v.jDz],decls:2,vars:3,consts:[[3,"ref",4,"ngIf"],[3,"ref"],["ngt-portal-content",""],[3,"ngtObjectPassThrough","position","beforeRender"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngIf"],[3,"ref","position"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(r,u){1&r&&(v.YNc(0,Eo,2,1,"ngt-portal",0),v.ALo(1,"async")),2&r&&v.Q6J("ngIf",v.lcZ(1,1,u.ready$))},dependencies:[L.WS,L.ZQ,Me.U,L.VL,Ue,Ee.O5,Ee.tP,Ee.Ov],encapsulation:2,changeDetection:0}),l})(),li=(()=>{class l{}return l.\u0275fac=function(r){return new(r||l)},l.\u0275mod=v.oAB({type:l}),l.\u0275inj=v.cJS({imports:[vr]}),l})();const pn=l=>(0,L.Sy)($.Pa4,l).multiplyScalar(.38),ci=["Right","Left","Top","Bottom","Front","Back"],ui=[[1,1,1],[1,1,-1],[1,-1,1],[1,-1,-1],[-1,1,1],[-1,1,-1],[-1,-1,1],[-1,-1,-1]].map(pn),fi=[.25,.25,.25],mn=[[1,1,0],[1,0,1],[1,0,-1],[1,-1,0],[0,1,1],[0,1,-1],[0,-1,1],[0,-1,-1],[-1,1,0],[-1,0,1],[-1,0,-1],[-1,-1,0]].map(pn),di=mn.map(l=>l.toArray().map(n=>0==n?.5:.25));let nt=(()=>{class l extends L.WZ{constructor(){if(super(),this.click=new v.vpe,this.gizmoHelper=(0,v.f3M)(vr,{optional:!0}),!this.gizmoHelper)throw new Error("<ngt-soba-gizmo-viewcube> can only be used in <ngt-soba-gizmo-helper>")}set font(r){this.set({font:r})}get font(){return this.get(r=>r.font)}set opacity(r){this.set({opacity:(0,L.su)(r)})}get opacity(){return this.get(r=>r.opacity)}set color(r){this.set({color:r})}get color(){return this.get(r=>r.color)}set hoverColor(r){this.set({hoverColor:r})}get hoverColor(){return this.get(r=>r.hoverColor)}set textColor(r){this.set({textColor:r})}get textColor(){return this.get(r=>r.textColor)}set strokeColor(r){this.set({strokeColor:r})}get strokeColor(){return this.get(r=>r.strokeColor)}set faces(r){this.set({faces:r})}get faces(){return this.get(r=>r.faces)}get raycast(){return this.gizmoHelper.get(r=>r.raycast)}preInit(){super.preInit(),this.set(r=>({font:r.font??"20px Inter var, Arial, sans-serif",faces:r.faces??ci,color:r.color??"#f0f0f0",hoverColor:r.hoverColor??"#999",textColor:r.textColor??"black",strokeColor:r.strokeColor??"black",opacity:r.opacity??1}))}}return l.\u0275fac=function(r){return new(r||l)},l.\u0275dir=v.lG2({type:l,inputs:{font:"font",opacity:"opacity",color:"color",hoverColor:"hoverColor",textColor:"textColor",strokeColor:"strokeColor",faces:"faces"},outputs:{click:"click"},features:[v.qOj]}),l})(),vn=(()=>{class l{constructor(r){this.host=r}set ngtSobaGizmoViewCubeGenericPassThrough(r){this.assertWrapper(r),r.select(r.select(u=>u.font).pipe((0,L.Xb)()),r.select(u=>u.opacity).pipe((0,L.Xb)()),r.select(u=>u.color).pipe((0,L.Xb)()),r.select(u=>u.hoverColor).pipe((0,L.Xb)()),r.select(u=>u.textColor).pipe((0,L.Xb)()),r.select(u=>u.strokeColor).pipe((0,L.Xb)()),r.select(u=>u.faces).pipe((0,L.Xb)())).pipe((0,ke.R)(r.destroy$)).subscribe(()=>{this.host.font=r.font,this.host.opacity=r.opacity,this.host.color=r.color,this.host.hoverColor=r.hoverColor,this.host.textColor=r.textColor,this.host.strokeColor=r.strokeColor,this.host.faces=r.faces}),r.click.observed&&this.host.click.pipe((0,ke.R)(r.destroy$)).subscribe(r.click.emit.bind(r.click))}assertWrapper(r){if(!(r instanceof nt))throw new Error("[NgtSobaGizmoViewCubePassThrough] wrapper is not an NgtSobaGizmoViewCubeGeneric")}}return l.\u0275fac=function(r){return new(r||l)(v.Y36(nt,10))},l.\u0275dir=v.lG2({type:l,selectors:[["","ngtSobaGizmoViewCubeGenericPassThrough",""]],inputs:{ngtSobaGizmoViewCubeGenericPassThrough:"ngtSobaGizmoViewCubeGenericPassThrough"},standalone:!0}),l})(),hi=(()=>{class l extends nt{constructor(){super(...arguments),this.texture$=this.select(this.select(r=>r.index),this.select(r=>r.faces),this.select(r=>r.font),this.select(r=>r.color),this.select(r=>r.textColor),this.select(r=>r.strokeColor),()=>{const r=this.store.get(d=>d.gl),{color:u,strokeColor:t,textColor:e,font:s,faces:i,index:o}=this.get(),a=document.createElement("canvas");a.width=128,a.height=128;const c=a.getContext("2d");c.fillStyle=u,c.fillRect(0,0,a.width,a.height),c.strokeStyle=t,c.strokeRect(0,0,a.width,a.height),c.font=s,c.textAlign="center",c.fillStyle=e,c.fillText(i[o].toUpperCase(),64,76);const f=new $.ROQ(a);return f.encoding=r.outputEncoding,f.anisotropy=r.capabilities.getMaxAnisotropy()||1,f})}set hover(r){this.set({hover:(0,L.Ig)(r)})}get hover(){return this.get(r=>r.hover)}set index(r){this.set({index:(0,L.su)(r)})}get index(){return this.get(r=>r.index)}}return l.\u0275fac=function(){let n;return function(u){return(n||(n=v.n5z(l)))(u||l)}}(),l.\u0275cmp=v.Xpm({type:l,selectors:[["ngt-soba-gizmo-face-material","hover","","index",""]],inputs:{hover:"hover",index:"index"},standalone:!0,features:[v._Bn([{provide:nt,useExisting:l}]),v.qOj,v.jDz],attrs:Ro,decls:2,vars:9,consts:[["transparent","",3,"ref","map","attach","color","opacity"]],template:function(r,u){1&r&&(v._UZ(0,"ngt-mesh-lambert-material",0),v.ALo(1,"async")),2&r&&v.Q6J("ref",u.instance)("map",v.lcZ(1,5,u.texture$))("attach",v.VKq(7,Io,""+u.index))("color",u.hover?u.hoverColor:"white")("opacity",u.opacity)},dependencies:[Te.sA,Ee.Ov],encapsulation:2,changeDetection:0}),l})(),gi=(()=>{class l extends nt{constructor(){super(...arguments),this.hover=-1}onClick(r){this.click.observed?this.click.emit(r):(r.stopPropagation(),this.gizmoHelper.tweenCamera(r.face.normal))}onPointerOut(r){r.stopPropagation(),this.hover=-1}onPointerMove(r){r.stopPropagation(),this.hover=Math.floor(r.faceIndex/2)}}return l.\u0275fac=function(){let n;return function(u){return(n||(n=v.n5z(l)))(u||l)}}(),l.\u0275cmp=v.Xpm({type:l,selectors:[["ngt-soba-gizmo-face-cube"]],standalone:!0,features:[v._Bn([{provide:nt,useExisting:l}]),v.qOj,v.jDz],decls:3,vars:2,consts:[[3,"raycast","click","pointerout","pointermove"],[3,"hover","index","ngtSobaGizmoViewCubeGenericPassThrough",4,"ngFor","ngForRepeat"],[3,"hover","index","ngtSobaGizmoViewCubeGenericPassThrough"]],template:function(r,u){1&r&&(v.TgZ(0,"ngt-mesh",0),v.NdJ("click",function(e){return u.onClick(e)})("pointerout",function(e){return u.onPointerOut(e)})("pointermove",function(e){return u.onPointerMove(e)}),v._UZ(1,"ngt-box-geometry"),v.YNc(2,Vo,1,3,"ngt-soba-gizmo-face-material",1),v.qZA()),2&r&&(v.Q6J("raycast",u.raycast),v.xp6(2),v.Q6J("ngForRepeat",6))},dependencies:[Ir.oX,Er.gB,hi,vn,L.l3],encapsulation:2,changeDetection:0}),l})(),pi=(()=>{class l extends nt{constructor(){super(...arguments),this.hover=!1}set dimensions(r){this.set({dimensions:r})}get dimensions(){return this.get(r=>r.dimensions)}set position(r){this.set({position:r})}get position(){return this.get(r=>r.position)}onClick(r){this.click.observed?this.click.emit(r):(r.stopPropagation(),this.gizmoHelper.tweenCamera((0,L.Sy)($.Pa4,this.position)))}onPointerOut(r){r.stopPropagation(),this.hover=!1}onPointerOver(r){r.stopPropagation(),this.hover=!0}}return l.\u0275fac=function(){let n;return function(u){return(n||(n=v.n5z(l)))(u||l)}}(),l.\u0275cmp=v.Xpm({type:l,selectors:[["ngt-soba-gizmo-edge-cube","dimensions","","position",""]],inputs:{dimensions:"dimensions",position:"position"},standalone:!0,features:[v._Bn([{provide:nt,useExisting:l}]),v.qOj,v.jDz],attrs:jo,decls:3,vars:6,consts:[[3,"scale","position","raycast","click","pointerout","pointerover"],[3,"args"],["transparent","","opacity","0.6",3,"color","visible"]],template:function(r,u){1&r&&(v.TgZ(0,"ngt-mesh",0),v.NdJ("click",function(e){return u.onClick(e)})("pointerout",function(e){return u.onPointerOut(e)})("pointerover",function(e){return u.onPointerOver(e)}),v._UZ(1,"ngt-box-geometry",1)(2,"ngt-mesh-basic-material",2),v.qZA()),2&r&&(v.Q6J("scale",1.01)("position",u.position)("raycast",u.raycast),v.xp6(1),v.Q6J("args",u.dimensions),v.xp6(1),v.Q6J("color",u.hover?u.hoverColor:"white")("visible",u.hover))},dependencies:[Ir.oX,Er.gB,Te.$t],encapsulation:2,changeDetection:0}),l})(),bn=(()=>{class l extends nt{constructor(){super(...arguments),this.edges=mn,this.edgeDimensions=di,this.corners=ui,this.cornerDimensions=fi}}return l.\u0275fac=function(){let n;return function(u){return(n||(n=v.n5z(l)))(u||l)}}(),l.\u0275cmp=v.Xpm({type:l,selectors:[["ngt-soba-gizmo-viewcube"]],standalone:!0,features:[v._Bn([{provide:nt,useExisting:l}]),v.qOj,v.jDz],decls:6,vars:5,consts:[[3,"scale"],[3,"ngtSobaGizmoViewCubeGenericPassThrough"],[3,"position","dimensions","ngtSobaGizmoViewCubeGenericPassThrough",4,"ngFor","ngForOf"],["intensity","0.5"],["intensity","0.5",3,"position"],[3,"position","dimensions","ngtSobaGizmoViewCubeGenericPassThrough"]],template:function(r,u){1&r&&(v.TgZ(0,"ngt-group",0),v._UZ(1,"ngt-soba-gizmo-face-cube",1),v.YNc(2,Wo,1,3,"ngt-soba-gizmo-edge-cube",2),v.YNc(3,Ho,1,3,"ngt-soba-gizmo-edge-cube",2),v._UZ(4,"ngt-ambient-light",3)(5,"ngt-point-light",4),v.qZA()),2&r&&(v.Q6J("scale",60),v.xp6(1),v.Q6J("ngtSobaGizmoViewCubeGenericPassThrough",u),v.xp6(1),v.Q6J("ngForOf",u.edges),v.xp6(1),v.Q6J("ngForOf",u.corners),v.xp6(2),v.Q6J("position",10))},dependencies:[Me.U,gi,pi,Rr.wx,Rr.HY,vn,Ee.sg],encapsulation:2,changeDetection:0}),l})(),mi=(()=>{class l{}return l.\u0275fac=function(r){return new(r||l)},l.\u0275mod=v.oAB({type:l}),l.\u0275inj=v.cJS({imports:[bn]}),l})();new $.Pa4;let vi=(()=>{class l{constructor(r){this.templateRef=r}static ngTemplateContextGuard(r,u){return!0}}return l.\u0275fac=function(r){return new(r||l)(v.Y36(v.Rgc))},l.\u0275dir=v.lG2({type:l,selectors:[["ng-template","ngt-soba-text-content",""]],standalone:!0}),l})(),yn=(()=>{class l extends L.Kw{constructor(){super(...arguments),this.beforeRender=new v.vpe,this.sync=new v.vpe,this.init=this.effect((0,Ge.z)((0,$e.Q)(It.Z),(0,L.oe)(()=>{const r=this.get(u=>u.material);return r&&(this.textMesh.value.material=L.is.ref(r)?r.value:r,this.textMesh.value.sync()),(r||this.commonMaterial)&&delete this.textMesh.value.color,()=>{this.textMesh.value.dispose()}}))),this.preloadFont=this.effect((0,Le.b)(()=>{const{font:r,characters:u}=this.get();r&&u&&function So({font:l,characters:n,sdfGlyphSize:r},u){nn({font:l,sdfGlyphSize:r,text:Array.isArray(n)?n.join("\n"):""+n},u)}({font:r,characters:u})}))}set text(r){this.set({text:r})}set characters(r){this.set({characters:r})}set fontSize(r){this.set({fontSize:(0,L.su)(r)})}set maxWidth(r){this.set({maxWidth:(0,L.su)(r)})}set lineHeight(r){this.set({lineHeight:(0,L.su)(r)})}set letterSpacing(r){this.set({letterSpacing:(0,L.su)(r)})}set textAlign(r){this.set({textAlign:r})}set font(r){this.set({font:r})}set anchorX(r){this.set({anchorX:r})}set anchorY(r){this.set({anchorY:r})}set clipRect(r){this.set({clipRect:r})}set depthOffset(r){this.set({depthOffset:(0,L.su)(r)})}set direction(r){this.set({direction:r})}set overflowWrap(r){this.set({overflowWrap:r})}set whiteSpace(r){this.set({whiteSpace:r})}set outlineWidth(r){this.set({outlineWidth:(0,L.su)(r,r)})}set outlineOffsetX(r){this.set({outlineOffsetX:(0,L.su)(r,r)})}set outlineOffsetY(r){this.set({outlineOffsetY:(0,L.su)(r,r)})}set outlineBlur(r){this.set({outlineBlur:(0,L.su)(r,r)})}set outlineColor(r){this.set({outlineColor:r})}set outlineOpacity(r){this.set({outlineOpacity:(0,L.su)(r)})}set strokeWidth(r){this.set({strokeWidth:(0,L.su)(r,r)})}set strokeColor(r){this.set({strokeColor:r})}set strokeOpacity(r){this.set({strokeOpacity:(0,L.su)(r)})}set fillOpacity(r){this.set({fillOpacity:(0,L.su)(r)})}set debugSDF(r){this.set({debugSDF:(0,L.Ig)(r)})}set material(r){this.set({material:r})}get textMesh(){return this.get(r=>r.textMesh)}preInit(){this.set(r=>({textMesh:new L.Rl(new Do),anchorX:r.anchorX||"center",anchorY:r.anchorY||"middle",text:r.text||""}))}ngOnInit(){super.ngOnInit(),this.zone.runOutsideAngular(()=>{this.preloadFont(this.select(this.select(r=>r.fonts),this.select(r=>r.characters)))}),this.store.onReady(()=>{this.init()})}postSetOptions(r){const u=this.store.get(t=>t.invalidate);r.sync(()=>{u(),this.sync.observed&&this.sync.emit(r)})}get optionFields(){return{...super.optionFields,text:!1,characters:!0,fontSize:!0,maxWidth:!0,lineHeight:!0,letterSpacing:!0,textAlign:!0,font:!0,anchorX:!1,anchorY:!1,clipRect:!0,depthOffset:!0,direction:!0,overflowWrap:!0,whiteSpace:!0,outlineWidth:!0,outlineOffsetX:!0,outlineOffsetY:!0,outlineBlur:!0,outlineColor:!0,outlineOpacity:!0,strokeWidth:!0,strokeColor:!0,strokeOpacity:!0,fillOpacity:!0,debugSDF:!0}}}return l.\u0275fac=function(){let n;return function(u){return(n||(n=v.n5z(l)))(u||l)}}(),l.\u0275cmp=v.Xpm({type:l,selectors:[["ngt-soba-text","text",""]],contentQueries:function(r,u,t){if(1&r&&(v.Suo(t,vi,5),v.Suo(t,L.hZ,5)),2&r){let e;v.iGM(e=v.CRH())&&(u.content=e.first),v.iGM(e=v.CRH())&&(u.commonMaterial=e.first)}},inputs:{text:"text",characters:"characters",fontSize:"fontSize",maxWidth:"maxWidth",lineHeight:"lineHeight",letterSpacing:"letterSpacing",textAlign:"textAlign",font:"font",anchorX:"anchorX",anchorY:"anchorY",clipRect:"clipRect",depthOffset:"depthOffset",direction:"direction",overflowWrap:"overflowWrap",whiteSpace:"whiteSpace",outlineWidth:"outlineWidth",outlineOffsetX:"outlineOffsetX",outlineOffsetY:"outlineOffsetY",outlineBlur:"outlineBlur",outlineColor:"outlineColor",outlineOpacity:"outlineOpacity",strokeWidth:"strokeWidth",strokeColor:"strokeColor",strokeOpacity:"strokeOpacity",fillOpacity:"fillOpacity",debugSDF:"debugSDF",material:"material"},outputs:{beforeRender:"beforeRender",sync:"sync"},standalone:!0,features:[v._Bn([(0,L.RD)(l),(0,L.wY)(l,n=>n.textMesh),(0,L.Hm)(l)]),v.qOj,v.jDz],attrs:oi,decls:2,vars:3,consts:[[3,"object","ngtObjectPassThrough","beforeRender"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(r,u){1&r&&(v.TgZ(0,"ngt-primitive",0),v.NdJ("beforeRender",function(e){return u.beforeRender.emit(e)}),v.YNc(1,ai,1,4,"ng-container",1),v.qZA()),2&r&&(v.Q6J("object",u.textMesh)("ngtObjectPassThrough",u),v.xp6(1),v.Q6J("ngIf",u.content))},dependencies:[pt.U,L.VL,Ee.O5,Ee.tP],encapsulation:2,changeDetection:0}),l})(),bi=(()=>{class l{}return l.\u0275fac=function(r){return new(r||l)},l.\u0275mod=v.oAB({type:l}),l.\u0275inj=v.cJS({imports:[yn]}),l})()}}]);